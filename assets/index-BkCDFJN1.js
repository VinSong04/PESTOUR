(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gp={exports:{}},Ha={},qp={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),I_=Symbol.for("react.portal"),N_=Symbol.for("react.fragment"),R_=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),A_=Symbol.for("react.provider"),O_=Symbol.for("react.context"),D_=Symbol.for("react.forward_ref"),M_=Symbol.for("react.suspense"),L_=Symbol.for("react.memo"),F_=Symbol.for("react.lazy"),xf=Symbol.iterator;function j_(t){return t===null||typeof t!="object"?null:(t=xf&&t[xf]||t["@@iterator"],typeof t=="function"?t:null)}var Kp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qp=Object.assign,Yp={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=Yp,this.updater=n||Kp}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xp(){}Xp.prototype=Ai.prototype;function Nc(t,e,n){this.props=t,this.context=e,this.refs=Yp,this.updater=n||Kp}var Rc=Nc.prototype=new Xp;Rc.constructor=Nc;Qp(Rc,Ai.prototype);Rc.isPureReactComponent=!0;var Sf=Array.isArray,Jp=Object.prototype.hasOwnProperty,Pc={current:null},Zp={key:!0,ref:!0,__self:!0,__source:!0};function em(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Jp.call(e,r)&&!Zp.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ks,type:t,key:s,ref:o,props:i,_owner:Pc.current}}function B_(t,e){return{$$typeof:Ks,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ac(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ks}function U_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cf=/\/+/g;function Tl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?U_(""+t.key):e.toString(36)}function Ao(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ks:case I_:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Tl(o,0):r,Sf(i)?(n="",t!=null&&(n=t.replace(Cf,"$&/")+"/"),Ao(i,e,n,"",function(u){return u})):i!=null&&(Ac(i)&&(i=B_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Sf(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Tl(s,a);o+=Ao(s,e,n,l,i)}else if(l=j_(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Tl(s,a++),o+=Ao(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fo(t,e,n){if(t==null)return t;var r=[],i=0;return Ao(t,r,"","",function(s){return e.call(n,s,i++)}),r}function z_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},Oo={transition:null},W_={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Oo,ReactCurrentOwner:Pc};function tm(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:fo,forEach:function(t,e,n){fo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fo(t,function(){e++}),e},toArray:function(t){return fo(t,function(e){return e})||[]},only:function(t){if(!Ac(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ai;ue.Fragment=N_;ue.Profiler=P_;ue.PureComponent=Nc;ue.StrictMode=R_;ue.Suspense=M_;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W_;ue.act=tm;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qp({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Pc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Jp.call(e,l)&&!Zp.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ks,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:O_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A_,_context:t},t.Consumer=t};ue.createElement=em;ue.createFactory=function(t){var e=em.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:D_,render:t}};ue.isValidElement=Ac;ue.lazy=function(t){return{$$typeof:F_,_payload:{_status:-1,_result:t},_init:z_}};ue.memo=function(t,e){return{$$typeof:L_,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Oo.transition;Oo.transition={};try{t()}finally{Oo.transition=e}};ue.unstable_act=tm;ue.useCallback=function(t,e){return lt.current.useCallback(t,e)};ue.useContext=function(t){return lt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return lt.current.useEffect(t,e)};ue.useId=function(){return lt.current.useId()};ue.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return lt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};ue.useRef=function(t){return lt.current.useRef(t)};ue.useState=function(t){return lt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return lt.current.useTransition()};ue.version="18.3.1";qp.exports=ue;var de=qp.exports;const V_=$p(de);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_=de,$_=Symbol.for("react.element"),G_=Symbol.for("react.fragment"),q_=Object.prototype.hasOwnProperty,K_=H_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q_={key:!0,ref:!0,__self:!0,__source:!0};function nm(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)q_.call(e,r)&&!Q_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$_,type:t,key:s,ref:o,props:i,_owner:K_.current}}Ha.Fragment=G_;Ha.jsx=nm;Ha.jsxs=nm;Gp.exports=Ha;var d=Gp.exports,pu={},rm={exports:{}},Et={},im={exports:{}},sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var g=z.length;z.push(Y);e:for(;0<g;){var c=g-1>>>1,y=z[c];if(0<i(y,Y))z[c]=Y,z[g]=y,g=c;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],g=z.pop();if(g!==Y){z[0]=g;e:for(var c=0,y=z.length,k=y>>>1;c<k;){var T=2*(c+1)-1,I=z[T],R=T+1,S=z[R];if(0>i(I,g))R<y&&0>i(S,I)?(z[c]=S,z[R]=g,c=R):(z[c]=I,z[T]=g,c=T);else if(R<y&&0>i(S,g))z[c]=S,z[R]=g,c=R;else break e}}return Y}function i(z,Y){var g=z.sortIndex-Y.sortIndex;return g!==0?g:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,f=3,w=!1,x=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=z)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function b(z){if(C=!1,_(z),!x)if(n(l)!==null)x=!0,An(L);else{var Y=n(u);Y!==null&&On(b,Y.startTime-z)}}function L(z,Y){x=!1,C&&(C=!1,v(q),q=-1),w=!0;var g=f;try{for(_(Y),p=n(l);p!==null&&(!(p.expirationTime>Y)||z&&!oe());){var c=p.callback;if(typeof c=="function"){p.callback=null,f=p.priorityLevel;var y=c(p.expirationTime<=Y);Y=t.unstable_now(),typeof y=="function"?p.callback=y:p===n(l)&&r(l),_(Y)}else r(l);p=n(l)}if(p!==null)var k=!0;else{var T=n(u);T!==null&&On(b,T.startTime-Y),k=!1}return k}finally{p=null,f=g,w=!1}}var $=!1,U=null,q=-1,re=5,ne=-1;function oe(){return!(t.unstable_now()-ne<re)}function xe(){if(U!==null){var z=t.unstable_now();ne=z;var Y=!0;try{Y=U(!0,z)}finally{Y?fe():($=!1,U=null)}}else $=!1}var fe;if(typeof m=="function")fe=function(){m(xe)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Qt=Re.port2;Re.port1.onmessage=xe,fe=function(){Qt.postMessage(null)}}else fe=function(){A(xe,0)};function An(z){U=z,$||($=!0,fe())}function On(z,Y){q=A(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){x||w||(x=!0,An(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var g=f;f=Y;try{return z()}finally{f=g}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var g=f;f=z;try{return Y()}finally{f=g}},t.unstable_scheduleCallback=function(z,Y,g){var c=t.unstable_now();switch(typeof g=="object"&&g!==null?(g=g.delay,g=typeof g=="number"&&0<g?c+g:c):g=c,z){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=g+y,z={id:h++,callback:Y,priorityLevel:z,startTime:g,expirationTime:y,sortIndex:-1},g>c?(z.sortIndex=g,e(u,z),n(l)===null&&z===n(u)&&(C?(v(q),q=-1):C=!0,On(b,g-c))):(z.sortIndex=y,e(l,z),x||w||(x=!0,An(L))),z},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(z){var Y=f;return function(){var g=f;f=Y;try{return z.apply(this,arguments)}finally{f=g}}}})(sm);im.exports=sm;var Y_=im.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=de,Ct=Y_;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var om=new Set,xs={};function jr(t,e){_i(t,e),_i(t+"Capture",e)}function _i(t,e){for(xs[t]=e,t=0;t<e.length;t++)om.add(e[t])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mu=Object.prototype.hasOwnProperty,J_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ef={},bf={};function Z_(t){return mu.call(bf,t)?!0:mu.call(Ef,t)?!1:J_.test(t)?bf[t]=!0:(Ef[t]=!0,!1)}function e0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t0(t,e,n,r){if(e===null||typeof e>"u"||e0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Dc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oc,Dc);Ye[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oc,Dc);Ye[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oc,Dc);Ye[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mc(t,e,n,r){var i=Ye.hasOwnProperty(e)?Ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t0(e,n,i,r)&&(n=null),r||i===null?Z_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rn=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ho=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),Lc=Symbol.for("react.strict_mode"),gu=Symbol.for("react.profiler"),am=Symbol.for("react.provider"),lm=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),vu=Symbol.for("react.suspense"),yu=Symbol.for("react.suspense_list"),jc=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),um=Symbol.for("react.offscreen"),kf=Symbol.iterator;function Hi(t){return t===null||typeof t!="object"?null:(t=kf&&t[kf]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Il;function ns(t){if(Il===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Il=e&&e[1]||""}return`
`+Il+t}var Nl=!1;function Rl(t,e){if(!t||Nl)return"";Nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Nl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ns(t):""}function n0(t){switch(t.tag){case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 2:case 15:return t=Rl(t.type,!1),t;case 11:return t=Rl(t.type.render,!1),t;case 1:return t=Rl(t.type,!0),t;default:return""}}function _u(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case Hr:return"Portal";case gu:return"Profiler";case Lc:return"StrictMode";case vu:return"Suspense";case yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lm:return(t.displayName||"Context")+".Consumer";case am:return(t._context.displayName||"Context")+".Provider";case Fc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jc:return e=t.displayName||null,e!==null?e:_u(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return _u(t(e))}catch{}}return null}function r0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _u(e);case 8:return e===Lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i0(t){var e=cm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function po(t){t._valueTracker||(t._valueTracker=i0(t))}function dm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wu(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fm(t,e){e=e.checked,e!=null&&Mc(t,"checked",e,!1)}function xu(t,e){fm(t,e);var n=sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Su(t,e.type,n):e.hasOwnProperty("defaultValue")&&Su(t,e.type,sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function If(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Su(t,e,n){(e!=="number"||Yo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rs=Array.isArray;function si(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(rs(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sr(n)}}function hm(t,e){var n=sr(e.value),r=sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mo,mm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mo=mo||document.createElement("div"),mo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s0=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(t){s0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),os[e]=os[t]})});function gm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||os.hasOwnProperty(t)&&os[t]?(""+e).trim():e+"px"}function vm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var o0=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bu(t,e){if(e){if(o0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=null;function Bc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iu=null,oi=null,ai=null;function Pf(t){if(t=Xs(t)){if(typeof Iu!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Qa(e),Iu(t.stateNode,t.type,e))}}function ym(t){oi?ai?ai.push(t):ai=[t]:oi=t}function _m(){if(oi){var t=oi,e=ai;if(ai=oi=null,Pf(t),e)for(t=0;t<e.length;t++)Pf(e[t])}}function wm(t,e){return t(e)}function xm(){}var Pl=!1;function Sm(t,e,n){if(Pl)return t(e,n);Pl=!0;try{return wm(t,e,n)}finally{Pl=!1,(oi!==null||ai!==null)&&(xm(),_m())}}function Cs(t,e){var n=t.stateNode;if(n===null)return null;var r=Qa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Nu=!1;if(xn)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Nu=!1}function a0(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var as=!1,Xo=null,Jo=!1,Ru=null,l0={onError:function(t){as=!0,Xo=t}};function u0(t,e,n,r,i,s,o,a,l){as=!1,Xo=null,a0.apply(l0,arguments)}function c0(t,e,n,r,i,s,o,a,l){if(u0.apply(this,arguments),as){if(as){var u=Xo;as=!1,Xo=null}else throw Error(O(198));Jo||(Jo=!0,Ru=u)}}function Br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Af(t){if(Br(t)!==t)throw Error(O(188))}function d0(t){var e=t.alternate;if(!e){if(e=Br(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Af(i),t;if(s===r)return Af(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Em(t){return t=d0(t),t!==null?bm(t):null}function bm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bm(t);if(e!==null)return e;t=t.sibling}return null}var km=Ct.unstable_scheduleCallback,Of=Ct.unstable_cancelCallback,f0=Ct.unstable_shouldYield,h0=Ct.unstable_requestPaint,Oe=Ct.unstable_now,p0=Ct.unstable_getCurrentPriorityLevel,Uc=Ct.unstable_ImmediatePriority,Tm=Ct.unstable_UserBlockingPriority,Zo=Ct.unstable_NormalPriority,m0=Ct.unstable_LowPriority,Im=Ct.unstable_IdlePriority,$a=null,en=null;function g0(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot($a,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:_0,v0=Math.log,y0=Math.LN2;function _0(t){return t>>>=0,t===0?32:31-(v0(t)/y0|0)|0}var go=64,vo=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=is(a):(s&=o,s!==0&&(r=is(s)))}else o=n&~i,o!==0?r=is(o):s!==0&&(r=is(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$t(e),i=1<<n,r|=t[n],e&=~i;return r}function w0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-$t(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=w0(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Pu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nm(){var t=go;return go<<=1,!(go&4194240)&&(go=64),t}function Al(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function S0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$t(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function zc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$t(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function Rm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pm,Wc,Am,Om,Dm,Au=!1,yo=[],Gn=null,qn=null,Kn=null,Es=new Map,bs=new Map,jn=[],C0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Df(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":Es.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(e.pointerId)}}function Gi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xs(e),e!==null&&Wc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function E0(t,e,n,r,i){switch(e){case"focusin":return Gn=Gi(Gn,t,e,n,r,i),!0;case"dragenter":return qn=Gi(qn,t,e,n,r,i),!0;case"mouseover":return Kn=Gi(Kn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Es.set(s,Gi(Es.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,bs.set(s,Gi(bs.get(s)||null,t,e,n,r,i)),!0}return!1}function Mm(t){var e=wr(t.target);if(e!==null){var n=Br(e);if(n!==null){if(e=n.tag,e===13){if(e=Cm(n),e!==null){t.blockedOn=e,Dm(t.priority,function(){Am(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Do(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ou(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tu=r,n.target.dispatchEvent(r),Tu=null}else return e=Xs(n),e!==null&&Wc(e),t.blockedOn=n,!1;e.shift()}return!0}function Mf(t,e,n){Do(t)&&n.delete(e)}function b0(){Au=!1,Gn!==null&&Do(Gn)&&(Gn=null),qn!==null&&Do(qn)&&(qn=null),Kn!==null&&Do(Kn)&&(Kn=null),Es.forEach(Mf),bs.forEach(Mf)}function qi(t,e){t.blockedOn===e&&(t.blockedOn=null,Au||(Au=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,b0)))}function ks(t){function e(i){return qi(i,t)}if(0<yo.length){qi(yo[0],t);for(var n=1;n<yo.length;n++){var r=yo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gn!==null&&qi(Gn,t),qn!==null&&qi(qn,t),Kn!==null&&qi(Kn,t),Es.forEach(e),bs.forEach(e),n=0;n<jn.length;n++)r=jn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)Mm(n),n.blockedOn===null&&jn.shift()}var li=Rn.ReactCurrentBatchConfig,ta=!0;function k0(t,e,n,r){var i=ge,s=li.transition;li.transition=null;try{ge=1,Vc(t,e,n,r)}finally{ge=i,li.transition=s}}function T0(t,e,n,r){var i=ge,s=li.transition;li.transition=null;try{ge=4,Vc(t,e,n,r)}finally{ge=i,li.transition=s}}function Vc(t,e,n,r){if(ta){var i=Ou(t,e,n,r);if(i===null)Wl(t,e,r,na,n),Df(t,r);else if(E0(i,t,e,n,r))r.stopPropagation();else if(Df(t,r),e&4&&-1<C0.indexOf(t)){for(;i!==null;){var s=Xs(i);if(s!==null&&Pm(s),s=Ou(t,e,n,r),s===null&&Wl(t,e,r,na,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wl(t,e,r,null,n)}}var na=null;function Ou(t,e,n,r){if(na=null,t=Bc(r),t=wr(t),t!==null)if(e=Br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return na=t,null}function Lm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p0()){case Uc:return 1;case Tm:return 4;case Zo:case m0:return 16;case Im:return 536870912;default:return 16}default:return 16}}var Hn=null,Hc=null,Mo=null;function Fm(){if(Mo)return Mo;var t,e=Hc,n=e.length,r,i="value"in Hn?Hn.value:Hn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Mo=i.slice(t,1<r?1-r:void 0)}function Lo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _o(){return!0}function Lf(){return!1}function bt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_o:Lf,this.isPropagationStopped=Lf,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),e}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=bt(Oi),Ys=Ne({},Oi,{view:0,detail:0}),I0=bt(Ys),Ol,Dl,Ki,Ga=Ne({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ki&&(Ki&&t.type==="mousemove"?(Ol=t.screenX-Ki.screenX,Dl=t.screenY-Ki.screenY):Dl=Ol=0,Ki=t),Ol)},movementY:function(t){return"movementY"in t?t.movementY:Dl}}),Ff=bt(Ga),N0=Ne({},Ga,{dataTransfer:0}),R0=bt(N0),P0=Ne({},Ys,{relatedTarget:0}),Ml=bt(P0),A0=Ne({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),O0=bt(A0),D0=Ne({},Oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),M0=bt(D0),L0=Ne({},Oi,{data:0}),jf=bt(L0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=B0[t])?!!e[t]:!1}function Gc(){return U0}var z0=Ne({},Ys,{key:function(t){if(t.key){var e=F0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?j0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(t){return t.type==="keypress"?Lo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),W0=bt(z0),V0=Ne({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=bt(V0),H0=Ne({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),$0=bt(H0),G0=Ne({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),q0=bt(G0),K0=Ne({},Ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q0=bt(K0),Y0=[9,13,27,32],qc=xn&&"CompositionEvent"in window,ls=null;xn&&"documentMode"in document&&(ls=document.documentMode);var X0=xn&&"TextEvent"in window&&!ls,jm=xn&&(!qc||ls&&8<ls&&11>=ls),Uf=" ",zf=!1;function Bm(t,e){switch(t){case"keyup":return Y0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Um(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gr=!1;function J0(t,e){switch(t){case"compositionend":return Um(e);case"keypress":return e.which!==32?null:(zf=!0,Uf);case"textInput":return t=e.data,t===Uf&&zf?null:t;default:return null}}function Z0(t,e){if(Gr)return t==="compositionend"||!qc&&Bm(t,e)?(t=Fm(),Mo=Hc=Hn=null,Gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jm&&e.locale!=="ko"?null:e.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ew[t.type]:e==="textarea"}function zm(t,e,n,r){ym(r),e=ra(e,"onChange"),0<e.length&&(n=new $c("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var us=null,Ts=null;function tw(t){Jm(t,0)}function qa(t){var e=Qr(t);if(dm(e))return t}function nw(t,e){if(t==="change")return e}var Wm=!1;if(xn){var Ll;if(xn){var Fl="oninput"in document;if(!Fl){var Vf=document.createElement("div");Vf.setAttribute("oninput","return;"),Fl=typeof Vf.oninput=="function"}Ll=Fl}else Ll=!1;Wm=Ll&&(!document.documentMode||9<document.documentMode)}function Hf(){us&&(us.detachEvent("onpropertychange",Vm),Ts=us=null)}function Vm(t){if(t.propertyName==="value"&&qa(Ts)){var e=[];zm(e,Ts,t,Bc(t)),Sm(tw,e)}}function rw(t,e,n){t==="focusin"?(Hf(),us=e,Ts=n,us.attachEvent("onpropertychange",Vm)):t==="focusout"&&Hf()}function iw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qa(Ts)}function sw(t,e){if(t==="click")return qa(e)}function ow(t,e){if(t==="input"||t==="change")return qa(e)}function aw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:aw;function Is(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mu.call(e,i)||!Kt(t[i],e[i]))return!1}return!0}function $f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gf(t,e){var n=$f(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$f(n)}}function Hm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $m(){for(var t=window,e=Yo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yo(t.document)}return e}function Kc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lw(t){var e=$m(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hm(n.ownerDocument.documentElement,n)){if(r!==null&&Kc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gf(n,s);var o=Gf(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uw=xn&&"documentMode"in document&&11>=document.documentMode,qr=null,Du=null,cs=null,Mu=!1;function qf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||qr==null||qr!==Yo(r)||(r=qr,"selectionStart"in r&&Kc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cs&&Is(cs,r)||(cs=r,r=ra(Du,"onSelect"),0<r.length&&(e=new $c("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qr)))}function wo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kr={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},jl={},Gm={};xn&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function Ka(t){if(jl[t])return jl[t];if(!Kr[t])return t;var e=Kr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gm)return jl[t]=e[n];return t}var qm=Ka("animationend"),Km=Ka("animationiteration"),Qm=Ka("animationstart"),Ym=Ka("transitionend"),Xm=new Map,Kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,e){Xm.set(t,e),jr(e,[t])}for(var Bl=0;Bl<Kf.length;Bl++){var Ul=Kf[Bl],cw=Ul.toLowerCase(),dw=Ul[0].toUpperCase()+Ul.slice(1);cr(cw,"on"+dw)}cr(qm,"onAnimationEnd");cr(Km,"onAnimationIteration");cr(Qm,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(Ym,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function Qf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,c0(r,e,void 0,t),t.currentTarget=null}function Jm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Qf(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Qf(i,a,u),s=l}}}if(Jo)throw t=Ru,Jo=!1,Ru=null,t}function Se(t,e){var n=e[Uu];n===void 0&&(n=e[Uu]=new Set);var r=t+"__bubble";n.has(r)||(Zm(e,t,2,!1),n.add(r))}function zl(t,e,n){var r=0;e&&(r|=4),Zm(n,t,r,e)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Ns(t){if(!t[xo]){t[xo]=!0,om.forEach(function(n){n!=="selectionchange"&&(fw.has(n)||zl(n,!1,t),zl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xo]||(e[xo]=!0,zl("selectionchange",!1,e))}}function Zm(t,e,n,r){switch(Lm(e)){case 1:var i=k0;break;case 4:i=T0;break;default:i=Vc}n=i.bind(null,e,n,t),i=void 0,!Nu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Sm(function(){var u=s,h=Bc(n),p=[];e:{var f=Xm.get(t);if(f!==void 0){var w=$c,x=t;switch(t){case"keypress":if(Lo(n)===0)break e;case"keydown":case"keyup":w=W0;break;case"focusin":x="focus",w=Ml;break;case"focusout":x="blur",w=Ml;break;case"beforeblur":case"afterblur":w=Ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=R0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=$0;break;case qm:case Km:case Qm:w=O0;break;case Ym:w=q0;break;case"scroll":w=I0;break;case"wheel":w=Q0;break;case"copy":case"cut":case"paste":w=M0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Bf}var C=(e&4)!==0,A=!C&&t==="scroll",v=C?f!==null?f+"Capture":null:f;C=[];for(var m=u,_;m!==null;){_=m;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,v!==null&&(b=Cs(m,v),b!=null&&C.push(Rs(m,b,_)))),A)break;m=m.return}0<C.length&&(f=new w(f,x,null,n,h),p.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&n!==Tu&&(x=n.relatedTarget||n.fromElement)&&(wr(x)||x[Sn]))break e;if((w||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=u,x=x?wr(x):null,x!==null&&(A=Br(x),x!==A||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=u),w!==x)){if(C=Ff,b="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(C=Bf,b="onPointerLeave",v="onPointerEnter",m="pointer"),A=w==null?f:Qr(w),_=x==null?f:Qr(x),f=new C(b,m+"leave",w,n,h),f.target=A,f.relatedTarget=_,b=null,wr(h)===u&&(C=new C(v,m+"enter",x,n,h),C.target=_,C.relatedTarget=A,b=C),A=b,w&&x)t:{for(C=w,v=x,m=0,_=C;_;_=zr(_))m++;for(_=0,b=v;b;b=zr(b))_++;for(;0<m-_;)C=zr(C),m--;for(;0<_-m;)v=zr(v),_--;for(;m--;){if(C===v||v!==null&&C===v.alternate)break t;C=zr(C),v=zr(v)}C=null}else C=null;w!==null&&Yf(p,f,w,C,!1),x!==null&&A!==null&&Yf(p,A,x,C,!0)}}e:{if(f=u?Qr(u):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var L=nw;else if(Wf(f))if(Wm)L=ow;else{L=iw;var $=rw}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=sw);if(L&&(L=L(t,u))){zm(p,L,n,h);break e}$&&$(t,f,u),t==="focusout"&&($=f._wrapperState)&&$.controlled&&f.type==="number"&&Su(f,"number",f.value)}switch($=u?Qr(u):window,t){case"focusin":(Wf($)||$.contentEditable==="true")&&(qr=$,Du=u,cs=null);break;case"focusout":cs=Du=qr=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,qf(p,n,h);break;case"selectionchange":if(uw)break;case"keydown":case"keyup":qf(p,n,h)}var U;if(qc)e:{switch(t){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else Gr?Bm(t,n)&&(q="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(jm&&n.locale!=="ko"&&(Gr||q!=="onCompositionStart"?q==="onCompositionEnd"&&Gr&&(U=Fm()):(Hn=h,Hc="value"in Hn?Hn.value:Hn.textContent,Gr=!0)),$=ra(u,q),0<$.length&&(q=new jf(q,t,null,n,h),p.push({event:q,listeners:$}),U?q.data=U:(U=Um(n),U!==null&&(q.data=U)))),(U=X0?J0(t,n):Z0(t,n))&&(u=ra(u,"onBeforeInput"),0<u.length&&(h=new jf("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=U))}Jm(p,e)})}function Rs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ra(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cs(t,n),s!=null&&r.unshift(Rs(t,s,i)),s=Cs(t,e),s!=null&&r.push(Rs(t,s,i))),t=t.return}return r}function zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yf(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cs(n,s),l!=null&&o.unshift(Rs(n,l,a))):i||(l=Cs(n,s),l!=null&&o.push(Rs(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function Xf(t){return(typeof t=="string"?t:""+t).replace(hw,`
`).replace(pw,"")}function So(t,e,n){if(e=Xf(e),Xf(t)!==e&&n)throw Error(O(425))}function ia(){}var Lu=null,Fu=null;function ju(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bu=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(t){return Jf.resolve(null).then(t).catch(vw)}:Bu;function vw(t){setTimeout(function(){throw t})}function Vl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ks(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ks(e)}function Qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Di,Ps="__reactProps$"+Di,Sn="__reactContainer$"+Di,Uu="__reactEvents$"+Di,yw="__reactListeners$"+Di,_w="__reactHandles$"+Di;function wr(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zf(t);t!==null;){if(n=t[Zt])return n;t=Zf(t)}return e}t=n,n=t.parentNode}return null}function Xs(t){return t=t[Zt]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Qa(t){return t[Ps]||null}var zu=[],Yr=-1;function dr(t){return{current:t}}function Ee(t){0>Yr||(t.current=zu[Yr],zu[Yr]=null,Yr--)}function we(t,e){Yr++,zu[Yr]=t.current,t.current=e}var or={},rt=dr(or),pt=dr(!1),Tr=or;function wi(t,e){var n=t.type.contextTypes;if(!n)return or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mt(t){return t=t.childContextTypes,t!=null}function sa(){Ee(pt),Ee(rt)}function eh(t,e,n){if(rt.current!==or)throw Error(O(168));we(rt,e),we(pt,n)}function eg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,r0(t)||"Unknown",i));return Ne({},n,r)}function oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,Tr=rt.current,we(rt,t),we(pt,pt.current),!0}function th(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=eg(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=t,Ee(pt),Ee(rt),we(rt,t)):Ee(pt),we(pt,n)}var cn=null,Ya=!1,Hl=!1;function tg(t){cn===null?cn=[t]:cn.push(t)}function ww(t){Ya=!0,tg(t)}function fr(){if(!Hl&&cn!==null){Hl=!0;var t=0,e=ge;try{var n=cn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cn=null,Ya=!1}catch(i){throw cn!==null&&(cn=cn.slice(t+1)),km(Uc,fr),i}finally{ge=e,Hl=!1}}return null}var Xr=[],Jr=0,aa=null,la=0,Nt=[],Rt=0,Ir=null,fn=1,hn="";function gr(t,e){Xr[Jr++]=la,Xr[Jr++]=aa,aa=t,la=e}function ng(t,e,n){Nt[Rt++]=fn,Nt[Rt++]=hn,Nt[Rt++]=Ir,Ir=t;var r=fn;t=hn;var i=32-$t(r)-1;r&=~(1<<i),n+=1;var s=32-$t(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fn=1<<32-$t(e)+i|n<<i|r,hn=s+t}else fn=1<<s|n<<i|r,hn=t}function Qc(t){t.return!==null&&(gr(t,1),ng(t,1,0))}function Yc(t){for(;t===aa;)aa=Xr[--Jr],Xr[Jr]=null,la=Xr[--Jr],Xr[Jr]=null;for(;t===Ir;)Ir=Nt[--Rt],Nt[Rt]=null,hn=Nt[--Rt],Nt[Rt]=null,fn=Nt[--Rt],Nt[Rt]=null}var St=null,xt=null,ke=!1,zt=null;function rg(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,xt=Qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ir!==null?{id:fn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,xt=null,!0):!1;default:return!1}}function Wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vu(t){if(ke){var e=xt;if(e){var n=e;if(!nh(t,e)){if(Wu(t))throw Error(O(418));e=Qn(n.nextSibling);var r=St;e&&nh(t,e)?rg(r,n):(t.flags=t.flags&-4097|2,ke=!1,St=t)}}else{if(Wu(t))throw Error(O(418));t.flags=t.flags&-4097|2,ke=!1,St=t}}}function rh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function Co(t){if(t!==St)return!1;if(!ke)return rh(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ju(t.type,t.memoizedProps)),e&&(e=xt)){if(Wu(t))throw ig(),Error(O(418));for(;e;)rg(t,e),e=Qn(e.nextSibling)}if(rh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=Qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=St?Qn(t.stateNode.nextSibling):null;return!0}function ig(){for(var t=xt;t;)t=Qn(t.nextSibling)}function xi(){xt=St=null,ke=!1}function Xc(t){zt===null?zt=[t]:zt.push(t)}var xw=Rn.ReactCurrentBatchConfig;function Qi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Eo(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ih(t){var e=t._init;return e(t._payload)}function sg(t){function e(v,m){if(t){var _=v.deletions;_===null?(v.deletions=[m],v.flags|=16):_.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=Zn(v,m),v.index=0,v.sibling=null,v}function s(v,m,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<m?(v.flags|=2,m):_):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,m,_,b){return m===null||m.tag!==6?(m=Xl(_,v.mode,b),m.return=v,m):(m=i(m,_),m.return=v,m)}function l(v,m,_,b){var L=_.type;return L===$r?h(v,m,_.props.children,b,_.key):m!==null&&(m.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ln&&ih(L)===m.type)?(b=i(m,_.props),b.ref=Qi(v,m,_),b.return=v,b):(b=Vo(_.type,_.key,_.props,null,v.mode,b),b.ref=Qi(v,m,_),b.return=v,b)}function u(v,m,_,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=Jl(_,v.mode,b),m.return=v,m):(m=i(m,_.children||[]),m.return=v,m)}function h(v,m,_,b,L){return m===null||m.tag!==7?(m=kr(_,v.mode,b,L),m.return=v,m):(m=i(m,_),m.return=v,m)}function p(v,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Xl(""+m,v.mode,_),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ho:return _=Vo(m.type,m.key,m.props,null,v.mode,_),_.ref=Qi(v,null,m),_.return=v,_;case Hr:return m=Jl(m,v.mode,_),m.return=v,m;case Ln:var b=m._init;return p(v,b(m._payload),_)}if(rs(m)||Hi(m))return m=kr(m,v.mode,_,null),m.return=v,m;Eo(v,m)}return null}function f(v,m,_,b){var L=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return L!==null?null:a(v,m,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ho:return _.key===L?l(v,m,_,b):null;case Hr:return _.key===L?u(v,m,_,b):null;case Ln:return L=_._init,f(v,m,L(_._payload),b)}if(rs(_)||Hi(_))return L!==null?null:h(v,m,_,b,null);Eo(v,_)}return null}function w(v,m,_,b,L){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(_)||null,a(m,v,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ho:return v=v.get(b.key===null?_:b.key)||null,l(m,v,b,L);case Hr:return v=v.get(b.key===null?_:b.key)||null,u(m,v,b,L);case Ln:var $=b._init;return w(v,m,_,$(b._payload),L)}if(rs(b)||Hi(b))return v=v.get(_)||null,h(m,v,b,L,null);Eo(m,b)}return null}function x(v,m,_,b){for(var L=null,$=null,U=m,q=m=0,re=null;U!==null&&q<_.length;q++){U.index>q?(re=U,U=null):re=U.sibling;var ne=f(v,U,_[q],b);if(ne===null){U===null&&(U=re);break}t&&U&&ne.alternate===null&&e(v,U),m=s(ne,m,q),$===null?L=ne:$.sibling=ne,$=ne,U=re}if(q===_.length)return n(v,U),ke&&gr(v,q),L;if(U===null){for(;q<_.length;q++)U=p(v,_[q],b),U!==null&&(m=s(U,m,q),$===null?L=U:$.sibling=U,$=U);return ke&&gr(v,q),L}for(U=r(v,U);q<_.length;q++)re=w(U,v,q,_[q],b),re!==null&&(t&&re.alternate!==null&&U.delete(re.key===null?q:re.key),m=s(re,m,q),$===null?L=re:$.sibling=re,$=re);return t&&U.forEach(function(oe){return e(v,oe)}),ke&&gr(v,q),L}function C(v,m,_,b){var L=Hi(_);if(typeof L!="function")throw Error(O(150));if(_=L.call(_),_==null)throw Error(O(151));for(var $=L=null,U=m,q=m=0,re=null,ne=_.next();U!==null&&!ne.done;q++,ne=_.next()){U.index>q?(re=U,U=null):re=U.sibling;var oe=f(v,U,ne.value,b);if(oe===null){U===null&&(U=re);break}t&&U&&oe.alternate===null&&e(v,U),m=s(oe,m,q),$===null?L=oe:$.sibling=oe,$=oe,U=re}if(ne.done)return n(v,U),ke&&gr(v,q),L;if(U===null){for(;!ne.done;q++,ne=_.next())ne=p(v,ne.value,b),ne!==null&&(m=s(ne,m,q),$===null?L=ne:$.sibling=ne,$=ne);return ke&&gr(v,q),L}for(U=r(v,U);!ne.done;q++,ne=_.next())ne=w(U,v,q,ne.value,b),ne!==null&&(t&&ne.alternate!==null&&U.delete(ne.key===null?q:ne.key),m=s(ne,m,q),$===null?L=ne:$.sibling=ne,$=ne);return t&&U.forEach(function(xe){return e(v,xe)}),ke&&gr(v,q),L}function A(v,m,_,b){if(typeof _=="object"&&_!==null&&_.type===$r&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ho:e:{for(var L=_.key,$=m;$!==null;){if($.key===L){if(L=_.type,L===$r){if($.tag===7){n(v,$.sibling),m=i($,_.props.children),m.return=v,v=m;break e}}else if($.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ln&&ih(L)===$.type){n(v,$.sibling),m=i($,_.props),m.ref=Qi(v,$,_),m.return=v,v=m;break e}n(v,$);break}else e(v,$);$=$.sibling}_.type===$r?(m=kr(_.props.children,v.mode,b,_.key),m.return=v,v=m):(b=Vo(_.type,_.key,_.props,null,v.mode,b),b.ref=Qi(v,m,_),b.return=v,v=b)}return o(v);case Hr:e:{for($=_.key;m!==null;){if(m.key===$)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){n(v,m.sibling),m=i(m,_.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=Jl(_,v.mode,b),m.return=v,v=m}return o(v);case Ln:return $=_._init,A(v,m,$(_._payload),b)}if(rs(_))return x(v,m,_,b);if(Hi(_))return C(v,m,_,b);Eo(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(n(v,m.sibling),m=i(m,_),m.return=v,v=m):(n(v,m),m=Xl(_,v.mode,b),m.return=v,v=m),o(v)):n(v,m)}return A}var Si=sg(!0),og=sg(!1),ua=dr(null),ca=null,Zr=null,Jc=null;function Zc(){Jc=Zr=ca=null}function ed(t){var e=ua.current;Ee(ua),t._currentValue=e}function Hu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){ca=t,Jc=Zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if(Jc!==t)if(t={context:t,memoizedValue:e,next:null},Zr===null){if(ca===null)throw Error(O(308));Zr=t,ca.dependencies={lanes:0,firstContext:t}}else Zr=Zr.next=t;return e}var xr=null;function td(t){xr===null?xr=[t]:xr.push(t)}function ag(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,td(e)):(n.next=i.next,i.next=n),e.interleaved=n,Cn(t,r)}function Cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Cn(t,n)}return i=r.interleaved,i===null?(e.next=e,td(r)):(e.next=i.next,i.next=e),r.interleaved=e,Cn(t,n)}function Fo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zc(t,n)}}function sh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function da(t,e,n,r){var i=t.updateQueue;Fn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,w=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,C=a;switch(f=e,w=n,C.tag){case 1:if(x=C.payload,typeof x=="function"){p=x.call(w,p,f);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=C.payload,f=typeof x=="function"?x.call(w,p,f):x,f==null)break e;p=Ne({},p,f);break e;case 2:Fn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else w={eventTime:w,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=w,l=p):h=h.next=w,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rr|=o,t.lanes=o,t.memoizedState=p}}function oh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Js={},tn=dr(Js),As=dr(Js),Os=dr(Js);function Sr(t){if(t===Js)throw Error(O(174));return t}function rd(t,e){switch(we(Os,e),we(As,t),we(tn,Js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eu(e,t)}Ee(tn),we(tn,e)}function Ci(){Ee(tn),Ee(As),Ee(Os)}function ug(t){Sr(Os.current);var e=Sr(tn.current),n=Eu(e,t.type);e!==n&&(we(As,t),we(tn,n))}function id(t){As.current===t&&(Ee(tn),Ee(As))}var Te=dr(0);function fa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $l=[];function sd(){for(var t=0;t<$l.length;t++)$l[t]._workInProgressVersionPrimary=null;$l.length=0}var jo=Rn.ReactCurrentDispatcher,Gl=Rn.ReactCurrentBatchConfig,Nr=0,Ie=null,Fe=null,We=null,ha=!1,ds=!1,Ds=0,Sw=0;function Ze(){throw Error(O(321))}function od(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function ad(t,e,n,r,i,s){if(Nr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jo.current=t===null||t.memoizedState===null?kw:Tw,t=n(r,i),ds){s=0;do{if(ds=!1,Ds=0,25<=s)throw Error(O(301));s+=1,We=Fe=null,e.updateQueue=null,jo.current=Iw,t=n(r,i)}while(ds)}if(jo.current=pa,e=Fe!==null&&Fe.next!==null,Nr=0,We=Fe=Ie=null,ha=!1,e)throw Error(O(300));return t}function ld(){var t=Ds!==0;return Ds=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ie.memoizedState=We=t:We=We.next=t,We}function Dt(){if(Fe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=We===null?Ie.memoizedState:We.next;if(e!==null)We=e,Fe=t;else{if(t===null)throw Error(O(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},We===null?Ie.memoizedState=We=t:We=We.next=t}return We}function Ms(t,e){return typeof e=="function"?e(t):e}function ql(t){var e=Dt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Fe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Nr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Ie.lanes|=h,Rr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Kt(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,Rr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kl(t){var e=Dt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Kt(s,e.memoizedState)||(dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cg(){}function dg(t,e){var n=Ie,r=Dt(),i=e(),s=!Kt(r.memoizedState,i);if(s&&(r.memoizedState=i,dt=!0),r=r.queue,ud(pg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,Ls(9,hg.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(O(349));Nr&30||fg(n,e,i)}return i}function fg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hg(t,e,n,r){e.value=n,e.getSnapshot=r,mg(e)&&gg(t)}function pg(t,e,n){return n(function(){mg(e)&&gg(t)})}function mg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function gg(t){var e=Cn(t,1);e!==null&&Gt(e,t,1,-1)}function ah(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=bw.bind(null,Ie,t),[e.memoizedState,t]}function Ls(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vg(){return Dt().memoizedState}function Bo(t,e,n,r){var i=Jt();Ie.flags|=t,i.memoizedState=Ls(1|e,n,void 0,r===void 0?null:r)}function Xa(t,e,n,r){var i=Dt();r=r===void 0?null:r;var s=void 0;if(Fe!==null){var o=Fe.memoizedState;if(s=o.destroy,r!==null&&od(r,o.deps)){i.memoizedState=Ls(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=Ls(1|e,n,s,r)}function lh(t,e){return Bo(8390656,8,t,e)}function ud(t,e){return Xa(2048,8,t,e)}function yg(t,e){return Xa(4,2,t,e)}function _g(t,e){return Xa(4,4,t,e)}function wg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xg(t,e,n){return n=n!=null?n.concat([t]):null,Xa(4,4,wg.bind(null,e,t),n)}function cd(){}function Sg(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&od(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cg(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&od(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Eg(t,e,n){return Nr&21?(Kt(n,e)||(n=Nm(),Ie.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function Cw(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Gl.transition;Gl.transition={};try{t(!1),e()}finally{ge=n,Gl.transition=r}}function bg(){return Dt().memoizedState}function Ew(t,e,n){var r=Jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kg(t))Tg(e,n);else if(n=ag(t,e,n,r),n!==null){var i=ot();Gt(n,t,r,i),Ig(n,e,r)}}function bw(t,e,n){var r=Jn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kg(t))Tg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Kt(a,o)){var l=e.interleaved;l===null?(i.next=i,td(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ag(t,e,i,r),n!==null&&(i=ot(),Gt(n,t,r,i),Ig(n,e,r))}}function kg(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Tg(t,e){ds=ha=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ig(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zc(t,n)}}var pa={readContext:Ot,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},kw={readContext:Ot,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:lh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bo(4194308,4,wg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bo(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ew.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:ah,useDebugValue:cd,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=ah(!1),e=t[0];return t=Cw.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=Jt();if(ke){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),$e===null)throw Error(O(349));Nr&30||fg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,lh(pg.bind(null,r,s,t),[t]),r.flags|=2048,Ls(9,hg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jt(),e=$e.identifierPrefix;if(ke){var n=hn,r=fn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ds++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tw={readContext:Ot,useCallback:Sg,useContext:Ot,useEffect:ud,useImperativeHandle:xg,useInsertionEffect:yg,useLayoutEffect:_g,useMemo:Cg,useReducer:ql,useRef:vg,useState:function(){return ql(Ms)},useDebugValue:cd,useDeferredValue:function(t){var e=Dt();return Eg(e,Fe.memoizedState,t)},useTransition:function(){var t=ql(Ms)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:cg,useSyncExternalStore:dg,useId:bg,unstable_isNewReconciler:!1},Iw={readContext:Ot,useCallback:Sg,useContext:Ot,useEffect:ud,useImperativeHandle:xg,useInsertionEffect:yg,useLayoutEffect:_g,useMemo:Cg,useReducer:Kl,useRef:vg,useState:function(){return Kl(Ms)},useDebugValue:cd,useDeferredValue:function(t){var e=Dt();return Fe===null?e.memoizedState=t:Eg(e,Fe.memoizedState,t)},useTransition:function(){var t=Kl(Ms)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:cg,useSyncExternalStore:dg,useId:bg,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $u(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ja={isMounted:function(t){return(t=t._reactInternals)?Br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ot(),i=Jn(t),s=_n(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yn(t,s,i),e!==null&&(Gt(e,t,i,r),Fo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ot(),i=Jn(t),s=_n(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yn(t,s,i),e!==null&&(Gt(e,t,i,r),Fo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),r=Jn(t),i=_n(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yn(t,i,r),e!==null&&(Gt(e,t,r,n),Fo(e,t,r))}};function uh(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Is(n,r)||!Is(i,s):!0}function Ng(t,e,n){var r=!1,i=or,s=e.contextType;return typeof s=="object"&&s!==null?s=Ot(s):(i=mt(e)?Tr:rt.current,r=e.contextTypes,s=(r=r!=null)?wi(t,i):or),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ja,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ch(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ja.enqueueReplaceState(e,e.state,null)}function Gu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},nd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ot(s):(s=mt(e)?Tr:rt.current,i.context=wi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($u(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ja.enqueueReplaceState(i,i.state,null),da(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ei(t,e){try{var n="",r=e;do n+=n0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ql(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Nw=typeof WeakMap=="function"?WeakMap:Map;function Rg(t,e,n){n=_n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ga||(ga=!0,rc=r),qu(t,e)},n}function Pg(t,e,n){n=_n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qu(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Nw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Vw.bind(null,t,e,n),e.then(t,t))}function fh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_n(-1,1),e.tag=2,Yn(n,e,1))),n.lanes|=1),t)}var Rw=Rn.ReactCurrentOwner,dt=!1;function st(t,e,n,r){e.child=t===null?og(e,null,n,r):Si(e,t.child,n,r)}function ph(t,e,n,r,i){n=n.render;var s=e.ref;return ui(e,i),r=ad(t,e,n,r,s,i),n=ld(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(ke&&n&&Qc(e),e.flags|=1,st(t,e,r,i),e.child)}function mh(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ag(t,e,s,r,i)):(t=Vo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Is,n(o,r)&&t.ref===e.ref)return En(t,e,i)}return e.flags|=1,t=Zn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ag(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Is(s,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,En(t,e,i)}return Ku(t,e,n,r,i)}function Og(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(ti,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(ti,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(ti,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,we(ti,wt),wt|=r;return st(t,e,i,n),e.child}function Dg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ku(t,e,n,r,i){var s=mt(n)?Tr:rt.current;return s=wi(e,s),ui(e,i),n=ad(t,e,n,r,s,i),r=ld(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(ke&&r&&Qc(e),e.flags|=1,st(t,e,n,i),e.child)}function gh(t,e,n,r,i){if(mt(n)){var s=!0;oa(e)}else s=!1;if(ui(e,i),e.stateNode===null)Uo(t,e),Ng(e,n,r),Gu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=mt(n)?Tr:rt.current,u=wi(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ch(e,o,r,u),Fn=!1;var f=e.memoizedState;o.state=f,da(e,r,o,i),l=e.memoizedState,a!==r||f!==l||pt.current||Fn?(typeof h=="function"&&($u(e,n,h,r),l=e.memoizedState),(a=Fn||uh(e,n,a,r,f,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Bt(e.type,a),o.props=u,p=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ot(l):(l=mt(n)?Tr:rt.current,l=wi(e,l));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==l)&&ch(e,o,r,l),Fn=!1,f=e.memoizedState,o.state=f,da(e,r,o,i);var x=e.memoizedState;a!==p||f!==x||pt.current||Fn?(typeof w=="function"&&($u(e,n,w,r),x=e.memoizedState),(u=Fn||uh(e,n,u,r,f,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Qu(t,e,n,r,s,i)}function Qu(t,e,n,r,i,s){Dg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&th(e,n,!1),En(t,e,s);r=e.stateNode,Rw.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Si(e,t.child,null,s),e.child=Si(e,null,a,s)):st(t,e,a,s),e.memoizedState=r.state,i&&th(e,n,!0),e.child}function Mg(t){var e=t.stateNode;e.pendingContext?eh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eh(t,e.context,!1),rd(t,e.containerInfo)}function vh(t,e,n,r,i){return xi(),Xc(i),e.flags|=256,st(t,e,n,r),e.child}var Yu={dehydrated:null,treeContext:null,retryLane:0};function Xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lg(t,e,n){var r=e.pendingProps,i=Te.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),we(Te,i&1),t===null)return Vu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tl(o,r,0,null),t=kr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xu(n),e.memoizedState=Yu,t):dd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Pw(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zn(a,s):(s=kr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yu,r}return s=t.child,t=s.sibling,r=Zn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dd(t,e){return e=tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bo(t,e,n,r){return r!==null&&Xc(r),Si(e,t.child,null,n),t=dd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pw(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ql(Error(O(422))),bo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tl({mode:"visible",children:r.children},i,0,null),s=kr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Si(e,t.child,null,o),e.child.memoizedState=Xu(o),e.memoizedState=Yu,s);if(!(e.mode&1))return bo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(O(419)),r=Ql(s,r,void 0),bo(t,e,o,r)}if(a=(o&t.childLanes)!==0,dt||a){if(r=$e,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cn(t,i),Gt(r,t,i,-1))}return vd(),r=Ql(Error(O(421))),bo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xt=Qn(i.nextSibling),St=e,ke=!0,zt=null,t!==null&&(Nt[Rt++]=fn,Nt[Rt++]=hn,Nt[Rt++]=Ir,fn=t.id,hn=t.overflow,Ir=e),e=dd(e,r.children),e.flags|=4096,e)}function yh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hu(t.return,e,n)}function Yl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Fg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(st(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yh(t,n,e);else if(t.tag===19)yh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yl(e,!0,n,null,s);break;case"together":Yl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Aw(t,e,n){switch(e.tag){case 3:Mg(e),xi();break;case 5:ug(e);break;case 1:mt(e.type)&&oa(e);break;case 4:rd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;we(ua,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Lg(t,e,n):(we(Te,Te.current&1),t=En(t,e,n),t!==null?t.sibling:null);we(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Fg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Og(t,e,n)}return En(t,e,n)}var jg,Ju,Bg,Ug;jg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ju=function(){};Bg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sr(tn.current);var s=null;switch(n){case"input":i=wu(t,i),r=wu(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=Cu(t,i),r=Cu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ia)}bu(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Ug=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yi(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ow(t,e,n){var r=e.pendingProps;switch(Yc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return mt(e.type)&&sa(),et(e),null;case 3:return r=e.stateNode,Ci(),Ee(pt),Ee(rt),sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Co(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(oc(zt),zt=null))),Ju(t,e),et(e),null;case 5:id(e);var i=Sr(Os.current);if(n=e.type,t!==null&&e.stateNode!=null)Bg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return et(e),null}if(t=Sr(tn.current),Co(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zt]=e,r[Ps]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ss.length;i++)Se(ss[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Tf(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Nf(r,s),Se("invalid",r)}bu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&So(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&So(r.textContent,a,t),i=["children",""+a]):xs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":po(r),If(r,s,!0);break;case"textarea":po(r),Rf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ia)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zt]=e,t[Ps]=r,jg(t,e,!1,!1),e.stateNode=t;e:{switch(o=ku(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<ss.length;i++)Se(ss[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Tf(t,r),i=wu(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Nf(t,r),i=Cu(t,r),Se("invalid",t);break;default:i=r}bu(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?vm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mm(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ss(t,l):typeof l=="number"&&Ss(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&Mc(t,s,l,o))}switch(n){case"input":po(t),If(t,r,!1);break;case"textarea":po(t),Rf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?si(t,!!r.multiple,s,!1):r.defaultValue!=null&&si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)Ug(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Sr(Os.current),Sr(tn.current),Co(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zt]=e,(s=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:So(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&So(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return et(e),null;case 13:if(Ee(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&xt!==null&&e.mode&1&&!(e.flags&128))ig(),xi(),e.flags|=98560,s=!1;else if(s=Co(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Zt]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),s=!1}else zt!==null&&(oc(zt),zt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Be===0&&(Be=3):vd())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return Ci(),Ju(t,e),t===null&&Ns(e.stateNode.containerInfo),et(e),null;case 10:return ed(e.type._context),et(e),null;case 17:return mt(e.type)&&sa(),et(e),null;case 19:if(Ee(Te),s=e.memoizedState,s===null)return et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yi(s,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fa(t),o!==null){for(e.flags|=128,Yi(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Te,Te.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>bi&&(e.flags|=128,r=!0,Yi(s,!1),e.lanes=4194304)}else{if(!r)if(t=fa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ke)return et(e),null}else 2*Oe()-s.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,Yi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=Te.current,we(Te,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return gd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function Dw(t,e){switch(Yc(e),e.tag){case 1:return mt(e.type)&&sa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ci(),Ee(pt),Ee(rt),sd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return id(e),null;case 13:if(Ee(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Te),null;case 4:return Ci(),null;case 10:return ed(e.type._context),null;case 22:case 23:return gd(),null;case 24:return null;default:return null}}var ko=!1,tt=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,K=null;function ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Zu(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var _h=!1;function Lw(t,e){if(Lu=ta,t=$m(),Kc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,p=t,f=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)f=p,p=w;for(;;){if(p===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++h===r&&(l=o),(w=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fu={focusedElem:t,selectionRange:n},ta=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var C=x.memoizedProps,A=x.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?C:Bt(e.type,C),A);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(b){Pe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return x=_h,_h=!1,x}function fs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zu(e,n,s)}i=i.next}while(i!==r)}}function Za(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ec(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zg(t){var e=t.alternate;e!==null&&(t.alternate=null,zg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[Ps],delete e[Uu],delete e[yw],delete e[_w])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wg(t){return t.tag===5||t.tag===3||t.tag===4}function wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ia));else if(r!==4&&(t=t.child,t!==null))for(tc(t,e,n),t=t.sibling;t!==null;)tc(t,e,n),t=t.sibling}function nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nc(t,e,n),t=t.sibling;t!==null;)nc(t,e,n),t=t.sibling}var qe=null,Ut=!1;function Dn(t,e,n){for(n=n.child;n!==null;)Vg(t,e,n),n=n.sibling}function Vg(t,e,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount($a,n)}catch{}switch(n.tag){case 5:tt||ei(n,e);case 6:var r=qe,i=Ut;qe=null,Dn(t,e,n),qe=r,Ut=i,qe!==null&&(Ut?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Ut?(t=qe,n=n.stateNode,t.nodeType===8?Vl(t.parentNode,n):t.nodeType===1&&Vl(t,n),ks(t)):Vl(qe,n.stateNode));break;case 4:r=qe,i=Ut,qe=n.stateNode.containerInfo,Ut=!0,Dn(t,e,n),qe=r,Ut=i;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zu(n,e,o),i=i.next}while(i!==r)}Dn(t,e,n);break;case 1:if(!tt&&(ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,e,a)}Dn(t,e,n);break;case 21:Dn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Dn(t,e,n),tt=r):Dn(t,e,n);break;default:Dn(t,e,n)}}function xh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Mw),e.forEach(function(r){var i=$w.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qe=a.stateNode,Ut=!1;break e;case 3:qe=a.stateNode.containerInfo,Ut=!0;break e;case 4:qe=a.stateNode.containerInfo,Ut=!0;break e}a=a.return}if(qe===null)throw Error(O(160));Vg(s,o,i),qe=null,Ut=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hg(e,t),e=e.sibling}function Hg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(e,t),Xt(t),r&4){try{fs(3,t,t.return),Za(3,t)}catch(C){Pe(t,t.return,C)}try{fs(5,t,t.return)}catch(C){Pe(t,t.return,C)}}break;case 1:jt(e,t),Xt(t),r&512&&n!==null&&ei(n,n.return);break;case 5:if(jt(e,t),Xt(t),r&512&&n!==null&&ei(n,n.return),t.flags&32){var i=t.stateNode;try{Ss(i,"")}catch(C){Pe(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fm(i,s),ku(a,o);var u=ku(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?vm(i,p):h==="dangerouslySetInnerHTML"?mm(i,p):h==="children"?Ss(i,p):Mc(i,h,p,u)}switch(a){case"input":xu(i,s);break;case"textarea":hm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?si(i,!!s.multiple,w,!1):f!==!!s.multiple&&(s.defaultValue!=null?si(i,!!s.multiple,s.defaultValue,!0):si(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ps]=s}catch(C){Pe(t,t.return,C)}}break;case 6:if(jt(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Pe(t,t.return,C)}}break;case 3:if(jt(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ks(e.containerInfo)}catch(C){Pe(t,t.return,C)}break;case 4:jt(e,t),Xt(t);break;case 13:jt(e,t),Xt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pd=Oe())),r&4&&xh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(u=tt)||h,jt(e,t),tt=u):jt(e,t),Xt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(p=K=h;K!==null;){switch(f=K,w=f.child,f.tag){case 0:case 11:case 14:case 15:fs(4,f,f.return);break;case 1:ei(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(C){Pe(r,n,C)}}break;case 5:ei(f,f.return);break;case 22:if(f.memoizedState!==null){Ch(p);continue}}w!==null?(w.return=f,K=w):Ch(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gm("display",o))}catch(C){Pe(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(C){Pe(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:jt(e,t),Xt(t),r&4&&xh(t);break;case 21:break;default:jt(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wg(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ss(i,""),r.flags&=-33);var s=wh(t);nc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wh(t);tc(t,a,o);break;default:throw Error(O(161))}}catch(l){Pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Fw(t,e,n){K=t,$g(t)}function $g(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ko;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||tt;a=ko;var u=tt;if(ko=o,(tt=l)&&!u)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Eh(i):l!==null?(l.return=o,K=l):Eh(i);for(;s!==null;)K=s,$g(s),s=s.sibling;K=i,ko=a,tt=u}Sh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Sh(t)}}function Sh(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||Za(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&oh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}oh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ks(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}tt||e.flags&512&&ec(e)}catch(f){Pe(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Ch(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Eh(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Za(4,e)}catch(l){Pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Pe(e,i,l)}}var s=e.return;try{ec(e)}catch(l){Pe(e,s,l)}break;case 5:var o=e.return;try{ec(e)}catch(l){Pe(e,o,l)}}}catch(l){Pe(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var jw=Math.ceil,ma=Rn.ReactCurrentDispatcher,fd=Rn.ReactCurrentOwner,At=Rn.ReactCurrentBatchConfig,pe=0,$e=null,De=null,Qe=0,wt=0,ti=dr(0),Be=0,Fs=null,Rr=0,el=0,hd=0,hs=null,ct=null,pd=0,bi=1/0,un=null,ga=!1,rc=null,Xn=null,To=!1,$n=null,va=0,ps=0,ic=null,zo=-1,Wo=0;function ot(){return pe&6?Oe():zo!==-1?zo:zo=Oe()}function Jn(t){return t.mode&1?pe&2&&Qe!==0?Qe&-Qe:xw.transition!==null?(Wo===0&&(Wo=Nm()),Wo):(t=ge,t!==0||(t=window.event,t=t===void 0?16:Lm(t.type)),t):1}function Gt(t,e,n,r){if(50<ps)throw ps=0,ic=null,Error(O(185));Qs(t,n,r),(!(pe&2)||t!==$e)&&(t===$e&&(!(pe&2)&&(el|=n),Be===4&&Bn(t,Qe)),gt(t,r),n===1&&pe===0&&!(e.mode&1)&&(bi=Oe()+500,Ya&&fr()))}function gt(t,e){var n=t.callbackNode;x0(t,e);var r=ea(t,t===$e?Qe:0);if(r===0)n!==null&&Of(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Of(n),e===1)t.tag===0?ww(bh.bind(null,t)):tg(bh.bind(null,t)),gw(function(){!(pe&6)&&fr()}),n=null;else{switch(Rm(r)){case 1:n=Uc;break;case 4:n=Tm;break;case 16:n=Zo;break;case 536870912:n=Im;break;default:n=Zo}n=Zg(n,Gg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gg(t,e){if(zo=-1,Wo=0,pe&6)throw Error(O(327));var n=t.callbackNode;if(ci()&&t.callbackNode!==n)return null;var r=ea(t,t===$e?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ya(t,r);else{e=r;var i=pe;pe|=2;var s=Kg();($e!==t||Qe!==e)&&(un=null,bi=Oe()+500,br(t,e));do try{zw();break}catch(a){qg(t,a)}while(!0);Zc(),ma.current=s,pe=i,De!==null?e=0:($e=null,Qe=0,e=Be)}if(e!==0){if(e===2&&(i=Pu(t),i!==0&&(r=i,e=sc(t,i))),e===1)throw n=Fs,br(t,0),Bn(t,r),gt(t,Oe()),n;if(e===6)Bn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Bw(i)&&(e=ya(t,r),e===2&&(s=Pu(t),s!==0&&(r=s,e=sc(t,s))),e===1))throw n=Fs,br(t,0),Bn(t,r),gt(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:vr(t,ct,un);break;case 3:if(Bn(t,r),(r&130023424)===r&&(e=pd+500-Oe(),10<e)){if(ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bu(vr.bind(null,t,ct,un),e);break}vr(t,ct,un);break;case 4:if(Bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-$t(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jw(r/1960))-r,10<r){t.timeoutHandle=Bu(vr.bind(null,t,ct,un),r);break}vr(t,ct,un);break;case 5:vr(t,ct,un);break;default:throw Error(O(329))}}}return gt(t,Oe()),t.callbackNode===n?Gg.bind(null,t):null}function sc(t,e){var n=hs;return t.current.memoizedState.isDehydrated&&(br(t,e).flags|=256),t=ya(t,e),t!==2&&(e=ct,ct=n,e!==null&&oc(e)),t}function oc(t){ct===null?ct=t:ct.push.apply(ct,t)}function Bw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bn(t,e){for(e&=~hd,e&=~el,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),r=1<<n;t[n]=-1,e&=~r}}function bh(t){if(pe&6)throw Error(O(327));ci();var e=ea(t,0);if(!(e&1))return gt(t,Oe()),null;var n=ya(t,e);if(t.tag!==0&&n===2){var r=Pu(t);r!==0&&(e=r,n=sc(t,r))}if(n===1)throw n=Fs,br(t,0),Bn(t,e),gt(t,Oe()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,ct,un),gt(t,Oe()),null}function md(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(bi=Oe()+500,Ya&&fr())}}function Pr(t){$n!==null&&$n.tag===0&&!(pe&6)&&ci();var e=pe;pe|=1;var n=At.transition,r=ge;try{if(At.transition=null,ge=1,t)return t()}finally{ge=r,At.transition=n,pe=e,!(pe&6)&&fr()}}function gd(){wt=ti.current,Ee(ti)}function br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mw(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(Yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sa();break;case 3:Ci(),Ee(pt),Ee(rt),sd();break;case 5:id(r);break;case 4:Ci();break;case 13:Ee(Te);break;case 19:Ee(Te);break;case 10:ed(r.type._context);break;case 22:case 23:gd()}n=n.return}if($e=t,De=t=Zn(t.current,null),Qe=wt=e,Be=0,Fs=null,hd=el=Rr=0,ct=hs=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xr=null}return t}function qg(t,e){do{var n=De;try{if(Zc(),jo.current=pa,ha){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ha=!1}if(Nr=0,We=Fe=Ie=null,ds=!1,Ds=0,fd.current=null,n===null||n.return===null){Be=1,Fs=e,De=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=fh(o);if(w!==null){w.flags&=-257,hh(w,o,a,s,e),w.mode&1&&dh(s,u,e),e=w,l=u;var x=e.updateQueue;if(x===null){var C=new Set;C.add(l),e.updateQueue=C}else x.add(l);break e}else{if(!(e&1)){dh(s,u,e),vd();break e}l=Error(O(426))}}else if(ke&&a.mode&1){var A=fh(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),hh(A,o,a,s,e),Xc(Ei(l,a));break e}}s=l=Ei(l,a),Be!==4&&(Be=2),hs===null?hs=[s]:hs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Rg(s,l,e);sh(s,v);break e;case 1:a=l;var m=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Xn===null||!Xn.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Pg(s,a,e);sh(s,b);break e}}s=s.return}while(s!==null)}Yg(n)}catch(L){e=L,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Kg(){var t=ma.current;return ma.current=pa,t===null?pa:t}function vd(){(Be===0||Be===3||Be===2)&&(Be=4),$e===null||!(Rr&268435455)&&!(el&268435455)||Bn($e,Qe)}function ya(t,e){var n=pe;pe|=2;var r=Kg();($e!==t||Qe!==e)&&(un=null,br(t,e));do try{Uw();break}catch(i){qg(t,i)}while(!0);if(Zc(),pe=n,ma.current=r,De!==null)throw Error(O(261));return $e=null,Qe=0,Be}function Uw(){for(;De!==null;)Qg(De)}function zw(){for(;De!==null&&!f0();)Qg(De)}function Qg(t){var e=Jg(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?Yg(t):De=e,fd.current=null}function Yg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Dw(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,De=null;return}}else if(n=Ow(n,e,wt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Be===0&&(Be=5)}function vr(t,e,n){var r=ge,i=At.transition;try{At.transition=null,ge=1,Ww(t,e,n,r)}finally{At.transition=i,ge=r}return null}function Ww(t,e,n,r){do ci();while($n!==null);if(pe&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(S0(t,s),t===$e&&(De=$e=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||To||(To=!0,Zg(Zo,function(){return ci(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=At.transition,At.transition=null;var o=ge;ge=1;var a=pe;pe|=4,fd.current=null,Lw(t,n),Hg(n,t),lw(Fu),ta=!!Lu,Fu=Lu=null,t.current=n,Fw(n),h0(),pe=a,ge=o,At.transition=s}else t.current=n;if(To&&(To=!1,$n=t,va=i),s=t.pendingLanes,s===0&&(Xn=null),g0(n.stateNode),gt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ga)throw ga=!1,t=rc,rc=null,t;return va&1&&t.tag!==0&&ci(),s=t.pendingLanes,s&1?t===ic?ps++:(ps=0,ic=t):ps=0,fr(),null}function ci(){if($n!==null){var t=Rm(va),e=At.transition,n=ge;try{if(At.transition=null,ge=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,va=0,pe&6)throw Error(O(331));var i=pe;for(pe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:fs(8,h,s)}var p=h.child;if(p!==null)p.return=h,K=p;else for(;K!==null;){h=K;var f=h.sibling,w=h.return;if(zg(h),h===u){K=null;break}if(f!==null){f.return=w,K=f;break}K=w}}}var x=s.alternate;if(x!==null){var C=x.child;if(C!==null){x.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fs(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,K=v;break e}K=s.return}}var m=t.current;for(K=m;K!==null;){o=K;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,K=_;else e:for(o=m;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Za(9,a)}}catch(L){Pe(a,a.return,L)}if(a===o){K=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,K=b;break e}K=a.return}}if(pe=i,fr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot($a,t)}catch{}r=!0}return r}finally{ge=n,At.transition=e}}return!1}function kh(t,e,n){e=Ei(n,e),e=Rg(t,e,1),t=Yn(t,e,1),e=ot(),t!==null&&(Qs(t,1,e),gt(t,e))}function Pe(t,e,n){if(t.tag===3)kh(t,t,n);else for(;e!==null;){if(e.tag===3){kh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=Ei(n,t),t=Pg(e,t,1),e=Yn(e,t,1),t=ot(),e!==null&&(Qs(e,1,t),gt(e,t));break}}e=e.return}}function Vw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Qe&n)===n&&(Be===4||Be===3&&(Qe&130023424)===Qe&&500>Oe()-pd?br(t,0):hd|=n),gt(t,e)}function Xg(t,e){e===0&&(t.mode&1?(e=vo,vo<<=1,!(vo&130023424)&&(vo=4194304)):e=1);var n=ot();t=Cn(t,e),t!==null&&(Qs(t,e,n),gt(t,n))}function Hw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xg(t,n)}function $w(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),Xg(t,n)}var Jg;Jg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,Aw(t,e,n);dt=!!(t.flags&131072)}else dt=!1,ke&&e.flags&1048576&&ng(e,la,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uo(t,e),t=e.pendingProps;var i=wi(e,rt.current);ui(e,n),i=ad(null,e,r,t,i,n);var s=ld();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(s=!0,oa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nd(e),i.updater=Ja,e.stateNode=i,i._reactInternals=e,Gu(e,r,t,n),e=Qu(null,e,r,!0,s,n)):(e.tag=0,ke&&s&&Qc(e),st(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qw(r),t=Bt(r,t),i){case 0:e=Ku(null,e,r,t,n);break e;case 1:e=gh(null,e,r,t,n);break e;case 11:e=ph(null,e,r,t,n);break e;case 14:e=mh(null,e,r,Bt(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Ku(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),gh(t,e,r,i,n);case 3:e:{if(Mg(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,lg(t,e),da(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ei(Error(O(423)),e),e=vh(t,e,r,n,i);break e}else if(r!==i){i=Ei(Error(O(424)),e),e=vh(t,e,r,n,i);break e}else for(xt=Qn(e.stateNode.containerInfo.firstChild),St=e,ke=!0,zt=null,n=og(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),r===i){e=En(t,e,n);break e}st(t,e,r,n)}e=e.child}return e;case 5:return ug(e),t===null&&Vu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ju(r,i)?o=null:s!==null&&ju(r,s)&&(e.flags|=32),Dg(t,e),st(t,e,o,n),e.child;case 6:return t===null&&Vu(e),null;case 13:return Lg(t,e,n);case 4:return rd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Si(e,null,r,n):st(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),ph(t,e,r,i,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,we(ua,r._currentValue),r._currentValue=o,s!==null)if(Kt(s.value,o)){if(s.children===i.children&&!pt.current){e=En(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=_n(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Hu(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}st(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ui(e,n),i=Ot(i),r=r(i),e.flags|=1,st(t,e,r,n),e.child;case 14:return r=e.type,i=Bt(r,e.pendingProps),i=Bt(r.type,i),mh(t,e,r,i,n);case 15:return Ag(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Uo(t,e),e.tag=1,mt(r)?(t=!0,oa(e)):t=!1,ui(e,n),Ng(e,r,i),Gu(e,r,i,n),Qu(null,e,r,!0,t,n);case 19:return Fg(t,e,n);case 22:return Og(t,e,n)}throw Error(O(156,e.tag))};function Zg(t,e){return km(t,e)}function Gw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new Gw(t,e,n,r)}function yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qw(t){if(typeof t=="function")return yd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fc)return 11;if(t===jc)return 14}return 2}function Zn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vo(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $r:return kr(n.children,i,s,e);case Lc:o=8,i|=8;break;case gu:return t=Pt(12,n,e,i|2),t.elementType=gu,t.lanes=s,t;case vu:return t=Pt(13,n,e,i),t.elementType=vu,t.lanes=s,t;case yu:return t=Pt(19,n,e,i),t.elementType=yu,t.lanes=s,t;case um:return tl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case am:o=10;break e;case lm:o=9;break e;case Fc:o=11;break e;case jc:o=14;break e;case Ln:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Pt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function kr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function tl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=um,t.lanes=n,t.stateNode={isHidden:!1},t}function Xl(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Jl(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Al(0),this.expirationTimes=Al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Al(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _d(t,e,n,r,i,s,o,a,l){return t=new Kw(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nd(s),t}function Qw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ev(t){if(!t)return or;t=t._reactInternals;e:{if(Br(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(mt(n))return eg(t,n,e)}return e}function tv(t,e,n,r,i,s,o,a,l){return t=_d(n,r,!0,t,i,s,o,a,l),t.context=ev(null),n=t.current,r=ot(),i=Jn(n),s=_n(r,i),s.callback=e??null,Yn(n,s,i),t.current.lanes=i,Qs(t,i,r),gt(t,r),t}function nl(t,e,n,r){var i=e.current,s=ot(),o=Jn(i);return n=ev(n),e.context===null?e.context=n:e.pendingContext=n,e=_n(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yn(i,e,o),t!==null&&(Gt(t,i,o,s),Fo(t,i,o)),o}function _a(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Th(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wd(t,e){Th(t,e),(t=t.alternate)&&Th(t,e)}function Yw(){return null}var nv=typeof reportError=="function"?reportError:function(t){console.error(t)};function xd(t){this._internalRoot=t}rl.prototype.render=xd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));nl(t,e,null,null)};rl.prototype.unmount=xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){nl(null,t,null,null)}),e[Sn]=null}};function rl(t){this._internalRoot=t}rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Om();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jn.length&&e!==0&&e<jn[n].priority;n++);jn.splice(n,0,t),n===0&&Mm(t)}};function Sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ih(){}function Xw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_a(o);s.call(u)}}var o=tv(e,r,t,0,null,!1,!1,"",Ih);return t._reactRootContainer=o,t[Sn]=o.current,Ns(t.nodeType===8?t.parentNode:t),Pr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=_a(l);a.call(u)}}var l=_d(t,0,!1,null,null,!1,!1,"",Ih);return t._reactRootContainer=l,t[Sn]=l.current,Ns(t.nodeType===8?t.parentNode:t),Pr(function(){nl(e,l,n,r)}),l}function sl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_a(o);a.call(l)}}nl(e,o,t,i)}else o=Xw(n,e,t,i,r);return _a(o)}Pm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=is(e.pendingLanes);n!==0&&(zc(e,n|1),gt(e,Oe()),!(pe&6)&&(bi=Oe()+500,fr()))}break;case 13:Pr(function(){var r=Cn(t,1);if(r!==null){var i=ot();Gt(r,t,1,i)}}),wd(t,1)}};Wc=function(t){if(t.tag===13){var e=Cn(t,134217728);if(e!==null){var n=ot();Gt(e,t,134217728,n)}wd(t,134217728)}};Am=function(t){if(t.tag===13){var e=Jn(t),n=Cn(t,e);if(n!==null){var r=ot();Gt(n,t,e,r)}wd(t,e)}};Om=function(){return ge};Dm=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Iu=function(t,e,n){switch(e){case"input":if(xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qa(r);if(!i)throw Error(O(90));dm(r),xu(r,i)}}}break;case"textarea":hm(t,n);break;case"select":e=n.value,e!=null&&si(t,!!n.multiple,e,!1)}};wm=md;xm=Pr;var Jw={usingClientEntryPoint:!1,Events:[Xs,Qr,Qa,ym,_m,md]},Xi={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zw={bundleType:Xi.bundleType,version:Xi.version,rendererPackageName:Xi.rendererPackageName,rendererConfig:Xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Em(t),t===null?null:t.stateNode},findFiberByHostInstance:Xi.findFiberByHostInstance||Yw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{$a=Io.inject(Zw),en=Io}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jw;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(e))throw Error(O(200));return Qw(t,e,null,n)};Et.createRoot=function(t,e){if(!Sd(t))throw Error(O(299));var n=!1,r="",i=nv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_d(t,1,!1,null,null,n,!1,r,i),t[Sn]=e.current,Ns(t.nodeType===8?t.parentNode:t),new xd(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Em(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Pr(t)};Et.hydrate=function(t,e,n){if(!il(e))throw Error(O(200));return sl(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!Sd(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tv(e,null,t,1,n??null,i,!1,s,o),t[Sn]=e.current,Ns(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rl(e)};Et.render=function(t,e,n){if(!il(e))throw Error(O(200));return sl(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!il(t))throw Error(O(40));return t._reactRootContainer?(Pr(function(){sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};Et.unstable_batchedUpdates=md;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!il(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return sl(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rv)}catch(t){console.error(t)}}rv(),rm.exports=Et;var e1=rm.exports,Nh=e1;pu.createRoot=Nh.createRoot,pu.hydrateRoot=Nh.hydrateRoot;var Rh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=function(t,e){if(!t)throw Mi(e)},Mi=function(t){return new Error("Firebase Database ("+iv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},t1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Cd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,w=u&63;l||(w=64,o||(f=64)),r.push(n[h],n[p],n[f],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new n1;const f=s<<2|a>>4;if(r.push(f),u!==64){const w=a<<4&240|u>>2;if(r.push(w),p!==64){const x=u<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ov=function(t){const e=sv(t);return Cd.encodeByteArray(e,!0)},wa=function(t){return ov(t).replace(/\./g,"")},xa=function(t){try{return Cd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){return av(void 0,t)}function av(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!i1(n)||(t[n]=av(t[n],e[n]));return t}function i1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=()=>s1().__FIREBASE_DEFAULTS__,a1=()=>{if(typeof process>"u"||typeof Rh>"u")return;const t=Rh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xa(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return o1()||a1()||l1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lv=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},u1=t=>{const e=lv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uv=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},cv=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wa(JSON.stringify(n)),wa(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function d1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function f1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h1(){const t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function p1(){return iv.NODE_ADMIN===!0}function m1(){try{return typeof indexedDB=="object"}catch{return!1}}function g1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=v1,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?y1(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hr(i,a,r)}}function y1(t,e){return t.replace(_1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){return JSON.parse(t)}function He(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=js(xa(s[0])||""),n=js(xa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},w1=function(t){const e=fv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},x1=function(t){const e=fv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ki(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ac(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sa(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ca(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ph(s)&&Ph(o)){if(!Ca(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ph(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const f=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let p=0;p<80;p++){p<40?p<20?(u=a^s&(o^a),h=1518500249):(u=s^o^a,h=1859775393):p<60?(u=s&o|a&(s|o),h=2400959708):(u=s^o^a,h=3395469782);const f=(i<<5|i>>>27)+u+l+h+r[p]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function C1(t,e){const n=new E1(t,e);return n.subscribe.bind(n)}class E1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zl),i.error===void 0&&(i.error=Zl),i.complete===void 0&&(i.complete=Zl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zl(){}function kd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,M(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},al=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ol;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N1(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:I1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I1(t){return t===yr?void 0:t}function N1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const P1={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},A1=ve.INFO,O1={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},D1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=O1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Td{constructor(e){this.name=e,this._logLevel=A1,this._logHandler=D1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const M1=(t,e)=>e.some(n=>t instanceof n);let Ah,Oh;function L1(){return Ah||(Ah=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F1(){return Oh||(Oh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hv=new WeakMap,lc=new WeakMap,pv=new WeakMap,eu=new WeakMap,Id=new WeakMap;function j1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(er(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hv.set(n,t)}).catch(()=>{}),Id.set(e,t),e}function B1(t){if(lc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lc.set(t,e)}let uc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U1(t){uc=t(uc)}function z1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tu(this),e,...n);return pv.set(r,e.sort?e.sort():[e]),er(r)}:F1().includes(t)?function(...e){return t.apply(tu(this),e),er(hv.get(this))}:function(...e){return er(t.apply(tu(this),e))}}function W1(t){return typeof t=="function"?z1(t):(t instanceof IDBTransaction&&B1(t),M1(t,L1())?new Proxy(t,uc):t)}function er(t){if(t instanceof IDBRequest)return j1(t);if(eu.has(t))return eu.get(t);const e=W1(t);return e!==t&&(eu.set(t,e),Id.set(e,t)),e}const tu=t=>Id.get(t);function V1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=er(o);return r&&o.addEventListener("upgradeneeded",l=>{r(er(o.result),l.oldVersion,l.newVersion,er(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const H1=["get","getKey","getAll","getAllKeys","count"],$1=["put","add","delete","clear"],nu=new Map;function Dh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nu.get(e))return nu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||H1.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return nu.set(e,s),s}U1(t=>({...t,get:(e,n,r)=>Dh(e,n)||t.get(e,n,r),has:(e,n)=>!!Dh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cc="@firebase/app",Mh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new Td("@firebase/app"),K1="@firebase/app-compat",Q1="@firebase/analytics-compat",Y1="@firebase/analytics",X1="@firebase/app-check-compat",J1="@firebase/app-check",Z1="@firebase/auth",ex="@firebase/auth-compat",tx="@firebase/database",nx="@firebase/data-connect",rx="@firebase/database-compat",ix="@firebase/functions",sx="@firebase/functions-compat",ox="@firebase/installations",ax="@firebase/installations-compat",lx="@firebase/messaging",ux="@firebase/messaging-compat",cx="@firebase/performance",dx="@firebase/performance-compat",fx="@firebase/remote-config",hx="@firebase/remote-config-compat",px="@firebase/storage",mx="@firebase/storage-compat",gx="@firebase/firestore",vx="@firebase/vertexai-preview",yx="@firebase/firestore-compat",_x="firebase",wx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc="[DEFAULT]",xx={[cc]:"fire-core",[K1]:"fire-core-compat",[Y1]:"fire-analytics",[Q1]:"fire-analytics-compat",[J1]:"fire-app-check",[X1]:"fire-app-check-compat",[Z1]:"fire-auth",[ex]:"fire-auth-compat",[tx]:"fire-rtdb",[nx]:"fire-data-connect",[rx]:"fire-rtdb-compat",[ix]:"fire-fn",[sx]:"fire-fn-compat",[ox]:"fire-iid",[ax]:"fire-iid-compat",[lx]:"fire-fcm",[ux]:"fire-fcm-compat",[cx]:"fire-perf",[dx]:"fire-perf-compat",[fx]:"fire-rc",[hx]:"fire-rc-compat",[px]:"fire-gcs",[mx]:"fire-gcs-compat",[gx]:"fire-fst",[yx]:"fire-fst-compat",[vx]:"fire-vertex","fire-js":"fire-js",[_x]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Map,Sx=new Map,fc=new Map;function Lh(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ti(t){const e=t.name;if(fc.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;fc.set(e,t);for(const n of Ea.values())Lh(n,t);for(const n of Sx.values())Lh(n,t);return!0}function Nd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Zs("app","Firebase",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=wx;function mv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw tr.create("bad-app-name",{appName:String(i)});if(n||(n=uv()),!n)throw tr.create("no-options");const s=Ea.get(i);if(s){if(Ca(n,s.options)&&Ca(r,s.config))return s;throw tr.create("duplicate-app",{appName:i})}const o=new R1(i);for(const l of fc.values())o.addComponent(l);const a=new Ex(n,r,o);return Ea.set(i,a),a}function gv(t=dc){const e=Ea.get(t);if(!e&&t===dc&&uv())return mv();if(!e)throw tr.create("no-app",{appName:t});return e}function nr(t,e,n){var r;let i=(r=xx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(a.join(" "));return}Ti(new Ar(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="firebase-heartbeat-database",kx=1,Bs="firebase-heartbeat-store";let ru=null;function vv(){return ru||(ru=V1(bx,kx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bs)}catch(n){console.warn(n)}}}}).catch(t=>{throw tr.create("idb-open",{originalErrorMessage:t.message})})),ru}async function Tx(t){try{const n=(await vv()).transaction(Bs),r=await n.objectStore(Bs).get(yv(t));return await n.done,r}catch(e){if(e instanceof hr)bn.warn(e.message);else{const n=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bn.warn(n.message)}}}async function Fh(t,e){try{const r=(await vv()).transaction(Bs,"readwrite");await r.objectStore(Bs).put(e,yv(t)),await r.done}catch(n){if(n instanceof hr)bn.warn(n.message);else{const r=tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bn.warn(r.message)}}}function yv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=1024,Nx=30*24*60*60*1e3;class Rx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ax(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Nx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jh(),{heartbeatsToSend:r,unsentEntries:i}=Px(this._heartbeatsCache.heartbeats),s=wa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bn.warn(n),""}}}function jh(){return new Date().toISOString().substring(0,10)}function Px(t,e=Ix){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ax{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m1()?g1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Tx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bh(t){return wa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){Ti(new Ar("platform-logger",e=>new G1(e),"PRIVATE")),Ti(new Ar("heartbeat",e=>new Rx(e),"PRIVATE")),nr(cc,Mh,t),nr(cc,Mh,"esm2017"),nr("fire-js","")}Ox("");function Rd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dx=_v,wv=new Zs("auth","Firebase",_v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new Td("@firebase/auth");function Mx(t,...e){ba.logLevel<=ve.WARN&&ba.warn(`Auth (${Fi}): ${t}`,...e)}function Ho(t,...e){ba.logLevel<=ve.ERROR&&ba.error(`Auth (${Fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw Pd(t,...e)}function nn(t,...e){return Pd(t,...e)}function xv(t,e,n){const r=Object.assign(Object.assign({},Dx()),{[e]:n});return new Zs("auth","Firebase",r).create(e,{appName:t.name})}function rr(t){return xv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pd(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wv.create(t,...e)}function te(t,e,...n){if(!t)throw Pd(e,...n)}function mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ho(e),new Error(e)}function Tn(t,e){t||mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Lx(){return Uh()==="http:"||Uh()==="https:"}function Uh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lx()||f1()||"connection"in navigator)?navigator.onLine:!0}function jx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tn(n>e,"Short delay should be less than long delay!"),this.isMobile=bd()||dv()}get(){return Fx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t,e){Tn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new eo(3e4,6e4);function ll(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ji(t,e,n,r,i={}){return Cv(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Li(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return d1()||(u.referrerPolicy="no-referrer"),Sv.fetch()(bv(t,t.config.apiHost,n,a),u)})}async function Cv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Bx),e);try{const i=new zx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw No(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw No(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw No(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw No(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xv(t,h,u);kn(t,h)}}catch(i){if(i instanceof hr)throw i;kn(t,"network-request-failed",{message:String(i)})}}async function Ev(t,e,n,r,i={}){const s=await ji(t,e,n,r,i);return"mfaPendingCredential"in s&&kn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function bv(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ad(t.config,i):`${t.config.apiScheme}://${i}`}class zx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nn(this.auth,"network-request-failed")),Ux.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function No(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(t,e){return ji(t,"POST","/v1/accounts:delete",e)}async function kv(t,e){return ji(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vx(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),i=Od(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ms(iu(i.auth_time)),issuedAtTime:ms(iu(i.iat)),expirationTime:ms(iu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function iu(t){return Number(t)*1e3}function Od(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ho("JWT malformed, contained fewer than 3 sections"),null;try{const i=xa(n);return i?JSON.parse(i):(Ho("Failed to decode base64 JWT payload"),null)}catch(i){return Ho("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zh(t){const e=Od(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&Hx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ms(this.lastLoginAt),this.creationTime=ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Us(t,kv(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Tv(s.providerUserInfo):[],a=qx(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function Gx(t){const e=Mt(t);await ka(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Tv(t){return t.map(e=>{var{providerId:n}=e,r=Rd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(t,e){const n=await Cv(t,{},async()=>{const r=Li({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=bv(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sv.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qx(t,e){return ji(t,"POST","/v2/accounts:revokeToken",ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=zh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Kx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new di;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Rd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $x(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Us(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vx(this,e)}reload(){return Gx(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ka(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await Us(this,Wx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:b,isAnonymous:L,providerData:$,stsTokenManager:U}=n;te(_&&U,e,"internal-error");const q=di.fromJSON(this.name,U);te(typeof _=="string",e,"internal-error"),Mn(p,e.name),Mn(f,e.name),te(typeof b=="boolean",e,"internal-error"),te(typeof L=="boolean",e,"internal-error"),Mn(w,e.name),Mn(x,e.name),Mn(C,e.name),Mn(A,e.name),Mn(v,e.name),Mn(m,e.name);const re=new gn({uid:_,auth:e,email:f,emailVerified:b,displayName:p,isAnonymous:L,photoURL:x,phoneNumber:w,tenantId:C,stsTokenManager:q,createdAt:v,lastLoginAt:m});return $&&Array.isArray($)&&(re.providerData=$.map(ne=>Object.assign({},ne))),A&&(re._redirectEventId=A),re}static async _fromIdTokenResponse(e,n,r=!1){const i=new di;i.updateFromServerResponse(n);const s=new gn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ka(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Tv(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new di;a.updateFromIdToken(r);const l=new gn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Map;function vn(t){Tn(t instanceof Function,"Expected a class definition");let e=Wh.get(t);return e?(Tn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Iv.type="NONE";const Vh=Iv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,e,n){return`firebase:${t}:${e}:${n}`}class fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$o(this.userKey,i.apiKey,s),this.fullPersistenceKey=$o("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fi(vn(Vh),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||vn(Vh);const o=$o(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const p=gn._fromJSON(e,h);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fi(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new fi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Av(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dv(e))return"Blackberry";if(Mv(e))return"Webos";if(Rv(e))return"Safari";if((e.includes("chrome/")||Pv(e))&&!e.includes("edge/"))return"Chrome";if(Ov(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nv(t=at()){return/firefox\//i.test(t)}function Rv(t=at()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pv(t=at()){return/crios\//i.test(t)}function Av(t=at()){return/iemobile/i.test(t)}function Ov(t=at()){return/android/i.test(t)}function Dv(t=at()){return/blackberry/i.test(t)}function Mv(t=at()){return/webos/i.test(t)}function Dd(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Yx(t=at()){var e;return Dd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xx(){return h1()&&document.documentMode===10}function Lv(t=at()){return Dd(t)||Ov(t)||Mv(t)||Dv(t)||/windows phone/i.test(t)||Av(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e=[]){let n;switch(t){case"Browser":n=Hh(at());break;case"Worker":n=`${Hh(at())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(t,e={}){return ji(t,"GET","/v2/passwordPolicy",ll(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=6;class tS{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $h(this),this.idTokenSubscription=new $h(this),this.beforeStateQueue=new Jx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await fi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kv(this,{idToken:e}),r=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ka(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(rr(this));const n=e?Mt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zx(this),n=new tS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Qx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await fi.create(this,[vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Mx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ul(t){return Mt(t)}class $h{constructor(e){this.auth=e,this.observer=null,this.addObserver=C1(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rS(t){Md=t}function iS(t){return Md.loadJS(t)}function sS(){return Md.gapiScript}function oS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t,e){const n=Nd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ca(s,e??{}))return i;kn(i,"already-initialized")}return n.initialize({options:e})}function lS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uS(t,e,n){const r=ul(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=jv(e),{host:o,port:a}=cS(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),dS()}function jv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cS(t){const e=jv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Gh(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Gh(o)}}}function Gh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mn("not implemented")}_getIdTokenResponse(e){return mn("not implemented")}_linkToIdToken(e,n){return mn("not implemented")}_getReauthenticationResolver(e){return mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hi(t,e){return Ev(t,"POST","/v1/accounts:signInWithIdp",ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="http://localhost";class Or extends Bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Rd(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Or(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hi(e,n)}buildRequest(){const e={requestUri:fS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Li(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Uv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends to{constructor(){super("facebook.com")}static credential(e){return Or._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.FACEBOOK_SIGN_IN_METHOD="facebook.com";Un.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Or._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends to{constructor(){super("github.com")}static credential(e){return Or._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.GITHUB_SIGN_IN_METHOD="github.com";Wn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends to{constructor(){super("twitter.com")}static credential(e,n){return Or._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vn.credential(n,r)}catch{return null}}}Vn.TWITTER_SIGN_IN_METHOD="twitter.com";Vn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e){return Ev(t,"POST","/v1/accounts:signUp",ll(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await gn._fromIdTokenResponse(e,r,i),o=qh(r);return new ar({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=qh(r);return new ar({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function qh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t){var e;if(pn(t.app))return Promise.reject(rr(t));const n=ul(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ar({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await hS(n,{returnSecureToken:!0}),i=await ar._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends hr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ta.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ta(e,n,r,i)}}function zv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ta._fromErrorAndOperation(t,s,e,r):s})}async function mS(t,e,n=!1){const r=await Us(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ar._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e,n=!1){const{auth:r}=t;if(pn(r.app))return Promise.reject(rr(r));const i="reauthenticate";try{const s=await Us(t,zv(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=Od(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),ar._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&kn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t,e,n=!1){if(pn(t.app))return Promise.reject(rr(t));const r="signIn",i=await zv(t,r,e),s=await ar._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function yS(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function _S(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function wS(t,e,n,r){return Mt(t).onAuthStateChanged(e,n,r)}const Ia="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ia,"1"),this.storage.removeItem(Ia),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=1e3,SS=10;class Vv extends Wv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Xx()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SS):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vv.type="LOCAL";const CS=Vv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends Wv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Hv.type="SESSION";const $v=Hv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new cl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await ES(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Ld("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const f=p;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function kS(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function TS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NS(){return Gv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="firebaseLocalStorageDb",RS=1,Na="firebaseLocalStorage",Kv="fbase_key";class no{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dl(t,e){return t.transaction([Na],e?"readwrite":"readonly").objectStore(Na)}function PS(){const t=indexedDB.deleteDatabase(qv);return new no(t).toPromise()}function mc(){const t=indexedDB.open(qv,RS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Na,{keyPath:Kv})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Na)?e(r):(r.close(),await PS(),e(await mc()))})})}async function Kh(t,e,n){const r=dl(t,!0).put({[Kv]:e,value:n});return new no(r).toPromise()}async function AS(t,e){const n=dl(t,!1).get(e),r=await new no(n).toPromise();return r===void 0?null:r.value}function Qh(t,e){const n=dl(t,!0).delete(e);return new no(n).toPromise()}const OS=800,DS=3;class Qv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cl._getInstance(NS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TS(),!this.activeServiceWorker)return;this.sender=new bS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mc();return await Kh(e,Ia,"1"),await Qh(e,Ia),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kh(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=dl(i,!1).getAll();return new no(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qv.type="LOCAL";const MS=Qv;new eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e){return e?vn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FS(t){return vS(t.auth,new Fd(t),t.bypassAuthState)}function jS(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),gS(n,new Fd(t),t.bypassAuthState)}async function BS(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),mS(n,new Fd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FS;case"linkViaPopup":case"linkViaRedirect":return BS;case"reauthViaPopup":case"reauthViaRedirect":return jS;default:kn(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new eo(2e3,1e4);class ni extends Yv{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Tn(this.filter.length===1,"Popup operations only handle one event");const e=Ld();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,US.get())};e()}}ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="pendingRedirect",Go=new Map;class WS extends Yv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Go.get(this.auth._key());if(!e){try{const r=await VS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Go.set(this.auth._key(),e)}return this.bypassAuthState||Go.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VS(t,e){const n=GS(e),r=$S(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HS(t,e){Go.set(t._key(),e)}function $S(t){return vn(t._redirectPersistence)}function GS(t){return $o(zS,t.config.apiKey,t.name)}async function qS(t,e,n=!1){if(pn(t.app))return Promise.reject(rr(t));const r=ul(t),i=LS(r,e),o=await new WS(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=10*60*1e3;class QS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Xv(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yh(e))}saveEventToCache(e){this.cachedEventUids.add(Yh(e)),this.lastProcessedEventTime=Date.now()}}function Yh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Xv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t,e={}){return ji(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZS=/^https?/;async function eC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XS(t);for(const n of e)try{if(tC(n))return}catch{}kn(t,"unauthorized-domain")}function tC(t){const e=hc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZS.test(n))return!1;if(JS.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=new eo(3e4,6e4);function Xh(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rC(t){return new Promise((e,n)=>{var r,i,s;function o(){Xh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xh(),n(nn(t,"network-request-failed"))},timeout:nC.get()})}if(!((i=(r=rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rn().gapi)===null||s===void 0)&&s.load)o();else{const a=oS("iframefcb");return rn()[a]=()=>{gapi.load?o():n(nn(t,"network-request-failed"))},iS(`${sS()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw qo=null,e})}let qo=null;function iC(t){return qo=qo||rC(t),qo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new eo(5e3,15e3),oC="__/auth/iframe",aC="emulator/auth/iframe",lC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ad(e,aC):`https://${t.config.authDomain}/${oC}`,r={apiKey:e.apiKey,appName:t.name,v:Fi},i=uC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Li(r).slice(1)}`}async function dC(t){const e=await iC(t),n=rn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:cC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=nn(t,"network-request-failed"),a=rn().setTimeout(()=>{s(o)},sC.get());function l(){rn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hC=500,pC=600,mC="_blank",gC="http://localhost";class Jh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vC(t,e,n,r=hC,i=pC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fC),{width:r.toString(),height:i.toString(),top:s,left:o}),u=at().toLowerCase();n&&(a=Pv(u)?mC:n),Nv(u)&&(e=e||gC,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[w,x])=>`${f}${w}=${x},`,"");if(Yx(u)&&a!=="_self")return yC(e||"",a),new Jh(null);const p=window.open(e||"",a,h);te(p,t,"popup-blocked");try{p.focus()}catch{}return new Jh(p)}function yC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="__/auth/handler",wC="emulator/auth/handler",xC=encodeURIComponent("fac");async function Zh(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fi,eventId:i};if(e instanceof Uv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ac(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof to){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${xC}=${encodeURIComponent(l)}`:"";return`${SC(t)}?${Li(a).slice(1)}${u}`}function SC({config:t}){return t.emulator?Ad(t,wC):`https://${t.authDomain}/${_C}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="webStorageSupport";class CC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$v,this._completeRedirectFn=qS,this._overrideRedirectResult=HS}async _openPopup(e,n,r,i){var s;Tn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Zh(e,n,r,hc(),i);return vC(e,o,Ld())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Zh(e,n,r,hc(),i);return kS(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Tn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dC(e),r=new QS(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(su,{type:su},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[su];o!==void 0&&n(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Lv()||Rv()||Dd()}}const EC=CC;var ep="@firebase/auth",tp="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TC(t){Ti(new Ar("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fv(t)},u=new nS(r,i,s,l);return lS(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ti(new Ar("auth-internal",e=>{const n=ul(e.getProvider("auth").getImmediate());return(r=>new bC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(ep,tp,kC(t)),nr(ep,tp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=5*60,NC=cv("authIdTokenMaxAge")||IC;let np=null;const RC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>NC)return;const i=n==null?void 0:n.token;np!==i&&(np=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function PC(t=gv()){const e=Nd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=aS(t,{popupRedirectResolver:EC,persistence:[MS,CS,$v]}),r=cv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=RC(s.toString());_S(n,o,()=>o(n.currentUser)),yS(n,a=>o(a))}}const i=lv("auth");return i&&uS(n,`http://${i}`),n}function AC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=nn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",AC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TC("Browser");var rp={};const ip="@firebase/database",sp="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv="";function OC(t){Jv=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),He(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:js(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DC(e)}}catch{}return new MC},Cr=Zv("localStorage"),LC=Zv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new Td("@firebase/database"),FC=function(){let t=1;return function(){return t++}}(),ey=function(t){const e=k1(t),n=new S1;n.update(e);const r=n.digest();return Cd.encodeByteArray(r)},ro=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ro.apply(null,r):typeof r=="object"?e+=He(r):e+=r,e+=" "}return e};let gs=null,op=!0;const jC=function(t,e){M(!0,"Can't turn on custom loggers persistently."),pi.logLevel=ve.VERBOSE,gs=pi.log.bind(pi)},nt=function(...t){if(op===!0&&(op=!1,gs===null&&LC.get("logging_enabled")===!0&&jC()),gs){const e=ro.apply(null,t);gs(e)}},io=function(t){return function(...e){nt(t,...e)}},gc=function(...t){const e="FIREBASE INTERNAL ERROR: "+ro(...t);pi.error(e)},In=function(...t){const e=`FIREBASE FATAL ERROR: ${ro(...t)}`;throw pi.error(e),new Error(e)},vt=function(...t){const e="FIREBASE WARNING: "+ro(...t);pi.warn(e)},BC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ty=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},UC=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ii="[MIN_NAME]",Dr="[MAX_NAME]",Bi=function(t,e){if(t===e)return 0;if(t===Ii||e===Dr)return-1;if(e===Ii||t===Dr)return 1;{const n=ap(t),r=ap(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},zC=function(t,e){return t===e?0:t<e?-1:1},Ji=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+He(e))},jd=function(t){if(typeof t!="object"||t===null)return He(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=He(e[r]),n+=":",n+=jd(t[e[r]]);return n+="}",n},ny=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function yt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ry=function(t){M(!ty(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let p="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),p=p+f}return p.toLowerCase()},WC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function HC(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const $C=new RegExp("^-?(0*)\\d{1,10}$"),GC=-2147483648,qC=2147483647,ap=function(t){if($C.test(t)){const e=Number(t);if(e>=GC&&e<=qC)return e}return null},Ui=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vt("Exception was thrown by user callback.",n),e},Math.floor(0))}},KC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vt(e)}}class Ko{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ko.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="5",iy="v",sy="s",oy="r",ay="f",ly=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uy="ls",cy="p",vc="ac",dy="websocket",fy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function XC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function py(t,e,n){M(typeof e=="string","typeof type must == string"),M(typeof n=="object","typeof params must == object");let r;if(e===dy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===fy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);XC(t)&&(n.ns=t.namespace);const i=[];return yt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.counters_={}}incrementCounter(e,n=1){Pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return r1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou={},au={};function Ud(t){const e=t.toString();return ou[e]||(ou[e]=new JC),ou[e]}function ZC(t,e){const n=t.toString();return au[n]||(au[n]=e()),au[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ui(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="start",tE="close",nE="pLPCommand",rE="pRTLPCB",my="id",gy="pw",vy="ser",iE="cb",sE="seg",oE="ts",aE="d",lE="dframe",yy=1870,_y=30,uE=yy-_y,cE=25e3,dE=3e4;class ri{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=io(e),this.stats_=Ud(n),this.urlFn=l=>(this.appCheckToken&&(l[vc]=this.appCheckToken),py(n,fy,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new eE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(dE)),UC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zd((...s)=>{const[o,a,l,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===lp)this.id=a,this.password=l;else if(o===tE)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[lp]="t",r[vy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[iE]=this.scriptTagHolder.uniqueCallbackIdentifier),r[iy]=Bd,this.transportSessionId&&(r[sy]=this.transportSessionId),this.lastSessionId&&(r[uy]=this.lastSessionId),this.applicationId&&(r[cy]=this.applicationId),this.appCheckToken&&(r[vc]=this.appCheckToken),typeof location<"u"&&location.hostname&&ly.test(location.hostname)&&(r[oy]=ay);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ri.forceAllow_=!0}static forceDisallow(){ri.forceDisallow_=!0}static isAvailable(){return ri.forceAllow_?!0:!ri.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WC()&&!VC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=He(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ov(n),i=ny(r,uE);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[lE]="t",r[my]=e,r[gy]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=He(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class zd{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=FC(),window[nE+this.uniqueCallbackIdentifier]=e,window[rE+this.uniqueCallbackIdentifier]=n,this.myIFrame=zd.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){nt("frame writing exception"),a.stack&&nt(a.stack),nt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[my]=this.myID,e[gy]=this.myPW,e[vy]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_y+r.length<=yy;){const o=this.pendingSegs.shift();r=r+"&"+sE+i+"="+o.seg+"&"+oE+i+"="+o.ts+"&"+aE+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(cE)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=16384,hE=45e3;let Ra=null;typeof MozWebSocket<"u"?Ra=MozWebSocket:typeof WebSocket<"u"&&(Ra=WebSocket);class Wt{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=io(this.connId),this.stats_=Ud(n),this.connURL=Wt.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[iy]=Bd,typeof location<"u"&&location.hostname&&ly.test(location.hostname)&&(o[oy]=ay),n&&(o[sy]=n),r&&(o[uy]=r),i&&(o[vc]=i),s&&(o[cy]=s),py(e,dy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cr.set("previous_websocket_failure",!0);try{let r;p1(),this.mySock=new Ra(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Wt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ra!==null&&!Wt.forceDisallow_}static previouslyFailed(){return Cr.isInMemoryStorage||Cr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Cr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=js(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(M(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=He(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ny(n,fE);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hE))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Wt.responsesRequiredToBeHealthy=2;Wt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ri,Wt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Wt&&Wt.isAvailable();let r=n&&!Wt.previouslyFailed();if(e.webSocketOnly&&(n||vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wt];else{const i=this.transports_=[];for(const s of zs.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);zs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=6e4,mE=5e3,gE=10*1024,vE=100*1024,lu="t",up="d",yE="s",cp="r",_E="e",dp="o",fp="a",hp="n",pp="p",wE="h";class xE{constructor(e,n,r,i,s,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=io("c:"+this.id+":"),this.transportManager_=new zs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=vs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>vE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lu in e){const n=e[lu];n===fp?this.upgradeIfSecondaryHealthy_():n===cp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===dp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ji("t",e),r=Ji("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ji("t",e),r=Ji("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ji(lu,e);if(up in e){const r=e[up];if(n===wE){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===hp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===yE?this.onConnectionShutdown_(r):n===cp?this.onReset_(r):n===_E?gc("Server Error: "+r):n===dp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Bd!==r&&vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),vs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(pE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){M(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends xy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Pa}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=32,gp=768;class ye{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function me(){return new ye("")}function ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lr(t){return t.pieces_.length-t.pieceNum_}function _e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ye(t.pieces_,e)}function Sy(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function SE(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Cy(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ey(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ye(e,0)}function je(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ye)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ye(n,0)}function le(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){const n=ie(t),r=ie(e);if(n===null)return e;if(n===r)return ft(_e(t),_e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Wd(t,e){if(lr(t)!==lr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(lr(t)>lr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class CE{constructor(e,n){this.errorPrefix_=n,this.parts_=Cy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=al(this.parts_[r]);by(this)}}function EE(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=al(e),by(t)}function bE(t){const e=t.parts_.pop();t.byteLength_-=al(e),t.parts_.length>0&&(t.byteLength_-=1)}function by(t){if(t.byteLength_>gp)throw new Error(t.errorPrefix_+"has a key path longer than "+gp+" bytes ("+t.byteLength_+").");if(t.parts_.length>mp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mp+") or object contains a cycle "+_r(t))}function _r(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends xy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Vd}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=1e3,kE=60*5*1e3,vp=30*1e3,TE=1.3,IE=3e4,NE="server_kill",yp=3;class wn extends wy{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=wn.nextPersistentConnectionId_++,this.log_=io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zi,this.maxReconnectDelay_=kE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Pa.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(He(s)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ol,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;wn.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Pn(e,"w")){const r=ki(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||x1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=w1(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),M(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+He(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):gc("Unrecognized action received from server: "+He(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IE&&(this.reconnectDelay_=Zi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+wn.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(p){M(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(p)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?nt("getToken() completed but was canceled"):(nt("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=f&&f.token,a=new xE(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,w=>{vt(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(NE)},s))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&vt(p),l())}}}interrupt(e){nt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ac(this.interruptReasons_)&&(this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>jd(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ye(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){nt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yp&&(this.reconnectDelay_=vp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Jv.replace(/\./g,"-")]=1,bd()?e["framework.cordova"]=1:dv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Pa.getInstance().currentlyOnline();return ac(this.interruptReasons_)&&e}}wn.nextPersistentConnectionId_=0;wn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new se(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new se(Ii,e),i=new se(Ii,n);return this.compare(r,i)!==0}minPost(){return se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro;class ky extends fl{static get __EMPTY_NODE(){return Ro}static set __EMPTY_NODE(e){Ro=e}compare(e,n){return Bi(e.name,n.name)}isDefinedOn(e){throw Mi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return se.MIN}maxPost(){return new se(Dr,Ro)}makePost(e,n){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new se(e,Ro)}toString(){return".key"}}const mi=new ky;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ve{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ve.RED,this.left=i??ht.EMPTY_NODE,this.right=s??ht.EMPTY_NODE}copy(e,n,r,i,s){return new Ve(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ht.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ve.RED=!0;Ve.BLACK=!1;class RE{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ve(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ht{constructor(e,n=ht.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ht(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ve.BLACK,null,null))}remove(e){return new ht(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ve.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Po(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Po(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Po(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Po(this.root_,null,this.comparator_,!0,e)}}ht.EMPTY_NODE=new RE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e){return Bi(t.name,e.name)}function Hd(t,e){return Bi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc;function AE(t){yc=t}const Ty=function(t){return typeof t=="number"?"number:"+ry(t):"string:"+t},Iy=function(t){if(t.isLeafNode()){const e=t.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pn(e,".sv"),"Priority must be a string or number.")}else M(t===yc||t.isEmpty(),"priority of unexpected type.");M(t===yc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p;class ze{constructor(e,n=ze.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Iy(this.priorityNode_)}static set __childrenNodeConstructor(e){_p=e}static get __childrenNodeConstructor(){return _p}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ze(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ze.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return le(e)?this:ie(e)===".priority"?this.priorityNode_:ze.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ze.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ie(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(M(r!==".priority"||lr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ze.__childrenNodeConstructor.EMPTY_NODE.updateChild(_e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ty(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ry(this.value_):e+=this.value_,this.lazyHash_=ey(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ze.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ze.__childrenNodeConstructor?-1:(M(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ze.VALUE_TYPE_ORDER.indexOf(n),s=ze.VALUE_TYPE_ORDER.indexOf(r);return M(i>=0,"Unknown leaf type: "+n),M(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ze.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ny,Ry;function OE(t){Ny=t}function DE(t){Ry=t}class ME extends fl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Bi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return se.MIN}maxPost(){return new se(Dr,new ze("[PRIORITY-POST]",Ry))}makePost(e,n){const r=Ny(e);return new se(n,new ze("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ae=new ME;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=Math.log(2);class FE{constructor(e){const n=s=>parseInt(Math.log(s)/LE,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Aa=function(t,e,n,r){t.sort(e);const i=function(l,u){const h=u-l;let p,f;if(h===0)return null;if(h===1)return p=t[l],f=n?n(p):p,new Ve(f,p.node,Ve.BLACK,null,null);{const w=parseInt(h/2,10)+l,x=i(l,w),C=i(w+1,u);return p=t[w],f=n?n(p):p,new Ve(f,p.node,Ve.BLACK,x,C)}},s=function(l){let u=null,h=null,p=t.length;const f=function(x,C){const A=p-x,v=p;p-=x;const m=i(A+1,v),_=t[A],b=n?n(_):_;w(new Ve(b,_.node,C,null,m))},w=function(x){u?(u.left=x,u=x):(h=x,u=x)};for(let x=0;x<l.count;++x){const C=l.nextBitIsOne(),A=Math.pow(2,l.count-(x+1));C?f(A,Ve.BLACK):(f(A,Ve.BLACK),f(A,Ve.RED))}return h},o=new FE(t.length),a=s(o);return new ht(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;const Wr={};class yn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return M(Wr&&Ae,"ChildrenNode.ts has not been loaded"),uu=uu||new yn({".priority":Wr},{".priority":Ae}),uu}get(e){const n=ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ht?n:null}hasIndex(e){return Pn(this.indexSet_,e.toString())}addIndex(e,n){M(e!==mi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(se.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Aa(r,e.getCompare()):a=Wr;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new yn(h,u)}addToIndexes(e,n){const r=Sa(this.indexes_,(i,s)=>{const o=ki(this.indexSet_,s);if(M(o,"Missing index implementation for "+s),i===Wr)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(se.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Aa(a,o.getCompare())}else return Wr;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new se(e.name,a))),l.insert(e,e.node)}});return new yn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Sa(this.indexes_,i=>{if(i===Wr)return i;{const s=n.get(e.name);return s?i.remove(new se(e.name,s)):i}});return new yn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let es;class ee{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Iy(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return es||(es=new ee(new ht(Hd),null,yn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||es}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?es:n}}getChild(e){const n=ie(e);return n===null?this:this.getImmediateChild(n).getChild(_e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(M(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new se(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?es:this.priorityNode_;return new ee(i,o,s)}}updateChild(e,n){const r=ie(e);if(r===null)return n;{M(ie(e)!==".priority"||lr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_e(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ae,(o,a)=>{n[o]=a.val(e),r++,s&&ee.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ty(this.getPriority().val())+":"),this.forEachChild(Ae,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ey(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new se(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new se(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new se(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,se.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,se.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===so?-1:0}withIndex(e){if(e===mi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===mi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ae),i=n.getIterator(Ae);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===mi?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class jE extends ee{constructor(){super(new ht(Hd),ee.EMPTY_NODE,yn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const so=new jE;Object.defineProperties(se,{MIN:{value:new se(Ii,ee.EMPTY_NODE)},MAX:{value:new se(Dr,so)}});ky.__EMPTY_NODE=ee.EMPTY_NODE;ze.__childrenNodeConstructor=ee;AE(so);DE(so);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=!0;function Ke(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ze(n,Ke(e))}if(!(t instanceof Array)&&BE){const n=[];let r=!1;if(yt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ke(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new se(o,l)))}}),n.length===0)return ee.EMPTY_NODE;const s=Aa(n,PE,o=>o.name,Hd);if(r){const o=Aa(n,Ae.getCompare());return new ee(s,Ke(e),new yn({".priority":o},{".priority":Ae}))}else return new ee(s,Ke(e),yn.Default)}else{let n=ee.EMPTY_NODE;return yt(t,(r,i)=>{if(Pn(t,r)&&r.substring(0,1)!=="."){const s=Ke(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ke(e))}}OE(Ke);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends fl{constructor(e){super(),this.indexPath_=e,M(!le(e)&&ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Bi(e.name,n.name):s}makePost(e,n){const r=Ke(e),i=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new se(n,i)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,so);return new se(Dr,e)}toString(){return Cy(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends fl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Bi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(e,n){const r=Ke(e);return new se(n,r)}toString(){return".value"}}const WE=new zE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){return{type:"value",snapshotNode:t}}function Ni(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ws(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Vs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function VE(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ws(n,a)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ni(n,r)):o.trackChildChange(Vs(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ae,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ws(i,s))}),n.isLeafNode()||n.forEachChild(Ae,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Vs(i,s,o))}else r.trackChildChange(Ni(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.indexedFilter_=new $d(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Hs.getStartPost_(e),this.endPost_=Hs.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new se(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ee.EMPTY_NODE);const s=this;return n.forEachChild(Ae,(o,a)=>{s.matches(new se(o,a))||(i=i.updateImmediateChild(o,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Hs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new se(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ee.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ee.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(f,w)=>p(w,f)}else o=this.index_.getCompare();const a=e;M(a.numChildren()===this.limit_,"");const l=new se(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const p=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const w=f==null?1:o(f,l);if(h&&!r.isEmpty()&&w>=0)return s!=null&&s.trackChildChange(Vs(n,r,p)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ws(n,p));const C=a.updateImmediateChild(n,ee.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Ni(f.name,f.node)),C.updateImmediateChild(f.name,f.node)):C}}else return r.isEmpty()?e:h&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Ws(u.name,u.node)),s.trackChildChange(Ni(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ii}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const e=new Gd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $E(t){return t.loadsAllData()?new $d(t.getIndex()):t.hasLimit()?new HE(t):new Hs(t)}function wp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ae?n="$priority":t.index_===WE?n="$value":t.index_===mi?n="$key":(M(t.index_ instanceof UE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=He(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=He(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+He(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=He(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+He(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function xp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ae&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends wy{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=io("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Oa.getListenId_(e,r),a={};this.listens_[o]=a;const l=wp(e._queryParams);this.restRequest_(s+".json",l,(u,h)=>{let p=h;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,r),ki(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=Oa.getListenId_(e,n);delete this.listens_[r]}get(e){const n=wp(e._queryParams),r=e._path.toString(),i=new ol;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Li(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=js(a.responseText)}catch{vt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&vt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return{value:null,children:new Map}}function Ay(t,e,n){if(le(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ie(e);t.children.has(r)||t.children.set(r,Da());const i=t.children.get(r);e=_e(e),Ay(i,e,n)}}function _c(t,e,n){t.value!==null?n(e,t.value):qE(t,(r,i)=>{const s=new ye(e.toString()+"/"+r);_c(i,s,n)})}function qE(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=10*1e3,QE=30*1e3,YE=5*60*1e3;class XE{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KE(e);const r=Sp+(QE-Sp)*Math.random();vs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;yt(e,(i,s)=>{s>0&&Pn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),vs(this.reportStats_.bind(this),Math.floor(Math.random()*2*YE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ht||(Ht={}));function Oy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Kd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ht.ACK_USER_WRITE,this.source=Oy()}operationForChild(e){if(le(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ye(e));return new Ma(me(),n,this.revert)}}else return M(ie(this.path)===e,"operationForChild called for unrelated child."),new Ma(_e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this.source=e,this.path=n,this.type=Ht.LISTEN_COMPLETE}operationForChild(e){return le(this.path)?new $s(this.source,me()):new $s(this.source,_e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ht.OVERWRITE}operationForChild(e){return le(this.path)?new Mr(this.source,me(),this.snap.getImmediateChild(e)):new Mr(this.source,_e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ht.MERGE}operationForChild(e){if(le(this.path)){const n=this.children.subtree(new ye(e));return n.isEmpty()?null:n.value?new Mr(this.source,me(),n.value):new Gs(this.source,me(),n)}else return M(ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gs(this.source,_e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(le(e))return this.isFullyInitialized()&&!this.filtered_;const n=ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ZE(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(VE(o.childName,o.snapshotNode))}),ts(t,i,"child_removed",e,r,n),ts(t,i,"child_added",e,r,n),ts(t,i,"child_moved",s,r,n),ts(t,i,"child_changed",e,r,n),ts(t,i,"value",e,r,n),i}function ts(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>tb(t,a,l)),o.forEach(a=>{const l=eb(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function eb(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tb(t,e,n){if(e.childName==null||n.childName==null)throw Mi("Should only compare child_ events.");const r=new se(e.childName,e.snapshotNode),i=new se(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t,e){return{eventCache:t,serverCache:e}}function ys(t,e,n,r){return hl(new Lr(e,n,r),t.serverCache)}function Dy(t,e,n,r){return hl(t.eventCache,new Lr(e,n,r))}function wc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Fr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu;const nb=()=>(cu||(cu=new ht(zC)),cu);class Ce{constructor(e,n=nb()){this.value=e,this.children=n}static fromObject(e){let n=new Ce(null);return yt(e,(r,i)=>{n=n.set(new ye(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:me(),value:this.value};if(le(e))return null;{const r=ie(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(_e(e),n);return s!=null?{path:je(new ye(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(le(e))return this;{const n=ie(e),r=this.children.get(n);return r!==null?r.subtree(_e(e)):new Ce(null)}}set(e,n){if(le(e))return new Ce(n,this.children);{const r=ie(e),s=(this.children.get(r)||new Ce(null)).set(_e(e),n),o=this.children.insert(r,s);return new Ce(this.value,o)}}remove(e){if(le(e))return this.children.isEmpty()?new Ce(null):new Ce(null,this.children);{const n=ie(e),r=this.children.get(n);if(r){const i=r.remove(_e(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ce(null):new Ce(this.value,s)}else return this}}get(e){if(le(e))return this.value;{const n=ie(e),r=this.children.get(n);return r?r.get(_e(e)):null}}setTree(e,n){if(le(e))return n;{const r=ie(e),s=(this.children.get(r)||new Ce(null)).setTree(_e(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ce(this.value,o)}}fold(e){return this.fold_(me(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(je(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,me(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(le(e))return null;{const s=ie(e),o=this.children.get(s);return o?o.findOnPath_(_e(e),je(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,me(),n)}foreachOnPath_(e,n,r){if(le(e))return this;{this.value&&r(n,this.value);const i=ie(e),s=this.children.get(i);return s?s.foreachOnPath_(_e(e),je(n,i),r):new Ce(null)}}foreach(e){this.foreach_(me(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(je(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.writeTree_=e}static empty(){return new qt(new Ce(null))}}function _s(t,e,n){if(le(e))return new qt(new Ce(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=ft(i,e);return s=s.updateChild(o,n),new qt(t.writeTree_.set(i,s))}else{const i=new Ce(n),s=t.writeTree_.setTree(e,i);return new qt(s)}}}function Cp(t,e,n){let r=t;return yt(n,(i,s)=>{r=_s(r,je(e,i),s)}),r}function Ep(t,e){if(le(e))return qt.empty();{const n=t.writeTree_.setTree(e,new Ce(null));return new qt(n)}}function xc(t,e){return Ur(t,e)!=null}function Ur(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ft(n.path,e)):null}function bp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ae,(r,i)=>{e.push(new se(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new se(r,i.value))}),e}function ir(t,e){if(le(e))return t;{const n=Ur(t,e);return n!=null?new qt(new Ce(n)):new qt(t.writeTree_.subtree(e))}}function Sc(t){return t.writeTree_.isEmpty()}function Ri(t,e){return My(me(),t.writeTree_,e)}function My(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(M(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=My(je(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(je(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e){return By(e,t)}function rb(t,e,n,r,i){M(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=_s(t.visibleWrites,e,n)),t.lastWriteId=r}function ib(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function sb(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);M(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&ob(a,r.path)?i=!1:Vt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return ab(t),!0;if(r.snap)t.visibleWrites=Ep(t.visibleWrites,r.path);else{const a=r.children;yt(a,l=>{t.visibleWrites=Ep(t.visibleWrites,je(r.path,l))})}return!0}else return!1}function ob(t,e){if(t.snap)return Vt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Vt(je(t.path,n),e))return!0;return!1}function ab(t){t.visibleWrites=Ly(t.allWrites,lb,me()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function lb(t){return t.visible}function Ly(t,e,n){let r=qt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Vt(n,o)?(a=ft(n,o),r=_s(r,a,s.snap)):Vt(o,n)&&(a=ft(o,n),r=_s(r,me(),s.snap.getChild(a)));else if(s.children){if(Vt(n,o))a=ft(n,o),r=Cp(r,a,s.children);else if(Vt(o,n))if(a=ft(o,n),le(a))r=Cp(r,me(),s.children);else{const l=ki(s.children,ie(a));if(l){const u=l.getChild(_e(a));r=_s(r,me(),u)}}}else throw Mi("WriteRecord should have .snap or .children")}}return r}function Fy(t,e,n,r,i){if(!r&&!i){const s=Ur(t.visibleWrites,e);if(s!=null)return s;{const o=ir(t.visibleWrites,e);if(Sc(o))return n;if(n==null&&!xc(o,me()))return null;{const a=n||ee.EMPTY_NODE;return Ri(o,a)}}}else{const s=ir(t.visibleWrites,e);if(!i&&Sc(s))return n;if(!i&&n==null&&!xc(s,me()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Vt(u.path,e)||Vt(e,u.path))},a=Ly(t.allWrites,o,e),l=n||ee.EMPTY_NODE;return Ri(a,l)}}}function ub(t,e,n){let r=ee.EMPTY_NODE;const i=Ur(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ae,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ir(t.visibleWrites,e);return n.forEachChild(Ae,(o,a)=>{const l=Ri(ir(s,new ye(o)),a);r=r.updateImmediateChild(o,l)}),bp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ir(t.visibleWrites,e);return bp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function cb(t,e,n,r,i){M(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=je(e,n);if(xc(t.visibleWrites,s))return null;{const o=ir(t.visibleWrites,s);return Sc(o)?i.getChild(n):Ri(o,i.getChild(n))}}function db(t,e,n,r){const i=je(e,n),s=Ur(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ir(t.visibleWrites,i);return Ri(o,r.getNode().getImmediateChild(n))}else return null}function fb(t,e){return Ur(t.visibleWrites,e)}function hb(t,e,n,r,i,s,o){let a;const l=ir(t.visibleWrites,e),u=Ur(l,me());if(u!=null)a=u;else if(n!=null)a=Ri(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],p=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let w=f.getNext();for(;w&&h.length<i;)p(w,r)!==0&&h.push(w),w=f.getNext();return h}else return[]}function pb(){return{visibleWrites:qt.empty(),allWrites:[],lastWriteId:-1}}function La(t,e,n,r){return Fy(t.writeTree,t.treePath,e,n,r)}function Yd(t,e){return ub(t.writeTree,t.treePath,e)}function kp(t,e,n,r){return cb(t.writeTree,t.treePath,e,n,r)}function Fa(t,e){return fb(t.writeTree,je(t.treePath,e))}function mb(t,e,n,r,i,s){return hb(t.writeTree,t.treePath,e,n,r,i,s)}function Xd(t,e,n){return db(t.writeTree,t.treePath,e,n)}function jy(t,e){return By(je(t.treePath,e),t.writeTree)}function By(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;M(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),M(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Vs(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ws(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ni(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Vs(r,e.snapshotNode,i.oldSnap));else throw Mi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Uy=new vb;class Jd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Lr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fr(this.viewCache_),s=mb(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){return{filter:t}}function _b(t,e){M(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function wb(t,e,n,r,i){const s=new gb;let o,a;if(n.type===Ht.OVERWRITE){const u=n;u.source.fromUser?o=Cc(t,e,u.path,u.snap,r,i,s):(M(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!le(u.path),o=ja(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Ht.MERGE){const u=n;u.source.fromUser?o=Sb(t,e,u.path,u.children,r,i,s):(M(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Ec(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Ht.ACK_USER_WRITE){const u=n;u.revert?o=bb(t,e,u.path,r,i,s):o=Cb(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Ht.LISTEN_COMPLETE)o=Eb(t,e,n.path,r,s);else throw Mi("Unknown operation type: "+n.type);const l=s.getChanges();return xb(e,o,l),{viewCache:o,changes:l}}function xb(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=wc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Py(wc(e)))}}function zy(t,e,n,r,i,s){const o=e.eventCache;if(Fa(r,n)!=null)return e;{let a,l;if(le(n))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Fr(e),h=u instanceof ee?u:ee.EMPTY_NODE,p=Yd(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const u=La(r,Fr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=ie(n);if(u===".priority"){M(lr(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const p=kp(r,n,h,l);p!=null?a=t.filter.updatePriority(h,p):a=o.getNode()}else{const h=_e(n);let p;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=kp(r,n,o.getNode(),l);f!=null?p=o.getNode().getImmediateChild(u).updateChild(h,f):p=o.getNode().getImmediateChild(u)}else p=Xd(r,u,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),u,p,h,i,s):a=o.getNode()}}return ys(e,a,o.isFullyInitialized()||le(n),t.filter.filtersNodes())}}function ja(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(le(n))u=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const w=l.getNode().updateChild(n,r);u=h.updateFullNode(l.getNode(),w,null)}else{const w=ie(n);if(!l.isCompleteForPath(n)&&lr(n)>1)return e;const x=_e(n),A=l.getNode().getImmediateChild(w).updateChild(x,r);w===".priority"?u=h.updatePriority(l.getNode(),A):u=h.updateChild(l.getNode(),w,A,x,Uy,null)}const p=Dy(e,u,l.isFullyInitialized()||le(n),h.filtersNodes()),f=new Jd(i,p,s);return zy(t,p,n,i,f,a)}function Cc(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const h=new Jd(i,e,s);if(le(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ys(e,u,!0,t.filter.filtersNodes());else{const p=ie(n);if(p===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ys(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=_e(n),w=a.getNode().getImmediateChild(p);let x;if(le(f))x=r;else{const C=h.getCompleteChild(p);C!=null?Sy(f)===".priority"&&C.getChild(Ey(f)).isEmpty()?x=C:x=C.updateChild(f,r):x=ee.EMPTY_NODE}if(w.equals(x))l=e;else{const C=t.filter.updateChild(a.getNode(),p,x,f,h,o);l=ys(e,C,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Tp(t,e){return t.eventCache.isCompleteForChild(e)}function Sb(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const h=je(n,l);Tp(e,ie(h))&&(a=Cc(t,a,h,u,i,s,o))}),r.foreach((l,u)=>{const h=je(n,l);Tp(e,ie(h))||(a=Cc(t,a,h,u,i,s,o))}),a}function Ip(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ec(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;le(n)?u=r:u=new Ce(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((p,f)=>{if(h.hasChild(p)){const w=e.serverCache.getNode().getImmediateChild(p),x=Ip(t,w,f);l=ja(t,l,new ye(p),x,i,s,o,a)}}),u.children.inorderTraversal((p,f)=>{const w=!e.serverCache.isCompleteForChild(p)&&f.value===null;if(!h.hasChild(p)&&!w){const x=e.serverCache.getNode().getImmediateChild(p),C=Ip(t,x,f);l=ja(t,l,new ye(p),C,i,s,o,a)}}),l}function Cb(t,e,n,r,i,s,o){if(Fa(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(le(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ja(t,e,n,l.getNode().getChild(n),i,s,a,o);if(le(n)){let u=new Ce(null);return l.getNode().forEachChild(mi,(h,p)=>{u=u.set(new ye(h),p)}),Ec(t,e,n,u,i,s,a,o)}else return e}else{let u=new Ce(null);return r.foreach((h,p)=>{const f=je(n,h);l.isCompleteForPath(f)&&(u=u.set(h,l.getNode().getChild(f)))}),Ec(t,e,n,u,i,s,a,o)}}function Eb(t,e,n,r,i){const s=e.serverCache,o=Dy(e,s.getNode(),s.isFullyInitialized()||le(n),s.isFiltered());return zy(t,o,n,r,Uy,i)}function bb(t,e,n,r,i,s){let o;if(Fa(r,n)!=null)return e;{const a=new Jd(r,e,i),l=e.eventCache.getNode();let u;if(le(n)||ie(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=La(r,Fr(e));else{const p=e.serverCache.getNode();M(p instanceof ee,"serverChildren would be complete if leaf node"),h=Yd(r,p)}h=h,u=t.filter.updateFullNode(l,h,s)}else{const h=ie(n);let p=Xd(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),p!=null?u=t.filter.updateChild(l,h,p,_e(n),a,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,ee.EMPTY_NODE,_e(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=La(r,Fr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Fa(r,me())!=null,ys(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $d(r.getIndex()),s=$E(r);this.processor_=yb(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(ee.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),h=new Lr(l,o.isFullyInitialized(),i.filtersNodes()),p=new Lr(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=hl(p,h),this.eventGenerator_=new JE(this.query_)}get query(){return this.query_}}function Tb(t){return t.viewCache_.serverCache.getNode()}function Ib(t,e){const n=Fr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!le(e)&&!n.getImmediateChild(ie(e)).isEmpty())?n.getChild(e):null}function Np(t){return t.eventRegistrations_.length===0}function Nb(t,e){t.eventRegistrations_.push(e)}function Rp(t,e,n){const r=[];if(n){M(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Pp(t,e,n,r){e.type===Ht.MERGE&&e.source.queryId!==null&&(M(Fr(t.viewCache_),"We should always have a full cache before handling merges"),M(wc(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=wb(t.processor_,i,e,n,r);return _b(t.processor_,s.viewCache),M(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Wy(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Rb(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ae,(s,o)=>{r.push(Ni(s,o))}),n.isFullyInitialized()&&r.push(Py(n.getNode())),Wy(t,r,n.getNode(),e)}function Wy(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return ZE(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba;class Pb{constructor(){this.views=new Map}}function Ab(t){M(!Ba,"__referenceConstructor has already been defined"),Ba=t}function Ob(){return M(Ba,"Reference.ts has not been loaded"),Ba}function Db(t){return t.views.size===0}function Zd(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return M(s!=null,"SyncTree gave us an op for an invalid query."),Pp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Pp(o,e,n,r));return s}}function Mb(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=La(n,i?r:null),l=!1;a?l=!0:r instanceof ee?(a=Yd(n,r),l=!1):(a=ee.EMPTY_NODE,l=!1);const u=hl(new Lr(a,l,!1),new Lr(r,i,!1));return new kb(e,u)}return o}function Lb(t,e,n,r,i,s){const o=Mb(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Nb(o,n),Rb(o,n)}function Fb(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ur(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(Rp(u,n,r)),Np(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(Rp(l,n,r)),Np(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ur(t)&&s.push(new(Ob())(e._repo,e._path)),{removed:s,events:o}}function Vy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gi(t,e){let n=null;for(const r of t.views.values())n=n||Ib(r,e);return n}function Hy(t,e){if(e._queryParams.loadsAllData())return pl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function $y(t,e){return Hy(t,e)!=null}function ur(t){return pl(t)!=null}function pl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua;function jb(t){M(!Ua,"__referenceConstructor has already been defined"),Ua=t}function Bb(){return M(Ua,"Reference.ts has not been loaded"),Ua}let Ub=1;class Ap{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ce(null),this.pendingWriteTree_=pb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Gy(t,e,n,r,i){return rb(t.pendingWriteTree_,e,n,r,i),i?oo(t,new Mr(Oy(),e,n)):[]}function Er(t,e,n=!1){const r=ib(t.pendingWriteTree_,e);if(sb(t.pendingWriteTree_,e)){let s=new Ce(null);return r.snap!=null?s=s.set(me(),!0):yt(r.children,o=>{s=s.set(new ye(o),!0)}),oo(t,new Ma(r.path,s,n))}else return[]}function ml(t,e,n){return oo(t,new Mr(qd(),e,n))}function zb(t,e,n){const r=Ce.fromObject(n);return oo(t,new Gs(qd(),e,r))}function Wb(t,e){return oo(t,new $s(qd(),e))}function Vb(t,e,n){const r=tf(t,n);if(r){const i=nf(r),s=i.path,o=i.queryId,a=ft(s,e),l=new $s(Kd(o),a);return rf(t,s,l)}else return[]}function bc(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||$y(o,e))){const l=Fb(o,e,n,r);Db(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(s,(f,w)=>ur(w));if(h&&!p){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const w=Gb(f);for(let x=0;x<w.length;++x){const C=w[x],A=C.query,v=Qy(t,C);t.listenProvider_.startListening(ws(A),za(t,A),v.hashFn,v.onComplete)}}}!p&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(ws(e),null):u.forEach(f=>{const w=t.queryToTagMap.get(gl(f));t.listenProvider_.stopListening(ws(f),w)}))}qb(t,u)}return a}function Hb(t,e,n,r){const i=tf(t,r);if(i!=null){const s=nf(i),o=s.path,a=s.queryId,l=ft(o,e),u=new Mr(Kd(a),l,n);return rf(t,o,u)}else return[]}function $b(t,e,n,r){const i=tf(t,r);if(i){const s=nf(i),o=s.path,a=s.queryId,l=ft(o,e),u=Ce.fromObject(n),h=new Gs(Kd(a),l,u);return rf(t,o,h)}else return[]}function Op(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,w)=>{const x=ft(f,i);s=s||gi(w,x),o=o||ur(w)});let a=t.syncPointTree_.get(i);a?(o=o||ur(a),s=s||gi(a,me())):(a=new Pb,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=ee.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((w,x)=>{const C=gi(x,me());C&&(s=s.updateImmediateChild(w,C))}));const u=$y(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=gl(e);M(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const w=Kb();t.queryToTagMap.set(f,w),t.tagToQueryMap.set(w,f)}const h=Qd(t.pendingWriteTree_,i);let p=Lb(a,e,n,h,s,l);if(!u&&!o&&!r){const f=Hy(a,e);p=p.concat(Qb(t,e,f))}return p}function ef(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ft(o,e),u=gi(a,l);if(u)return u});return Fy(i,e,s,n,!0)}function oo(t,e){return qy(e,t.syncPointTree_,null,Qd(t.pendingWriteTree_,me()))}function qy(t,e,n,r){if(le(t.path))return Ky(t,e,n,r);{const i=e.get(me());n==null&&i!=null&&(n=gi(i,me()));let s=[];const o=ie(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=jy(r,o);s=s.concat(qy(a,l,u,h))}return i&&(s=s.concat(Zd(i,t,r,n))),s}}function Ky(t,e,n,r){const i=e.get(me());n==null&&i!=null&&(n=gi(i,me()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=jy(r,o),h=t.operationForChild(o);h&&(s=s.concat(Ky(h,a,l,u)))}),i&&(s=s.concat(Zd(i,t,r,n))),s}function Qy(t,e){const n=e.query,r=za(t,n);return{hashFn:()=>(Tb(e)||ee.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Vb(t,n._path,r):Wb(t,n._path);{const s=HC(i,n);return bc(t,n,null,s)}}}}function za(t,e){const n=gl(e);return t.queryToTagMap.get(n)}function gl(t){return t._path.toString()+"$"+t._queryIdentifier}function tf(t,e){return t.tagToQueryMap.get(e)}function nf(t){const e=t.indexOf("$");return M(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ye(t.substr(0,e))}}function rf(t,e,n){const r=t.syncPointTree_.get(e);M(r,"Missing sync point for query tag that we're tracking");const i=Qd(t.pendingWriteTree_,e);return Zd(r,n,i,null)}function Gb(t){return t.fold((e,n,r)=>{if(n&&ur(n))return[pl(n)];{let i=[];return n&&(i=Vy(n)),yt(r,(s,o)=>{i=i.concat(o)}),i}})}function ws(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Bb())(t._repo,t._path):t}function qb(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=gl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Kb(){return Ub++}function Qb(t,e,n){const r=e._path,i=za(t,e),s=Qy(t,n),o=t.listenProvider_.startListening(ws(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)M(!ur(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,p)=>{if(!le(u)&&h&&ur(h))return[pl(h).query];{let f=[];return h&&(f=f.concat(Vy(h).map(w=>w.query))),yt(p,(w,x)=>{f=f.concat(x)}),f}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(ws(h),za(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new sf(n)}node(){return this.node_}}class of{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=je(this.path_,e);return new of(this.syncTree_,n)}node(){return ef(this.syncTree_,this.path_)}}const Yb=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Dp=function(t,e,n){if(!t||typeof t!="object")return t;if(M(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Xb(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Jb(t[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Xb=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:M(!1,"Unexpected server value: "+t)}},Jb=function(t,e,n){t.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&M(!1,"Unexpected increment value: "+r);const i=e.node();if(M(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Zb=function(t,e,n,r){return af(e,new of(n,t),r)},Yy=function(t,e,n){return af(t,new sf(e),n)};function af(t,e,n){const r=t.getPriority().val(),i=Dp(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Dp(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ze(a,Ke(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ze(i))),o.forEachChild(Ae,(a,l)=>{const u=af(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function uf(t,e){let n=e instanceof ye?e:new ye(e),r=t,i=ie(n);for(;i!==null;){const s=ki(r.node.children,i)||{children:{},childCount:0};r=new lf(i,r,s),n=_e(n),i=ie(n)}return r}function zi(t){return t.node.value}function Xy(t,e){t.node.value=e,kc(t)}function Jy(t){return t.node.childCount>0}function ek(t){return zi(t)===void 0&&!Jy(t)}function vl(t,e){yt(t.node.children,(n,r)=>{e(new lf(n,t,r))})}function Zy(t,e,n,r){n&&e(t),vl(t,i=>{Zy(i,e,!0)})}function tk(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ao(t){return new ye(t.parent===null?t.name:ao(t.parent)+"/"+t.name)}function kc(t){t.parent!==null&&nk(t.parent,t.name,t)}function nk(t,e,n){const r=ek(n),i=Pn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,kc(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,kc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=/[\[\].#$\/\u0000-\u001F\u007F]/,ik=/[\[\].#$\u0000-\u001F\u007F]/,du=10*1024*1024,e_=function(t){return typeof t=="string"&&t.length!==0&&!rk.test(t)},t_=function(t){return typeof t=="string"&&t.length!==0&&!ik.test(t)},sk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),t_(t)},ok=function(t,e,n,r){cf(kd(t,"value"),e,n)},cf=function(t,e,n){const r=n instanceof ye?new CE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+_r(r));if(typeof e=="function")throw new Error(t+"contains a function "+_r(r)+" with contents = "+e.toString());if(ty(e))throw new Error(t+"contains "+e.toString()+" "+_r(r));if(typeof e=="string"&&e.length>du/3&&al(e)>du)throw new Error(t+"contains a string greater than "+du+" utf8 bytes "+_r(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(yt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!e_(o)))throw new Error(t+" contains an invalid key ("+o+") "+_r(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);EE(r,o),cf(t,a,r),bE(r)}),i&&s)throw new Error(t+' contains ".value" child '+_r(r)+" in addition to actual children.")}},n_=function(t,e,n,r){if(!t_(n))throw new Error(kd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ak=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),n_(t,e,n)},lk=function(t,e){if(ie(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!e_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!sk(n))throw new Error(kd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function df(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Wd(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function r_(t,e,n){df(t,n),i_(t,r=>Wd(r,e))}function Nn(t,e,n){df(t,n),i_(t,r=>Vt(r,e)||Vt(e,r))}function i_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(dk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function dk(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();gs&&nt("event: "+n.toString()),Ui(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="repo_interrupt",hk=25;class pk{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ck,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Da(),this.transactionQueueTree_=new lf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mk(t,e,n){if(t.stats_=Ud(t.repoInfo_),t.forceRestClient_||KC())t.server_=new Oa(t.repoInfo_,(r,i,s,o)=>{Mp(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Lp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{He(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new wn(t.repoInfo_,e,(r,i,s,o)=>{Mp(t,r,i,s,o)},r=>{Lp(t,r)},r=>{vk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=ZC(t.repoInfo_,()=>new XE(t.stats_,t.server_)),t.infoData_=new GE,t.infoSyncTree_=new Ap({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=ml(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),hf(t,"connected",!1),t.serverSyncTree_=new Ap({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Nn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function gk(t){const n=t.infoData_.getNode(new ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ff(t){return Yb({timestamp:gk(t)})}function Mp(t,e,n,r,i){t.dataUpdateCount++;const s=new ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Sa(n,u=>Ke(u));o=$b(t.serverSyncTree_,s,l,i)}else{const l=Ke(n);o=Hb(t.serverSyncTree_,s,l,i)}else if(r){const l=Sa(n,u=>Ke(u));o=zb(t.serverSyncTree_,s,l)}else{const l=Ke(n);o=ml(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=yl(t,s)),Nn(t.eventQueue_,a,o)}function Lp(t,e){hf(t,"connected",e),e===!1&&_k(t)}function vk(t,e){yt(e,(n,r)=>{hf(t,n,r)})}function hf(t,e,n){const r=new ye("/.info/"+e),i=Ke(n);t.infoData_.updateSnapshot(r,i);const s=ml(t.infoSyncTree_,r,i);Nn(t.eventQueue_,r,s)}function s_(t){return t.nextWriteId_++}function yk(t,e,n,r,i){pf(t,"set",{path:e.toString(),value:n,priority:r});const s=ff(t),o=Ke(n,r),a=ef(t.serverSyncTree_,e),l=Yy(o,a,s),u=s_(t),h=Gy(t.serverSyncTree_,e,l,u,!0);df(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,w)=>{const x=f==="ok";x||vt("set at "+e+" failed: "+f);const C=Er(t.serverSyncTree_,u,!x);Nn(t.eventQueue_,e,C),Sk(t,i,f,w)});const p=c_(t,e);yl(t,p),Nn(t.eventQueue_,p,[])}function _k(t){pf(t,"onDisconnectEvents");const e=ff(t),n=Da();_c(t.onDisconnect_,me(),(i,s)=>{const o=Zb(i,s,t.serverSyncTree_,e);Ay(n,i,o)});let r=[];_c(n,me(),(i,s)=>{r=r.concat(ml(t.serverSyncTree_,i,s));const o=c_(t,i);yl(t,o)}),t.onDisconnect_=Da(),Nn(t.eventQueue_,me(),r)}function wk(t,e,n){let r;ie(e._path)===".info"?r=Op(t.infoSyncTree_,e,n):r=Op(t.serverSyncTree_,e,n),r_(t.eventQueue_,e._path,r)}function Fp(t,e,n){let r;ie(e._path)===".info"?r=bc(t.infoSyncTree_,e,n):r=bc(t.serverSyncTree_,e,n),r_(t.eventQueue_,e._path,r)}function xk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fk)}function pf(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nt(n,...e)}function Sk(t,e,n,r){e&&Ui(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function o_(t,e,n){return ef(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function mf(t,e=t.transactionQueueTree_){if(e||_l(t,e),zi(e)){const n=l_(t,e);M(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Ck(t,ao(e),n)}else Jy(e)&&vl(e,n=>{mf(t,n)})}function Ck(t,e,n){const r=n.map(u=>u.currentWriteId),i=o_(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];M(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=ft(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{pf(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const p=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(Er(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&p.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();_l(t,uf(t.transactionQueueTree_,e)),mf(t,t.transactionQueueTree_),Nn(t.eventQueue_,e,h);for(let f=0;f<p.length;f++)Ui(p[f])}else{if(u==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{vt("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=u}yl(t,e)}},o)}function yl(t,e){const n=a_(t,e),r=ao(n),i=l_(t,n);return Ek(t,i,r),r}function Ek(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=ft(n,l.path);let h=!1,p;if(M(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,p=l.abortReason,i=i.concat(Er(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=hk)h=!0,p="maxretry",i=i.concat(Er(t.serverSyncTree_,l.currentWriteId,!0));else{const f=o_(t,l.path,o);l.currentInputSnapshot=f;const w=e[a].update(f.val());if(w!==void 0){cf("transaction failed: Data returned ",w,l.path);let x=Ke(w);typeof w=="object"&&w!=null&&Pn(w,".priority")||(x=x.updatePriority(f.getPriority()));const A=l.currentWriteId,v=ff(t),m=Yy(x,f,v);l.currentOutputSnapshotRaw=x,l.currentOutputSnapshotResolved=m,l.currentWriteId=s_(t),o.splice(o.indexOf(A),1),i=i.concat(Gy(t.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally)),i=i.concat(Er(t.serverSyncTree_,A,!0))}else h=!0,p="nodata",i=i.concat(Er(t.serverSyncTree_,l.currentWriteId,!0))}Nn(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}_l(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ui(r[a]);mf(t,t.transactionQueueTree_)}function a_(t,e){let n,r=t.transactionQueueTree_;for(n=ie(e);n!==null&&zi(r)===void 0;)r=uf(r,n),e=_e(e),n=ie(e);return r}function l_(t,e){const n=[];return u_(t,e,n),n.sort((r,i)=>r.order-i.order),n}function u_(t,e,n){const r=zi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);vl(e,i=>{u_(t,i,n)})}function _l(t,e){const n=zi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Xy(e,n.length>0?n:void 0)}vl(e,r=>{_l(t,r)})}function c_(t,e){const n=ao(a_(t,e)),r=uf(t.transactionQueueTree_,e);return tk(r,i=>{fu(t,i)}),fu(t,r),Zy(r,i=>{fu(t,i)}),n}function fu(t,e){const n=zi(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(M(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(M(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Er(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Xy(e,void 0):n.length=s+1,Nn(t.eventQueue_,ao(e),i);for(let o=0;o<r.length;o++)Ui(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function kk(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vt(`Invalid query segment '${n}' in query '${t}'`)}return e}const jp=function(t,e){const n=Tk(t),r=n.namespace;n.domain==="firebase.com"&&In(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&In("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||BC();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new hy(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ye(n.pathString)}},Tk=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=bk(t.substring(h,p)));const f=kk(t.substring(Math.min(t.length,p)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const w=e.slice(0,u);if(w.toLowerCase()==="localhost")n="localhost";else if(w.split(".").length<=2)n=w;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+He(this.snapshot.exportVal())}}class Nk{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return le(this._path)?null:Sy(this._path)}get ref(){return new pr(this._repo,this._path)}get _queryIdentifier(){const e=xp(this._queryParams),n=jd(e);return n==="{}"?"default":n}get _queryObject(){return xp(this._queryParams)}isEqual(e){if(e=Mt(e),!(e instanceof gf))return!1;const n=this._repo===e._repo,r=Wd(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+SE(this._path)}}class pr extends gf{constructor(e,n){super(e,n,new Gd,!1)}get parent(){const e=Ey(this._path);return e===null?null:new pr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Wa{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ye(e),r=Tc(this.ref,e);return new Wa(this._node.getChild(n),r,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Wa(i,Tc(this.ref,r),Ae)))}hasChild(e){const n=new ye(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Bp(t,e){return t=Mt(t),t._checkNotDeleted("ref"),Tc(t._root,e)}function Tc(t,e){return t=Mt(t),ie(t._path)===null?ak("child","path",e):n_("child","path",e),new pr(t._repo,je(t._path,e))}function Up(t,e){t=Mt(t),lk("set",t._path),ok("set",e,t._path);const n=new ol;return yk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class vf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Ik("value",this,new Wa(e.snapshotNode,new pr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Nk(this,e,n):null}matches(e){return e instanceof vf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Pk(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(h,p)=>{Fp(t._repo,t,a),l(h,p)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Rk(n,s||void 0),a=new vf(o);return wk(t._repo,t,a),()=>Fp(t._repo,t,a)}function Ak(t,e,n,r){return Pk(t,"value",e,n,r)}Ab(pr);jb(pr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="FIREBASE_DATABASE_EMULATOR_HOST",Ic={};let Dk=!1;function Mk(t,e,n,r){t.repoInfo_=new hy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Lk(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||In("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=jp(s,i),a=o.repoInfo,l;typeof process<"u"&&rp&&(l=rp[Ok]),l?(s=`http://${l}?ns=${a.namespace}`,o=jp(s,i),a=o.repoInfo):o.repoInfo.secure;const u=new YC(t.name,t.options,e);uk("Invalid Firebase Database URL",o),le(o.path)||In("Database URL must point to the root of a Firebase Database (not including a child path).");const h=jk(a,t,u,new QC(t.name,n));return new Bk(h,t)}function Fk(t,e){const n=Ic[e];(!n||n[t.key]!==t)&&In(`Database ${e}(${t.repoInfo_}) has already been deleted.`),xk(t),delete n[t.key]}function jk(t,e,n,r){let i=Ic[e.name];i||(i={},Ic[e.name]=i);let s=i[t.toURLString()];return s&&In("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pk(t,Dk,n,r),i[t.toURLString()]=s,s}class Bk{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pr(this._repo,me())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Fk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&In("Cannot call "+e+" on a deleted database.")}}function Uk(t=gv(),e){const n=Nd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=u1("database");r&&zk(n,...r)}return n}function zk(t,e,n,r={}){t=Mt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&In("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&In('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ko(Ko.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:c1(r.mockUserToken,t.app.options.projectId);s=new Ko(o)}Mk(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){OC(Fi),Ti(new Ar("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Lk(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),nr(ip,sp,t),nr(ip,sp,"esm2017")}wn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};wn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Wk();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Me=(t,e)=>{const n=de.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>de.createElement("svg",{ref:h,...Vk,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Hk(t)}`,a].join(" "),...u},[...e.map(([p,f])=>de.createElement(p,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=Me("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Me("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Me("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=Me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Me("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Me("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Me("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=Me("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=Me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=Me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Me("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=Me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Me("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=Me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=Me("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=Me("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=Me("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var Zk="firebase",eT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(Zk,eT,"app");const tT={apiKey:"AIzaSyD4E1mAaY4HkId_h41YQz_kijN4R_h3In8",authDomain:"pestour-965ff.firebaseapp.com",databaseURL:"https://pestour-965ff-default-rtdb.firebaseio.com",projectId:"pestour-965ff",storageBucket:"pestour-965ff.firebasestorage.app",messagingSenderId:"518176676119",appId:"1:518176676119:web:a21a447983ba8deb297f52"},y_=mv(tT),__=PC(y_),zp=Uk(y_),nT=async()=>{try{return await pS(__),!0}catch(t){return console.error("Firebase Auth Error: Please enable Anonymous Sign-in in Firebase Console!",t),!1}},rT={name:"Pallet Pes Tour",season:"Spring 2026",tagline:"Legends Start Here"},iT=[{id:"A1",name:"1AUTO1",group:"A"},{id:"A2",name:"Dra-Gon",group:"A"},{id:"A3",name:"Glanelalala",group:"A"},{id:"A4",name:"WinMeLbey",group:"A"},{id:"B1",name:"K-Vinn",group:"B"},{id:"B2",name:"Max-88",group:"B"},{id:"B3",name:"Reach OMG",group:"B"},{id:"B4",name:"so respec1",group:"B"},{id:"C1",name:"Petter-027",group:"C"},{id:"C2",name:"Player C2",group:"C"},{id:"C3",name:"Player C3",group:"C"},{id:"C4",name:"Player C4",group:"C"}],hu=t=>[{id:`M-${t}1`,groupId:t,p1Id:`${t}1`,p2Id:`${t}2`,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}},{id:`M-${t}2`,groupId:t,p1Id:`${t}3`,p2Id:`${t}4`,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}},{id:`M-${t}3`,groupId:t,p1Id:`${t}1`,p2Id:`${t}3`,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}},{id:`M-${t}4`,groupId:t,p1Id:`${t}2`,p2Id:`${t}4`,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}},{id:`M-${t}5`,groupId:t,p1Id:`${t}1`,p2Id:`${t}4`,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}},{id:`M-${t}6`,groupId:t,p1Id:`${t}2`,p2Id:`${t}3`,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}}],sT=[...hu("A"),...hu("B"),...hu("C")],Qo={settings:rT,players:iT,matches:sT,bracket:[]},Sl=t=>{let e=0,n=0,r=0,i=0;["g1","g2","g3"].forEach(u=>{const h=t[u]||{};h.p1!==void 0&&h.p1!==null&&h.p2!==void 0&&h.p2!==null&&(r+=Number(h.p1),i+=Number(h.p2),Number(h.p1)>Number(h.p2)&&e++,Number(h.p2)>Number(h.p1)&&n++)});const o=e===2||n===2;let a=0,l=0;return o&&(e===2&&n===0&&(a=3,l=0),e===2&&n===1&&(a=2,l=1),n===2&&e===0&&(l=3,a=0),n===2&&e===1&&(l=2,a=1)),{p1Wins:e,p2Wins:n,p1Goals:r,p2Goals:i,isFinished:o,p1Pts:a,p2Pts:l}},oT=(t,e)=>{let n={};t.forEach(a=>{n[a.id]={...a,played:0,w:0,l:0,gf:0,ga:0,gd:0,pts:0}}),e.forEach(a=>{if(a.played){const l=Sl(a);l.isFinished&&(n[a.p1Id].played++,n[a.p2Id].played++,l.p1Wins>l.p2Wins?(n[a.p1Id].w++,n[a.p2Id].l++):(n[a.p2Id].w++,n[a.p1Id].l++),n[a.p1Id].gf+=l.p1Goals,n[a.p1Id].ga+=l.p2Goals,n[a.p1Id].gd=n[a.p1Id].gf-n[a.p1Id].ga,n[a.p1Id].pts+=l.p1Pts,n[a.p2Id].gf+=l.p2Goals,n[a.p2Id].ga+=l.p1Goals,n[a.p2Id].gd=n[a.p2Id].gf-n[a.p2Id].ga,n[a.p2Id].pts+=l.p2Pts)}});const r=(a,l)=>l.pts!==a.pts?l.pts-a.pts:l.gd!==a.gd?l.gd-a.gd:l.gf!==a.gf?l.gf-a.gf:a.name.localeCompare(l.name),i={A:[],B:[],C:[]};Object.values(n).forEach(a=>i[a.group].push(a)),i.A.sort(r),i.B.sort(r),i.C.sort(r);const s=[i.A[2],i.B[2],i.C[2]].filter(Boolean).sort(r);let o=[];return["A","B","C"].forEach(a=>{i[a][0]&&o.push({...i[a][0],seedType:`${a}1`}),i[a][1]&&o.push({...i[a][1],seedType:`${a}2`})}),s[0]&&o.push({...s[0],seedType:"Best3"}),s[1]&&o.push({...s[1],seedType:"Best3"}),o.sort(r),{groups:i,thirds:s,qualified:o}},Vr=t=>{if(!t||!t.played)return null;const e=Sl(t);return e.p1Wins>e.p2Wins?{id:t.p1Id,name:t.p1Name}:e.p2Wins>e.p1Wins?{id:t.p2Id,name:t.p2Name}:null},dn=t=>{if(!t||t.length===0)return[];let e=[...t];e.length===4&&(e.push({id:"SF-1",round:"SF",p1Id:null,p1Name:"TBD (QF1)",p2Id:null,p2Name:"TBD (QF2)",played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}}),e.push({id:"SF-2",round:"SF",p1Id:null,p1Name:"TBD (QF3)",p2Id:null,p2Name:"TBD (QF4)",played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}}),e.push({id:"F-1",round:"F",p1Id:null,p1Name:"TBD (SF1)",p2Id:null,p2Name:"TBD (SF2)",played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}}));const n=h=>e.find(p=>p.id===h),r=(h,p)=>{const f=e.findIndex(w=>w.id===h);f!==-1&&(e[f]={...e[f],...p})},i=Vr(n("QF-1")),s=Vr(n("QF-2")),o=Vr(n("QF-3")),a=Vr(n("QF-4"));r("SF-1",{p1Id:i?i.id:null,p1Name:i?i.name:"TBD (QF1)",p2Id:s?s.id:null,p2Name:s?s.name:"TBD (QF2)"}),r("SF-2",{p1Id:o?o.id:null,p1Name:o?o.name:"TBD (QF3)",p2Id:a?a.id:null,p2Name:a?a.name:"TBD (QF4)"});const l=Vr(n("SF-1")),u=Vr(n("SF-2"));return r("F-1",{p1Id:l?l.id:null,p1Name:l?l.name:"TBD (SF1)",p2Id:u?u.id:null,p2Name:u?u.name:"TBD (SF2)"}),e},yf="/PESTOUR/assets/pallet-D_LKp9NR.jpg",aT=Object.freeze(Object.defineProperty({__proto__:null,default:yf},Symbol.toStringTag,{value:"Module"}));function lT({currentPage:t,setCurrentPage:e,isAdmin:n}){const r=[{id:"home",icon:Gk,label:"Home"},{id:"standings",icon:d_,label:"Standings"},{id:"matches",icon:Va,label:"Matches"},{id:"rules",icon:f_,label:"Rules"}];return n&&r.push({id:"knockout",icon:ii,label:"Knockout"}),r.push({id:"admin",icon:g_,label:"Admin"}),d.jsx("nav",{className:"sticky top-0 z-50 bg-[#0a0b10]/95 backdrop-blur-md border-b border-slate-800",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 h-16 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("home"),children:[d.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden shadow-[0_0_15px_rgba(71,112,255,0.4)] flex-shrink-0 border border-[#222B3D]",children:d.jsx("img",{src:yf,alt:"Pallet Logo",className:"w-full h-full object-cover"})}),d.jsx("span",{className:"font-black text-2xl tracking-tighter text-[#A1B1DA] hidden sm:block font-sans",style:{textShadow:"0 0 10px rgba(161,177,218,0.3)"},children:"PES TOUR"})]}),d.jsx("div",{className:"flex space-x-1 overflow-x-auto no-scrollbar ml-auto mr-8",children:r.map(i=>{const s=t===i.id;return d.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm font-bold tracking-wide ${s?"bg-[#18233C] text-[#6384FF] shadow-[inset_0_1px_rgba(100,130,255,0.2)]":"text-[#8B9BB4] hover:text-[#C5D3EB] hover:bg-[#151D2E]"}`,children:[d.jsx(i.icon,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:i.label})]},i.id)})}),d.jsxs("div",{className:"flex items-center gap-4",children:[n&&d.jsxs("span",{className:"flex items-center gap-1 text-[#C084FC] bg-[#C084FC]/10 px-2.5 py-1 rounded-md border border-[#C084FC]/20 text-xs font-bold",children:[d.jsx(xl,{className:"w-3.5 h-3.5"})," ",d.jsx("span",{className:"hidden sm:inline",children:"Admin"})]}),d.jsx("button",{className:"text-[#8B9BB4] hover:text-white transition-colors",children:d.jsx(Qk,{className:"w-5 h-5"})})]})]})})}function uT({data:t,setCurrentPage:e}){const n=t.matches.filter(s=>s.played).length,r=t.matches.length,i=r===0?0:Math.round(n/r*100);return d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 min-h-[80vh] flex flex-col justify-center",children:[d.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-[#0f141e] border border-[#222B3D] p-8 sm:p-14 text-center shadow-[0_0_50px_rgba(20,30,50,0.7)] group",children:[d.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03] transition-opacity group-hover:opacity-[0.05] pointer-events-none"}),d.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[#4770FF] opacity-[0.03] blur-[120px] pointer-events-none rounded-full"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-[#C084FC] opacity-[0.03] blur-[120px] pointer-events-none rounded-full"}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[d.jsx("div",{className:"inline-block rounded-[30px] overflow-hidden",children:d.jsx("img",{src:yf,alt:"Pallet Logo",className:"w-full h-full object-cover p-2"})}),d.jsx("h1",{className:"text-5xl sm:text-7xl font-black tracking-tighter mb-4 text-[#E2E8F0] drop-shadow-md",children:t.settings.name}),d.jsxs("p",{className:"text-xl sm:text-2xl text-[#64748B] font-medium mb-10 tracking-wide",children:[t.settings.season," ",d.jsx("span",{className:"mx-2",children:""})," ",d.jsx("span",{className:"text-[#10B981] font-bold drop-shadow-[0_0_10px_rgba(16,185,129,0.3)]",children:t.settings.tagline})]}),d.jsx("div",{className:"w-full max-w-lg bg-[#0a0b10] rounded-full p-2 border border-[#1E2738] shadow-[inset_0_2px_10px_rgba(0,0,0,0.5)]",children:d.jsx("div",{className:"relative h-4 w-full bg-[#1A2234] rounded-full overflow-hidden",children:d.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-[#4770FF] via-[#7B52FF] to-[#10B981] transition-all duration-1000 ease-out shadow-[0_0_10px_currentColor]",style:{width:`${i}%`}})})}),d.jsxs("p",{className:"mt-5 text-xs text-[#8B9BB4] font-black tracking-[0.2em] uppercase",children:["GROUP STAGE PROGRESS: ",i,"% / ",n," OF ",r," MATCHES COMPLETED"]})]})]}),d.jsx("div",{className:"flex justify-center pt-8",children:d.jsxs("button",{onClick:()=>e("standings"),className:"group flex flex-col items-center gap-3 text-[#64748B] hover:text-[#C084FC] transition-all duration-300",children:[d.jsx("span",{className:"text-xs font-black tracking-[0.2em] uppercase drop-shadow-md",children:"View Standings & Bracket"}),d.jsx("div",{className:"p-3.5 rounded-full bg-[#0f141e] border border-[#222B3D] group-hover:border-[#C084FC]/40 group-hover:bg-[#C084FC]/10 shadow-lg transition-all animate-bounce mt-2 group-hover:shadow-[0_0_20px_rgba(192,132,252,0.2)]",children:d.jsx($k,{className:"w-5 h-5"})})]})})]})}function vi({game:t,label:e,match:n,p1Name:r,p2Name:i,onChange:s,isAdmin:o}){const a=n[t]||{},l=a.p1!==void 0?a.p1:null,u=a.p2!==void 0?a.p2:null,h=l!==null&&u!==null,p=h&&l>u,f=h&&u>l;return d.jsxs("div",{className:"flex items-center justify-between text-sm bg-[#0a0b10] rounded-xl p-3 border border-[#1E2738] shadow-inner transition-colors hover:border-[#334155]/50",children:[d.jsx("div",{className:`flex-1 text-right pr-4 font-black tracking-wide truncate ${p?"text-[#10B981]":f?"text-[#64748B]":"text-[#E2E8F0]"}`,children:r}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Wp,{val:l,onChange:w=>s(n.id,t,"p1",w),disabled:!o}),d.jsx("span",{className:"text-[#64748B] text-[10px] font-black uppercase tracking-widest bg-[#131722] px-2 py-1 rounded-md border border-[#222B3D]",children:e}),d.jsx(Wp,{val:u,onChange:w=>s(n.id,t,"p2",w),disabled:!o})]}),d.jsx("div",{className:`flex-1 pl-4 font-black tracking-wide truncate ${f?"text-[#10B981]":p?"text-[#64748B]":"text-[#E2E8F0]"}`,children:i})]})}function Wp({val:t,onChange:e,disabled:n}){return n?d.jsx("div",{className:`w-9 h-9 flex items-center justify-center rounded-lg font-black text-lg ${t!==null?"bg-[#1E2738] text-white border border-[#334155] shadow-md":"bg-transparent text-[#475569] border border-dashed border-[#334155]"}`,children:t!==null?t:"-"}):d.jsx("input",{type:"number",min:"0",value:t===null?"":t,onChange:r=>e(r.target.value),className:"w-10 h-10 text-center bg-[#131722] border border-[#334155] text-white font-black text-lg focus:border-[#4770FF] focus:ring-2 focus:ring-[#4770FF]/50 outline-none hide-arrows transition-all rounded-lg shadow-inner"})}const cT="/PESTOUR/assets/1AUTO1-DvK8ZO3a.png",dT=Object.freeze(Object.defineProperty({__proto__:null,default:cT},Symbol.toStringTag,{value:"Module"})),fT="/PESTOUR/assets/Dra-Gon-h35qPsN9.png",hT=Object.freeze(Object.defineProperty({__proto__:null,default:fT},Symbol.toStringTag,{value:"Module"})),pT="/PESTOUR/assets/Glanelalala-BfjOw5VL.png",mT=Object.freeze(Object.defineProperty({__proto__:null,default:pT},Symbol.toStringTag,{value:"Module"})),gT="/PESTOUR/assets/Jak-Kroval-_OKZCweB.png",vT=Object.freeze(Object.defineProperty({__proto__:null,default:gT},Symbol.toStringTag,{value:"Module"})),yT="/PESTOUR/assets/K-Vinn-BuM-8vVe.png",_T=Object.freeze(Object.defineProperty({__proto__:null,default:yT},Symbol.toStringTag,{value:"Module"})),wT="/PESTOUR/assets/Max-88-zK7mCRl6.png",xT=Object.freeze(Object.defineProperty({__proto__:null,default:wT},Symbol.toStringTag,{value:"Module"})),ST="/PESTOUR/assets/MengZzz-DHzt8QA4.png",CT=Object.freeze(Object.defineProperty({__proto__:null,default:ST},Symbol.toStringTag,{value:"Module"})),ET="/PESTOUR/assets/Petter-027-BOdQbbdx.png",bT=Object.freeze(Object.defineProperty({__proto__:null,default:ET},Symbol.toStringTag,{value:"Module"})),kT="/PESTOUR/assets/Reach%20OMG-DkAsUodS.png",TT=Object.freeze(Object.defineProperty({__proto__:null,default:kT},Symbol.toStringTag,{value:"Module"})),IT="/PESTOUR/assets/SO-R3spec1-t6QiRiOJ.png",NT=Object.freeze(Object.defineProperty({__proto__:null,default:IT},Symbol.toStringTag,{value:"Module"})),RT="/PESTOUR/assets/Si%20Dav-BpBGgVm6.png",PT=Object.freeze(Object.defineProperty({__proto__:null,default:RT},Symbol.toStringTag,{value:"Module"})),AT="/PESTOUR/assets/Win%20Me%20Lbey-PZ2I4VLO.png",OT=Object.freeze(Object.defineProperty({__proto__:null,default:AT},Symbol.toStringTag,{value:"Module"})),Vp=Object.assign({"../assets/1AUTO1.png":dT,"../assets/Dra-Gon.png":hT,"../assets/Glanelalala.png":mT,"../assets/Jak-Kroval.png":vT,"../assets/K-Vinn.png":_T,"../assets/Max-88.png":xT,"../assets/MengZzz.png":CT,"../assets/Petter-027.png":bT,"../assets/Reach OMG.png":TT,"../assets/SO-R3spec1.png":NT,"../assets/Si Dav.png":PT,"../assets/Win Me Lbey.png":OT,"../assets/pallet.jpg":aT}),DT=t=>{if(!t)return null;const e=i=>i.toLowerCase().replace(/[^a-z0-9]/g,"");let n=e(t);const r={sor3spac1:"sor3spec1"};r[n]&&(n=r[n]);for(const i in Vp){const s=i.split("/").pop().replace(/\.[^/.]+$/,"");if(s==="pallet")continue;const o=e(s);if(o===n||o.includes(n)||n.includes(o))return Vp[i].default}return null},Hp=["bg-[#ef4444]","bg-[#3b82f6]","bg-[#10b981]","bg-[#f59e0b]","bg-[#8b5cf6]","bg-[#ec4899]","bg-[#14b8a6]","bg-[#f97316]"],MT=t=>{if(!t||t.startsWith("TBD"))return"bg-[#334155]";let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);return Hp[Math.abs(e)%Hp.length]};function Pi({name:t,className:e="w-8 h-8 text-xs"}){const n=DT(t);if(n)return d.jsx("div",{className:`rounded-full overflow-hidden flex-shrink-0 shadow-md border border-[#334155]/50 bg-[#0a0b10] flex items-center justify-center ${e}`,children:d.jsx("img",{src:n,alt:t||"Player avatar",className:"w-full h-full object-cover"})});const r=t&&!t.startsWith("TBD")?t.substring(0,2).toUpperCase():"?",i=MT(t);return d.jsx("div",{className:`rounded-full ${i} flex-shrink-0 flex items-center justify-center font-black text-white shadow-md border border-[#ffffff10] ${e}`,children:r})}function yi({match:t,title:e,isAdmin:n,togglePlayed:r,handleScoreChange:i}){const s=Sl(t),o=t.g1||{},a=t.g2||{},l=t.g3||{},u=o.p1!==void 0&&o.p1!==null&&o.p2!==void 0&&o.p2!==null,h=a.p1!==void 0&&a.p1!==null&&a.p2!==void 0&&a.p2!==null;let p=!1;if(u&&h){let C=(o.p1>o.p2?1:0)+(a.p1>a.p2?1:0),A=(o.p2>o.p1?1:0)+(a.p2>a.p1?1:0);C===1&&A===1&&(p=!0)}const f=t.p1Id===null||t.p2Id===null;let w="from-[#C084FC] to-[#8B5CF6]",x="text-[#C084FC]";return t.id.startsWith("SF")?(w="from-[#F97316] to-[#F59E0B]",x="text-[#F97316]"):t.id.startsWith("F")&&(w="from-[#FACC15] to-[#F59E0B]",x="text-[#FACC15]"),d.jsxs("div",{className:`relative bg-[#131722] border ${f?"border-[#1E2738] opacity-70":"border-[#222B3D] hover:border-[#334155]"} rounded-2xl overflow-hidden shadow-xl transition-all duration-300 group`,children:[d.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full bg-gradient-to-b ${w} shadow-[0_0_10px_currentColor]`}),d.jsxs("div",{className:"p-5 pl-7",children:[d.jsxs("div",{className:"flex justify-between items-center mb-5 pb-3 border-b border-[#1E2738]",children:[d.jsx("span",{className:`text-[10px] font-black uppercase tracking-[0.2em] ${x}`,children:e}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-xl font-black tracking-widest text-white drop-shadow-md",children:[s.p1Wins," ",d.jsx("span",{className:"text-[#64748B] mx-1",children:"-"})," ",s.p2Wins]}),n&&!f&&r&&d.jsx("button",{onClick:()=>r(t.id),className:`p-1.5 rounded-lg border transition-all ${t.played?"bg-[#10B981]/20 border-[#10B981]/50 text-[#10B981] shadow-[0_0_10px_rgba(16,185,129,0.2)]":"bg-[#1E2738] border-[#334155] text-[#94A3B8] hover:bg-[#334155] hover:text-white"}`,children:t.played?d.jsx(qs,{className:"w-4 h-4"}):d.jsx(wl,{className:"w-4 h-4"})}),!n&&t.played&&!f&&d.jsxs("span",{className:"text-[9px] text-[#10B981] font-black tracking-widest uppercase border border-[#10B981]/30 bg-[#10B981]/10 px-2.5 py-1.5 rounded flex items-center gap-1 shadow-[0_0_12px_rgba(16,185,129,0.15)]",children:[d.jsx(qs,{className:"w-3 h-3"})," Done"]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center px-1 mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 w-2/5",children:[d.jsx(Pi,{name:t.p1Name,className:"w-7 h-7 text-[10px] rounded-md"}),d.jsx("span",{className:"font-bold text-sm text-[#E2E8F0] truncate",title:t.p1Name,children:t.p1Name||"TBD"})]}),d.jsx("span",{className:"text-[10px] font-black tracking-widest text-[#64748B] uppercase",children:"VS"}),d.jsxs("div",{className:"flex items-center justify-end gap-2 w-2/5",children:[d.jsx("span",{className:"font-bold text-sm text-[#E2E8F0] truncate text-right",title:t.p2Name,children:t.p2Name||"TBD"}),d.jsx(Pi,{name:t.p2Name,className:"w-7 h-7 text-[10px] rounded-md"})]})]}),d.jsx(vi,{game:"g1",label:"G1",match:t,p1Name:"",p2Name:"",onChange:i,isAdmin:n&&!f}),d.jsx(vi,{game:"g2",label:"G2",match:t,p1Name:"",p2Name:"",onChange:i,isAdmin:n&&!f}),(p||l.p1!==void 0&&l.p1!==null||n&&!f)&&d.jsx("div",{className:`transition-all duration-500 overflow-hidden ${p||l.p1!==void 0&&l.p1!==null||n&&!f?"opacity-100 max-h-32 mt-3 pt-3 border-t border-dashed border-[#1E2738]":"opacity-0 max-h-0"}`,children:d.jsx(vi,{game:"g3",label:"G3",match:t,p1Name:"",p2Name:"",onChange:i,isAdmin:n&&!f})})]})]})]})}function LT({standingsData:t,bracketData:e}){const n=(r,i,s=!1,o="bg-blue-500")=>d.jsxs("div",{className:"bg-[#131722] border border-[#222B3D] rounded-xl overflow-hidden shadow-xl animate-in fade-in zoom-in-95 duration-500",children:[d.jsxs("div",{className:"p-4 border-b border-[#1E2738] flex items-center",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${o} mr-3 shadow-[0_0_8px_currentColor]`}),d.jsx("h3",{className:"font-black text-lg tracking-wider text-[#E2E8F0] uppercase",children:i})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[d.jsx("thead",{className:"text-xs text-[#8B9BB4] uppercase bg-[#181D2B] border-b border-[#222B3D]",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 font-semibold w-12 text-center border-l-4 border-transparent",children:"#"}),d.jsx("th",{className:"px-4 py-3 font-semibold",children:"PLAYER"}),d.jsx("th",{className:"px-3 py-3 font-semibold text-center",children:"MP"}),d.jsx("th",{className:"px-3 py-3 font-semibold text-center",children:"W-L"}),d.jsx("th",{className:"px-3 py-3 font-semibold text-center",children:"GF"}),d.jsx("th",{className:"px-3 py-3 font-semibold text-center",children:"GA"}),d.jsx("th",{className:"px-3 py-3 font-semibold text-center",children:"GD"}),d.jsx("th",{className:"px-4 py-3 font-black text-white text-center",children:"PTS"})]})}),d.jsx("tbody",{className:"bg-[#0a0b10]/50 divide-y divide-[#1E2738]",children:r.map((a,l)=>{let u="border-l-4 border-l-transparent";return s?l<2?u="border-l-4 border-l-[#10B981]":u="border-l-4 border-l-[#EF4444]":l<2?u="border-l-4 border-l-[#10B981]":l===2&&(u="border-l-4 border-l-[#F59E0B]"),d.jsxs("tr",{className:"hover:bg-[#1A2234] transition-colors group",children:[d.jsx("td",{className:`px-4 py-4 font-bold text-[#8B9BB4] text-center ${u}`,children:l+1}),d.jsx("td",{className:"px-4 py-4 min-w-[200px]",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Pi,{name:a.name,className:"w-8 h-8 text-xs"}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-[#E2E8F0] text-[15px]",children:a.name}),s&&d.jsxs("span",{className:"text-[10px] text-[#64748B] font-bold tracking-widest uppercase mt-0.5",children:["GROUP ",a.group]})]})]})}),d.jsx("td",{className:"px-3 py-4 text-center text-[#94A3B8] font-medium",children:a.played}),d.jsxs("td",{className:"px-3 py-4 text-center text-[#94A3B8] font-medium whitespace-nowrap",children:[a.w,"-",a.l]}),d.jsx("td",{className:"px-3 py-4 text-center text-[#94A3B8] font-mono",children:a.gf}),d.jsx("td",{className:"px-3 py-4 text-center text-[#94A3B8] font-mono",children:a.ga}),d.jsx("td",{className:`px-3 py-4 text-center font-mono font-medium ${a.gd>0?"text-[#10B981]":a.gd<0?"text-[#EF4444]":"text-[#94A3B8]"}`,children:a.gd>0?`+${a.gd}`:a.gd}),d.jsx("td",{className:"px-4 py-4 text-center font-black text-[#6384FF] text-lg",children:a.pts})]},a.id)})})]})})]});return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[n(t.groups.A,"GROUP A",!1,"bg-[#3B82F6]"),n(t.groups.B,"GROUP B",!1,"bg-[#F59E0B]"),n(t.groups.C,"GROUP C",!1,"bg-[#10B981]"),n(t.thirds,"BEST THIRD-PLACE",!0,"bg-[#A855F7]")]}),d.jsxs("div",{className:"mt-16 border-t border-[#1E2738] pt-12",children:[d.jsxs("h2",{className:"text-2xl font-black flex items-center gap-3 mb-6 text-[#E2E8F0] tracking-tight",children:[d.jsx(xl,{className:"text-[#C084FC] w-7 h-7"})," QUALIFIED 8 (SEEDING)"]}),d.jsx("div",{className:"bg-[#131722] border border-[#2B2144] rounded-xl overflow-hidden shadow-[0_0_40px_rgba(168,85,247,0.05)]",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-[#1A1829] text-[#C084FC] text-xs uppercase font-bold border-b border-[#2B2144]",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4",children:"Seed"}),d.jsx("th",{className:"px-6 py-4",children:"Player"}),d.jsx("th",{className:"px-6 py-4 text-center",children:"Path"}),d.jsx("th",{className:"px-6 py-4 text-center",children:"PTS"}),d.jsx("th",{className:"px-6 py-4 text-center",children:"GD"}),d.jsx("th",{className:"px-6 py-4 text-center",children:"GF"})]})}),d.jsxs("tbody",{className:"divide-y divide-[#1E2738]",children:[t.qualified.map((r,i)=>d.jsxs("tr",{className:"hover:bg-[#1A2234] transition-colors",children:[d.jsxs("td",{className:"px-6 py-4 font-black text-lg text-[#64748B]",children:["#",i+1]}),d.jsx("td",{className:"px-6 py-4 font-bold text-base text-[#F8FAFC]",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Pi,{name:r.name,className:"w-7 h-7 text-[10px]"}),r.name]})}),d.jsx("td",{className:"px-6 py-4 text-center",children:d.jsx("span",{className:`text-[11px] font-bold px-3 py-1.5 rounded-md border ${r.seedType.includes("1")?"bg-[#F59E0B]/10 text-[#F59E0B] border-[#F59E0B]/20 shadow-[0_0_10px_rgba(245,158,11,0.2)]":r.seedType.includes("2")?"bg-[#94A3B8]/10 text-[#CBD5E1] border-[#94A3B8]/20":"bg-[#3B82F6]/10 text-[#60A5FA] border-[#3B82F6]/20 shadow-[0_0_10px_rgba(59,130,246,0.2)]"}`,children:r.seedType})}),d.jsx("td",{className:"px-6 py-4 text-center font-black text-[#E2E8F0] text-base",children:r.pts}),d.jsx("td",{className:"px-6 py-4 text-center font-mono font-medium text-[#94A3B8]",children:r.gd>0?`+${r.gd}`:r.gd}),d.jsx("td",{className:"px-6 py-4 text-center font-mono font-medium text-[#94A3B8]",children:r.gf})]},r.id)),t.qualified.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:"6",className:"text-center py-12 text-[#64748B] font-medium",children:"No matches played yet. Waiting for group stage results."})})]})]})})})]}),e&&e.length>0&&d.jsxs("div",{className:"mt-16 pt-12 border-t border-[#1E2738]",children:[d.jsxs("h2",{className:"text-2xl font-black flex items-center gap-3 mb-10 text-[#F8FAFC]",children:[d.jsx(ii,{className:"text-[#FBBF24] w-7 h-7"})," KNOCKOUT BRACKET"]}),d.jsxs("div",{className:"space-y-16",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-black tracking-widest uppercase mb-6 text-[#C084FC] flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-[#C084FC] shadow-[0_0_8px_currentColor]"})," Quarterfinals"]}),d.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:dn(e).filter(r=>r.id.startsWith("QF")).map((r,i)=>d.jsx(yi,{match:r,title:`Quarterfinal ${i+1}`,isAdmin:!1},r.id))})]}),dn(e).filter(r=>r.id.startsWith("SF")).length>0&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-black tracking-widest uppercase mb-6 text-[#F97316] flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-[#F97316] shadow-[0_0_8px_currentColor]"})," Semifinals"]}),d.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:dn(e).filter(r=>r.id.startsWith("SF")).map((r,i)=>d.jsx(yi,{match:r,title:`Semifinal ${i+1}`,isAdmin:!1},r.id))})]}),dn(e).find(r=>r.id.startsWith("F"))&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-black tracking-widest uppercase mb-6 text-[#FBBF24] flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-[#FBBF24] shadow-[0_0_8px_currentColor]"})," Grand Final"]}),d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"w-full max-w-lg",children:d.jsx(yi,{match:dn(e).find(r=>r.id.startsWith("F")),title:"Grand Final",isAdmin:!1})})})]})]})]})]})}function FT({data:t,updateData:e,isAdmin:n}){const[r,i]=de.useState("ALL"),[s,o]=de.useState("UPCOMING"),l=(r==="ALL"?t.matches:t.matches.filter(f=>f.groupId===r)).filter(f=>s==="UPCOMING"?!f.played:f.played),u=(f,w,x,C)=>{if(!n)return;const A=C===""?null:parseInt(C,10),v=t.matches.map(m=>m.id===f?{...m,[w]:{...m[w]||{},[x]:A}}:m);e({...t,matches:v})},h=f=>{if(!n)return;const w=t.matches.map(x=>x.id===f?{...x,played:!x.played}:x);e({...t,matches:w})},p=f=>{var w;return((w=t.players.find(x=>x.id===f))==null?void 0:w.name)||f};return d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 bg-[#0f141e] p-6 rounded-2xl border border-[#222B3D] shadow-xl",children:[d.jsxs("h2",{className:"text-3xl font-black flex items-center gap-3 text-[#E2E8F0]",children:[d.jsx(Va,{className:"text-[#10B981] w-8 h-8 drop-shadow-[0_0_12px_rgba(16,185,129,0.3)]"}),"MATCH RESULTS"]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[d.jsxs("div",{className:"flex bg-[#0a0b10] p-1.5 rounded-xl w-full sm:w-auto border border-[#1E2738] shadow-inner",children:[d.jsx("button",{onClick:()=>o("UPCOMING"),className:`flex-1 sm:flex-none px-6 py-2.5 text-xs tracking-widest uppercase font-black rounded-lg transition-all ${s==="UPCOMING"?"bg-[#10B981] text-white shadow-lg shadow-[#10B981]/20":"text-[#64748B] hover:text-[#94A3B8]"}`,children:"Upcoming"}),d.jsx("button",{onClick:()=>o("PLAYED"),className:`flex-1 sm:flex-none px-6 py-2.5 text-xs tracking-widest uppercase font-black rounded-lg transition-all ${s==="PLAYED"?"bg-[#3B82F6] text-white shadow-lg shadow-[#3B82F6]/20":"text-[#64748B] hover:text-[#94A3B8]"}`,children:"Played"})]}),d.jsx("div",{className:"flex bg-[#0a0b10] p-1.5 rounded-xl w-full sm:w-auto border border-[#1E2738] shadow-inner",children:["ALL","A","B","C"].map(f=>d.jsx("button",{onClick:()=>i(f),className:`flex-1 sm:flex-none px-5 py-2.5 text-xs tracking-widest uppercase font-black rounded-lg transition-all ${r===f?"bg-[#334155] text-white shadow":"text-[#64748B] hover:text-[#94A3B8]"}`,children:f==="ALL"?"ALL":`GR.${f}`},f))})]})]}),!n&&d.jsxs("div",{className:"bg-[#4770FF]/10 border border-[#4770FF]/20 text-[#6384FF] p-4 rounded-xl text-sm font-bold flex items-center gap-3 shadow-[0_4px_20px_rgba(71,112,255,0.05)]",children:[d.jsx(p_,{className:"w-5 h-5 flex-shrink-0"})," You are in view-only spectator mode. Admin login is required to input live match scores."]}),d.jsx("div",{className:"grid lg:grid-cols-2 gap-6",children:l.length===0?d.jsxs("div",{className:"col-span-full py-20 text-center text-[#64748B] bg-[#0f141e] rounded-2xl border border-dashed border-[#334155] flex flex-col items-center",children:[d.jsx(Va,{className:"w-12 h-12 mb-4 opacity-20"}),d.jsxs("p",{className:"font-bold text-lg",children:["No ",s.toLowerCase()," matches found for this filter."]})]}):l.map(f=>{const w=p(f.p1Id),x=p(f.p2Id),C=Sl(f),A=f.g1||{},v=f.g2||{},m=f.g3||{},_=A.p1!==void 0&&A.p1!==null&&A.p2!==void 0&&A.p2!==null,b=v.p1!==void 0&&v.p1!==null&&v.p2!==void 0&&v.p2!==null;let L=!1;if(_&&b){let $=(A.p1>A.p2?1:0)+(v.p1>v.p2?1:0),U=(A.p2>A.p1?1:0)+(v.p2>v.p1?1:0);$===1&&U===1&&(L=!0)}return d.jsxs("div",{className:`border rounded-2xl p-6 transition-all duration-300 ${f.played?"bg-[#131722] border-[#222B3D] shadow-lg":"bg-[#0f141e]/50 border-[#1E2738]/50 opacity-90 hover:opacity-100 hover:border-[#334155]"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-[#1E2738]",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-xs font-black tracking-widest bg-[#0a0b10] border border-[#222B3D] px-3 py-1.5 rounded-md text-[#94A3B8] shadow-inner",children:f.id}),d.jsxs("span",{className:"text-[11px] font-black tracking-widest text-[#6384FF] uppercase bg-[#6384FF]/10 px-2 py-1 rounded",children:["Group ",f.groupId]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-2xl font-black tracking-widest text-white drop-shadow-md",children:[C.p1Wins," ",d.jsx("span",{className:"text-[#64748B] mx-1",children:"-"})," ",C.p2Wins]}),n&&d.jsxs("button",{onClick:()=>h(f.id),className:`p-2 rounded-lg border flex items-center gap-2 text-[10px] uppercase font-black tracking-widest transition-all ${f.played?"bg-[#10B981]/20 border-[#10B981]/50 text-[#10B981] hover:bg-[#10B981]/30":"bg-[#1E293B] border-[#334155] text-[#94A3B8] hover:bg-[#334155] hover:text-white shadow-md"}`,children:[f.played?d.jsx(qs,{className:"w-4 h-4"}):d.jsx(wl,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:f.played?"OFFICIAL":"MARK DONE"})]}),!n&&f.played&&d.jsxs("span",{className:"text-[10px] tracking-widest text-[#10B981] font-black border border-[#10B981]/30 bg-[#10B981]/10 px-3 py-2 rounded-lg flex items-center gap-1.5 uppercase shadow-[0_0_15px_rgba(16,185,129,0.1)]",children:[d.jsx(qs,{className:"w-3.5 h-3.5"})," Official"]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2 w-1/3",children:[d.jsx(Pi,{name:w,className:"w-7 h-7 text-[10px] rounded-sm"}),d.jsx("span",{className:"font-bold text-sm text-[#E2E8F0] truncate",title:w,children:w})]}),d.jsx("span",{className:"text-[10px] font-black tracking-widest text-[#64748B] uppercase",children:"VS"}),d.jsxs("div",{className:"flex items-center justify-end gap-2 w-1/3",children:[d.jsx("span",{className:"font-bold text-sm text-[#E2E8F0] truncate text-right",title:x,children:x}),d.jsx(Pi,{name:x,className:"w-7 h-7 text-[10px] rounded-sm"})]})]}),d.jsx(vi,{game:"g1",label:"G1",match:f,p1Name:"",p2Name:"",onChange:u,isAdmin:n}),d.jsx(vi,{game:"g2",label:"G2",match:f,p1Name:"",p2Name:"",onChange:u,isAdmin:n}),(L||m.p1!==void 0&&m.p1!==null||n)&&d.jsx("div",{className:`transition-all duration-700 overflow-hidden ${L||m.p1!==void 0&&m.p1!==null||n?"opacity-100 max-h-32 mt-4":"opacity-0 max-h-0"}`,children:d.jsx(vi,{game:"g3",label:"G3",match:f,p1Name:"",p2Name:"",onChange:u,isAdmin:n})})]})]},f.id)})})]})}function jT(){return d.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 animate-in fade-in zoom-in-95 duration-500",children:[d.jsxs("div",{className:"text-center space-y-4 mb-12",children:[d.jsx("div",{className:"inline-flex items-center justify-center p-4 rounded-2xl bg-[#C084FC]/10 border border-[#C084FC]/20 text-[#C084FC] mb-2 shadow-[0_0_30px_rgba(192,132,252,0.15)]",children:d.jsx(f_,{className:"w-10 h-10"})}),d.jsx("h2",{className:"text-4xl font-black tracking-tight text-[#E2E8F0] uppercase",children:"Tournament Official Rules"}),d.jsx("p",{className:"text-[#8B9BB4] text-lg max-w-2xl mx-auto",children:"Please review the format, scoring system, and qualification criteria for the Pallet PES Tour."})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-[#131722] p-8 rounded-2xl border border-[#222B3D] shadow-xl hover:border-[#334155] transition-colors relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#10B981] opacity-[0.03] rounded-full blur-[40px] group-hover:opacity-[0.06] transition-opacity"}),d.jsxs("h3",{className:"text-xl font-black text-[#E2E8F0] mb-6 flex items-center gap-3 uppercase tracking-wider",children:[d.jsx("div",{className:"p-2 rounded-xl bg-[#10B981]/10 text-[#10B981] border border-[#10B981]/20",children:d.jsx(Va,{className:"w-6 h-6"})}),"Match Format"]}),d.jsxs("div",{className:"space-y-4 text-[#94A3B8]",children:[d.jsxs("p",{className:"font-medium text-[#CBD5E1]",children:["Every matchup is a ",d.jsx("strong",{className:"text-white",children:"Best-of-3 series"}),". The first player to win 2 games wins the series."]}),d.jsxs("ul",{className:"space-y-3",children:[d.jsxs("li",{className:"flex gap-3",children:[d.jsx("span",{className:"text-[#10B981] font-bold mt-0.5",children:""}),d.jsx("span",{children:'Each "game" is a full eFootball match.'})]}),d.jsxs("li",{className:"flex gap-3",children:[d.jsx("span",{className:"text-[#10B981] font-bold mt-0.5",children:""}),d.jsx("span",{children:"The series ends immediately if a player wins the first 2 games (2-0)."})]}),d.jsxs("li",{className:"flex gap-3",children:[d.jsx("span",{className:"text-[#10B981] font-bold mt-0.5",children:""}),d.jsx("span",{children:"Game 3 is only played if the series is tied 1-1."})]}),d.jsxs("li",{className:"flex gap-3",children:[d.jsx("span",{className:"text-[#10B981] font-bold mt-0.5",children:""}),d.jsx("span",{children:"Goals from all games count towards overall Goal Difference."})]})]})]})]}),d.jsxs("div",{className:"bg-[#131722] p-8 rounded-2xl border border-[#222B3D] shadow-xl hover:border-[#334155] transition-colors relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#F59E0B] opacity-[0.03] rounded-full blur-[40px] group-hover:opacity-[0.06] transition-opacity"}),d.jsxs("h3",{className:"text-xl font-black text-[#E2E8F0] mb-6 flex items-center gap-3 uppercase tracking-wider",children:[d.jsx("div",{className:"p-2 rounded-xl bg-[#F59E0B]/10 text-[#F59E0B] border border-[#F59E0B]/20",children:d.jsx(d_,{className:"w-6 h-6"})}),"Points System"]}),d.jsx("div",{className:"bg-[#0a0b10] rounded-xl border border-[#1E2738] p-2 mt-2",children:d.jsxs("ul",{className:"divide-y divide-[#1E2738]",children:[d.jsxs("li",{className:"flex justify-between items-center p-4",children:[d.jsxs("span",{className:"text-[#E2E8F0] font-medium",children:["Win Series ",d.jsx("strong",{className:"text-white bg-[#334155] px-2 py-0.5 rounded ml-2",children:"2 - 0"})]}),d.jsx("span",{className:"text-[#10B981] font-black tracking-widest",children:"+3 PTS"})]}),d.jsxs("li",{className:"flex justify-between items-center p-4",children:[d.jsxs("span",{className:"text-[#E2E8F0] font-medium",children:["Win Series ",d.jsx("strong",{className:"text-white bg-[#334155] px-2 py-0.5 rounded ml-2",children:"2 - 1"})]}),d.jsx("span",{className:"text-[#10B981] font-black tracking-widest",children:"+2 PTS"})]}),d.jsxs("li",{className:"flex justify-between items-center p-4 bg-[#1A2234]",children:[d.jsxs("span",{className:"text-[#E2E8F0] font-medium",children:["Lose Series ",d.jsx("strong",{className:"text-[#94A3B8] bg-[#0a0b10] px-2 py-0.5 rounded ml-2 border border-[#334155]",children:"1 - 2"})]}),d.jsx("span",{className:"text-[#F59E0B] font-black tracking-widest",children:"+1 PTS"})]}),d.jsxs("li",{className:"flex justify-between items-center p-4 opacity-75",children:[d.jsxs("span",{className:"text-[#94A3B8] font-medium",children:["Lose Series ",d.jsx("strong",{className:"text-[#64748B] bg-[#0a0b10] px-2 py-0.5 rounded ml-2 border border-[#1E2738]",children:"0 - 2"})]}),d.jsx("span",{className:"text-[#64748B] font-black tracking-widest",children:"0 PTS"})]})]})})]}),d.jsxs("div",{className:"md:col-span-2 bg-[#131722] p-8 rounded-2xl border border-[#222B3D] shadow-xl hover:border-[#334155] transition-colors relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#6384FF] opacity-[0.03] rounded-full blur-[60px] group-hover:opacity-[0.05] transition-opacity"}),d.jsxs("h3",{className:"text-xl font-black text-[#E2E8F0] mb-6 flex items-center gap-3 uppercase tracking-wider",children:[d.jsx("div",{className:"p-2 rounded-xl bg-[#6384FF]/10 text-[#6384FF] border border-[#6384FF]/20",children:d.jsx(xl,{className:"w-6 h-6"})}),"Qualification & Tiebreakers"]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 pt-2",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("p",{className:"font-bold text-[#E2E8F0] text-lg border-b border-[#222B3D] pb-3",children:[d.jsx("span",{className:"text-[#6384FF]",children:"8 out of 12"})," players advance to the Knockout Stage:"]}),d.jsxs("ul",{className:"space-y-4 text-[#94A3B8]",children:[d.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-[#0a0b10] border border-[#1E2738]",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#3B82F6]/20 text-[#60A5FA] flex items-center justify-center font-black flex-shrink-0",children:"1"}),d.jsxs("p",{children:["The ",d.jsx("strong",{className:"text-white",children:"Top 2"})," from each group automatically qualify."]})]}),d.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-[#0a0b10] border border-[#1E2738]",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#A855F7]/20 text-[#C084FC] flex items-center justify-center font-black flex-shrink-0",children:"2"}),d.jsxs("p",{children:["The ",d.jsx("strong",{className:"text-white",children:"Best 2 Third-Place"})," finishers across all groups also advance."]})]})]})]}),d.jsxs("div",{className:"space-y-4 md:border-l md:border-[#1E2738] md:pl-8",children:[d.jsx("p",{className:"font-bold text-[#E2E8F0] text-lg border-b border-[#222B3D] pb-3",children:"Tiebreaker Order:"}),d.jsxs("ol",{className:"space-y-3",children:[d.jsxs("li",{className:"flex items-center gap-3 text-[#CBD5E1]",children:[d.jsx("span",{className:"text-[#64748B] font-mono font-bold",children:"1."}),d.jsx("span",{className:"font-bold text-white uppercase tracking-widest text-sm",children:"Total Points (PTS)"})]}),d.jsxs("li",{className:"flex items-center gap-3 text-[#94A3B8]",children:[d.jsx("span",{className:"text-[#64748B] font-mono font-bold",children:"2."}),d.jsx("span",{children:"Goal Difference (GD)"})]}),d.jsxs("li",{className:"flex items-center gap-3 text-[#94A3B8]",children:[d.jsx("span",{className:"text-[#64748B] font-mono font-bold",children:"3."}),d.jsx("span",{children:"Goals For (GF)"})]}),d.jsxs("li",{className:"flex items-center gap-3 text-[#94A3B8]",children:[d.jsx("span",{className:"text-[#64748B] font-mono font-bold",children:"4."}),d.jsx("span",{children:"Alphabetical Order"})]})]})]})]})]})]})]})}var w_={exports:{}};(function(t){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function e(g,c){if(!g)throw"First parameter is required.";c=c||{type:"video"},c=new n(g,c);var y=this;function k(N){return c.disableLogs||console.log("RecordRTC version: ",y.version),N&&(c=new n(g,N)),c.disableLogs||console.log("started recording "+c.type+" stream."),F?(F.clearRecordedData(),F.record(),H("recording"),y.recordingDuration&&D(),y):(T(function(){y.recordingDuration&&D()}),y)}function T(N){N&&(c.initCallback=function(){N(),N=c.initCallback=null});var V=new r(g,c);F=new V(g,c),F.record(),H("recording"),c.disableLogs||console.log("Initialized recorderType:",F.constructor.name,"for output-type:",c.type)}function I(N){if(N=N||function(){},!F){W();return}if(y.state==="paused"){y.resumeRecording(),setTimeout(function(){I(N)},1);return}y.state!=="recording"&&!c.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',y.state),c.disableLogs||console.log("Stopped recording "+c.type+" stream."),c.type!=="gif"?F.stop(V):(F.stop(),V()),H("stopped");function V(J){if(!F){typeof N.call=="function"?N.call(y,""):N("");return}Object.keys(F).forEach(function(Q){typeof F[Q]!="function"&&(y[Q]=F[Q])});var E=F.blob;if(!E)if(J)F.blob=E=J;else throw"Recording failed.";if(E&&!c.disableLogs&&console.log(E.type,"->",v(E.size)),N){var P;try{P=h.createObjectURL(E)}catch{}typeof N.call=="function"?N.call(y,P):N(P)}c.autoWriteToDisk&&G(function(Q){var X={};X[c.type+"Blob"]=Q,Re.Store(X)})}}function R(){if(!F){W();return}if(y.state!=="recording"){c.disableLogs||console.warn("Unable to pause the recording. Recording state: ",y.state);return}H("paused"),F.pause(),c.disableLogs||console.log("Paused recording.")}function S(){if(!F){W();return}if(y.state!=="paused"){c.disableLogs||console.warn("Unable to resume the recording. Recording state: ",y.state);return}H("recording"),F.resume(),c.disableLogs||console.log("Resumed recording.")}function j(N){postMessage(new FileReaderSync().readAsDataURL(N))}function G(N,V){if(!N)throw"Pass a callback function over getDataURL.";var J=V?V.blob:(F||{}).blob;if(!J){c.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){G(N,V)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var E=Q(j);E.onmessage=function(X){N(X.data)},E.postMessage(J)}else{var P=new FileReader;P.readAsDataURL(J),P.onload=function(X){N(X.target.result)}}function Q(X){try{var he=h.createObjectURL(new Blob([X.toString(),"this.onmessage =  function (eee) {"+X.name+"(eee.data);}"],{type:"application/javascript"})),ae=new Worker(he);return h.revokeObjectURL(he),ae}catch{}}}function D(N){if(N=N||0,y.state==="paused"){setTimeout(function(){D(N)},1e3);return}if(y.state!=="stopped"){if(N>=y.recordingDuration){I(y.onRecordingStopped);return}N+=1e3,setTimeout(function(){D(N)},1e3)}}function H(N){y&&(y.state=N,typeof y.onStateChanged.call=="function"?y.onStateChanged.call(y,N):y.onStateChanged(N))}var B='It seems that recorder is destroyed or "startRecording" is not invoked for '+c.type+" recorder.";function W(){c.disableLogs!==!0&&console.warn(B)}var F,Z={startRecording:k,stopRecording:I,pauseRecording:R,resumeRecording:S,initRecorder:T,setRecordingDuration:function(N,V){if(typeof N>"u")throw"recordingDuration is required.";if(typeof N!="number")throw"recordingDuration must be a number.";return y.recordingDuration=N,y.onRecordingStopped=V||function(){},{onRecordingStopped:function(J){y.onRecordingStopped=J}}},clearRecordedData:function(){if(!F){W();return}F.clearRecordedData(),c.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!F){W();return}return F.blob},getDataURL:G,toURL:function(){if(!F){W();return}return h.createObjectURL(F.blob)},getInternalRecorder:function(){return F},save:function(N){if(!F){W();return}m(F.blob,N)},getFromDisk:function(N){if(!F){W();return}e.getFromDisk(c.type,N)},setAdvertisementArray:function(N){c.advertisement=[];for(var V=N.length,J=0;J<V;J++)c.advertisement.push({duration:J,image:N[J]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){y.state==="recording"&&!c.disableLogs&&console.warn("Stop an active recorder."),F&&typeof F.clearRecordedData=="function"&&F.clearRecordedData(),F=null,H("inactive"),y.blob=null},onStateChanged:function(N){c.disableLogs||console.log("Recorder state changed:",N)},state:"inactive",getState:function(){return y.state},destroy:function(){var N=c.disableLogs;c={disableLogs:!0},y.reset(),H("destroyed"),Z=y=null,U.AudioContextConstructor&&(U.AudioContextConstructor.close(),U.AudioContextConstructor=null),c.disableLogs=N,c.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return y=Z,Z;for(var ce in Z)this[ce]=Z[ce];return y=this,Z}e.version="5.6.2",t.exports=e,e.getFromDisk=function(g,c){if(!c)throw"callback is mandatory.";console.log("Getting recorded "+(g==="all"?"blobs":g+" blob ")+" from disk!"),Re.Fetch(function(y,k){g!=="all"&&k===g+"Blob"&&c&&c(y),g==="all"&&c&&c(y,k.replace("Blob",""))})},e.writeToDisk=function(g){console.log("Writing recorded blob(s) to disk!"),g=g||{},g.audio&&g.video&&g.gif?g.audio.getDataURL(function(c){g.video.getDataURL(function(y){g.gif.getDataURL(function(k){Re.Store({audioBlob:c,videoBlob:y,gifBlob:k})})})}):g.audio&&g.video?g.audio.getDataURL(function(c){g.video.getDataURL(function(y){Re.Store({audioBlob:c,videoBlob:y})})}):g.audio&&g.gif?g.audio.getDataURL(function(c){g.gif.getDataURL(function(y){Re.Store({audioBlob:c,gifBlob:y})})}):g.video&&g.gif?g.video.getDataURL(function(c){g.gif.getDataURL(function(y){Re.Store({videoBlob:c,gifBlob:y})})}):g.audio?g.audio.getDataURL(function(c){Re.Store({audioBlob:c})}):g.video?g.video.getDataURL(function(c){Re.Store({videoBlob:c})}):g.gif&&g.gif.getDataURL(function(c){Re.Store({gifBlob:c})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(g,c){return!c.recorderType&&!c.type&&(c.audio&&c.video?c.type="video":c.audio&&!c.video&&(c.type="audio")),c.recorderType&&!c.type&&(c.recorderType===xe||c.recorderType===oe||typeof Y<"u"&&c.recorderType===Y?c.type="video":c.recorderType===Qt?c.type="gif":c.recorderType===ne?c.type="audio":c.recorderType===re&&(b(g,"audio").length&&b(g,"video").length||!b(g,"audio").length&&b(g,"video").length?c.type="video":b(g,"audio").length&&!b(g,"video").length&&(c.type="audio"))),typeof re<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(c.mimeType||(c.mimeType="video/webm"),c.type||(c.type=c.mimeType.split("/")[0]),c.bitsPerSecond),c.type||(c.mimeType&&(c.type=c.mimeType.split("/")[0]),c.type||(c.type="audio")),c}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function r(g,c){var y;return(x||p||f)&&(y=ne),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!x&&(y=re),c.type==="video"&&(x||f)&&(y=xe,typeof Y<"u"&&typeof ReadableStream<"u"&&(y=Y)),c.type==="gif"&&(y=Qt),c.type==="canvas"&&(y=oe),q()&&y!==oe&&y!==Qt&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(b(g,"video").length||b(g,"audio").length)&&(c.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(y=re):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(y=re)),g instanceof Array&&g.length&&(y=On),c.recorderType&&(y=c.recorderType),!c.disableLogs&&y&&y.name&&console.log("Using recorderType:",y.name||y.constructor.name),!y&&C&&(y=re),y}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function i(g){this.addStream=function(c){c&&(g=c)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var c=this.mediaType,y,k=this.mimeType||{audio:null,video:null,gif:null};if(typeof c.audio!="function"&&q()&&!b(g,"audio").length&&(c.audio=!1),typeof c.video!="function"&&q()&&!b(g,"video").length&&(c.video=!1),typeof c.gif!="function"&&q()&&!b(g,"video").length&&(c.gif=!1),!c.audio&&!c.video&&!c.gif)throw"MediaStream must have either audio or video tracks.";if(c.audio&&(y=null,typeof c.audio=="function"&&(y=c.audio),this.audioRecorder=new e(g,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:y,mimeType:k.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),c.video||this.audioRecorder.startRecording()),c.video){y=null,typeof c.video=="function"&&(y=c.video);var T=g;if(q()&&c.audio&&typeof c.audio=="function"){var I=b(g,"video")[0];w?(T=new A,T.addTrack(I),y&&y===xe&&(y=re)):(T=new A,T.addTrack(I))}this.videoRecorder=new e(T,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:y,mimeType:k.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),c.audio||this.videoRecorder.startRecording()}if(c.audio&&c.video){var R=this,S=q()===!0;(c.audio instanceof ne&&c.video||c.audio!==!0&&c.video!==!0&&c.audio!==c.video)&&(S=!1),S===!0?(R.audioRecorder=null,R.videoRecorder.startRecording()):R.videoRecorder.initRecorder(function(){R.audioRecorder.initRecorder(function(){R.videoRecorder.startRecording(),R.audioRecorder.startRecording()})})}c.gif&&(y=null,typeof c.gif=="function"&&(y=c.gif),this.gifRecorder=new e(g,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:y,mimeType:k.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(c){c=c||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(y){c(y,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(y){c(y,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(y){c(y,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(c){var y={};return this.audioRecorder&&(y.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(y.video=this.videoRecorder.getBlob()),this.gifRecorder&&(y.gif=this.gifRecorder.getBlob()),c&&c(y),y},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(c){this.getBlob(function(T){T.audio&&T.video?y(T.audio,function(I){y(T.video,function(R){c({audio:I,video:R})})}):T.audio?y(T.audio,function(I){c({audio:I})}):T.video&&y(T.video,function(I){c({video:I})})});function y(T,I){if(typeof Worker<"u"){var R=k(function(G){postMessage(new FileReaderSync().readAsDataURL(G))});R.onmessage=function(j){I(j.data)},R.postMessage(T)}else{var S=new FileReader;S.readAsDataURL(T),S.onload=function(j){I(j.target.result)}}}function k(T){var I=h.createObjectURL(new Blob([T.toString(),"this.onmessage =  function (eee) {"+T.name+"(eee.data);}"],{type:"application/javascript"})),R=new Worker(I),S;if(typeof h<"u")S=h;else if(typeof webkitURL<"u")S=webkitURL;else throw"Neither URL nor webkitURL detected.";return S.revokeObjectURL(I),R}},this.writeToDisk=function(){e.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(c){c=c||{audio:!0,video:!0,gif:!0},c.audio&&this.audioRecorder&&this.audioRecorder.save(typeof c.audio=="string"?c.audio:""),c.video&&this.videoRecorder&&this.videoRecorder.save(typeof c.video=="string"?c.video:""),c.gif&&this.gifRecorder&&this.gifRecorder.save(typeof c.gif=="string"?c.gif:"")}}i.getFromDisk=e.getFromDisk,i.writeToDisk=e.writeToDisk,typeof e<"u"&&(e.MRecordRTC=i);var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(g){g&&(typeof window<"u"||typeof be>"u"||(be.navigator={userAgent:s,getUserMedia:function(){}},be.console||(be.console={}),(typeof be.console.log>"u"||typeof be.console.error>"u")&&(be.console.error=be.console.log=be.console.log||function(){console.log(arguments)}),typeof document>"u"&&(g.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var c={getContext:function(){return c},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return c},g.HTMLVideoElement=function(){}),typeof location>"u"&&(g.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(g.screen={width:0,height:0}),typeof h>"u"&&(g.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),g.window=be))})(typeof be<"u"?be:null);var o=window.requestAnimationFrame;if(typeof o>"u"){if(typeof webkitRequestAnimationFrame<"u")o=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")o=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")o=msRequestAnimationFrame;else if(typeof o>"u"){var a=0;o=function(g,c){var y=new Date().getTime(),k=Math.max(0,16-(y-a)),T=setTimeout(function(){g(y+k)},k);return a=y+k,T}}}var l=window.cancelAnimationFrame;typeof l>"u"&&(typeof webkitCancelAnimationFrame<"u"?l=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?l=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?l=msCancelAnimationFrame:typeof l>"u"&&(l=function(g){clearTimeout(g)}));var u=window.AudioContext;typeof u>"u"&&(typeof webkitAudioContext<"u"&&(u=webkitAudioContext),typeof mozAudioContext<"u"&&(u=mozAudioContext));var h=window.URL;typeof h>"u"&&typeof webkitURL<"u"&&(h=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var p=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),f=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,w=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),x=!f&&!p&&!!navigator.webkitGetUserMedia||_()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,C=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);C&&!x&&navigator.userAgent.indexOf("CriOS")!==-1&&(C=!1,x=!0);var A=window.MediaStream;typeof A>"u"&&typeof webkitMediaStream<"u"&&(A=webkitMediaStream),typeof A<"u"&&typeof A.prototype.stop>"u"&&(A.prototype.stop=function(){this.getTracks().forEach(function(g){g.stop()})});function v(g){var c=1e3,y=["Bytes","KB","MB","GB","TB"];if(g===0)return"0 Bytes";var k=parseInt(Math.floor(Math.log(g)/Math.log(c)),10);return(g/Math.pow(c,k)).toPrecision(3)+" "+y[k]}function m(g,c){if(!g)throw"Blob object is required.";if(!g.type)try{g.type="video/webm"}catch{}var y=(g.type||"video/webm").split("/")[1];if(y.indexOf(";")!==-1&&(y=y.split(";")[0]),c&&c.indexOf(".")!==-1){var k=c.split(".");c=k[0],y=k[1]}var T=(c||Math.round(Math.random()*9999999999)+888888888)+"."+y;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(g,T);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(g,T);var I=document.createElement("a");I.href=h.createObjectURL(g),I.download=T,I.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(I),typeof I.click=="function"?I.click():(I.target="_blank",I.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),h.revokeObjectURL(I.href)}function _(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function b(g,c){return!g||!g.getTracks?[]:g.getTracks().filter(function(y){return y.kind===(c||"audio")})}function L(g,c){"srcObject"in c?c.srcObject=g:"mozSrcObject"in c?c.mozSrcObject=g:c.srcObject=g}function $(g,c){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var y=new EBML.Reader,k=new EBML.Decoder,T=EBML.tools,I=new FileReader;I.onload=function(R){var S=k.decode(this.result);S.forEach(function(H){y.read(H)}),y.stop();var j=T.makeMetadataSeekable(y.metadatas,y.duration,y.cues),G=this.result.slice(y.metadataSize),D=new Blob([j,G],{type:"video/webm"});c(D)},I.readAsArrayBuffer(g)}typeof e<"u"&&(e.invokeSaveAsDialog=m,e.getTracks=b,e.getSeekableBlob=$,e.bytesToSize=v,e.isElectron=_);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var U={};typeof u<"u"?U.AudioContext=u:typeof webkitAudioContext<"u"&&(U.AudioContext=webkitAudioContext),typeof e<"u"&&(e.Storage=U);function q(){if(w||C||p)return!0;var g=navigator.userAgent,c=""+parseFloat(navigator.appVersion),y=parseInt(navigator.appVersion,10),k,T;return(x||f)&&(k=g.indexOf("Chrome"),c=g.substring(k+7)),(T=c.indexOf(";"))!==-1&&(c=c.substring(0,T)),(T=c.indexOf(" "))!==-1&&(c=c.substring(0,T)),y=parseInt(""+c,10),isNaN(y)&&(c=""+parseFloat(navigator.appVersion),y=parseInt(navigator.appVersion,10)),y>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function re(g,c){var D=this;if(typeof g>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(c=c||{mimeType:"video/webm"},c.type==="audio"){if(b(g,"video").length&&b(g,"audio").length){var y;navigator.mozGetUserMedia?(y=new A,y.addTrack(b(g,"audio")[0])):y=new A(b(g,"audio")),g=y}(!c.mimeType||c.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(c.mimeType=x?"audio/webm":"audio/ogg"),c.mimeType&&c.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(c.mimeType="audio/ogg")}var k=[];this.getArrayOfBlobs=function(){return k},this.record=function(){D.blob=null,D.clearRecordedData(),D.timestamps=[],G=[],k=[];var H=c;c.disableLogs||console.log("Passing following config over MediaRecorder API.",H),S&&(S=null),x&&!q()&&(H="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&H.mimeType&&(MediaRecorder.isTypeSupported(H.mimeType)||(c.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",H.mimeType),H.mimeType=c.type==="audio"?"audio/webm":"video/webm"));try{S=new MediaRecorder(g,H),c.mimeType=H.mimeType}catch{S=new MediaRecorder(g)}H.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in S&&S.canRecordMimeType(H.mimeType)===!1&&(c.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",H.mimeType)),S.ondataavailable=function(B){if(B.data&&G.push("ondataavailable: "+v(B.data.size)),typeof c.timeSlice=="number"){if(B.data&&B.data.size&&(k.push(B.data),T(),typeof c.ondataavailable=="function")){var W=c.getNativeBlob?B.data:new Blob([B.data],{type:I(H)});c.ondataavailable(W)}return}if(!B.data||!B.data.size||B.data.size<100||D.blob){D.recordingCallback&&(D.recordingCallback(new Blob([],{type:I(H)})),D.recordingCallback=null);return}D.blob=c.getNativeBlob?B.data:new Blob([B.data],{type:I(H)}),D.recordingCallback&&(D.recordingCallback(D.blob),D.recordingCallback=null)},S.onstart=function(){G.push("started")},S.onpause=function(){G.push("paused")},S.onresume=function(){G.push("resumed")},S.onstop=function(){G.push("stopped")},S.onerror=function(B){B&&(B.name||(B.name="UnknownError"),G.push("error: "+B),c.disableLogs||(B.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",B):B.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",H.mimeType,") is not supported.",B):B.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",B):B.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",B):B.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",B):B.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",B):B.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",B):console.error("MediaRecorder Error",B)),function(W){if(!D.manuallyStopped&&S&&S.state==="inactive"){delete c.timeslice,S.start(10*60*1e3);return}setTimeout(W,1e3)}(),S.state!=="inactive"&&S.state!=="stopped"&&S.stop())},typeof c.timeSlice=="number"?(T(),S.start(c.timeSlice)):S.start(36e5),c.initCallback&&c.initCallback()},this.timestamps=[];function T(){D.timestamps.push(new Date().getTime()),typeof c.onTimeStamp=="function"&&c.onTimeStamp(D.timestamps[D.timestamps.length-1],D.timestamps)}function I(H){return S&&S.mimeType?S.mimeType:H.mimeType||"video/webm"}this.stop=function(H){H=H||function(){},D.manuallyStopped=!0,S&&(this.recordingCallback=H,S.state==="recording"&&S.stop(),typeof c.timeSlice=="number"&&setTimeout(function(){D.blob=new Blob(k,{type:I(c)}),D.recordingCallback(D.blob)},100))},this.pause=function(){S&&S.state==="recording"&&S.pause()},this.resume=function(){S&&S.state==="paused"&&S.resume()},this.clearRecordedData=function(){S&&S.state==="recording"&&D.stop(R),R()};function R(){k=[],S=null,D.timestamps=[]}var S;this.getInternalRecorder=function(){return S};function j(){if("active"in g){if(!g.active)return!1}else if("ended"in g&&g.ended)return!1;return!0}this.blob=null,this.getState=function(){return S&&S.state||"inactive"};var G=[];this.getAllStates=function(){return G},typeof c.checkForInactiveTracks>"u"&&(c.checkForInactiveTracks=!1);var D=this;(function H(){if(!(!S||c.checkForInactiveTracks===!1)){if(j()===!1){c.disableLogs||console.log("MediaStream seems stopped."),D.stop();return}setTimeout(H,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MediaStreamRecorder=re);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function ne(g,c){if(!b(g,"audio").length)throw"Your stream has no audio tracks.";c=c||{};var y=this,k=[],T=[],I=!1,R=0,S,j=2,G=c.desiredSampRate;c.leftChannel===!0&&(j=1),c.numberOfAudioChannels===1&&(j=1),(!j||j<1)&&(j=2),c.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+j),typeof c.checkForInactiveTracks>"u"&&(c.checkForInactiveTracks=!0);function D(){if(c.checkForInactiveTracks===!1)return!0;if("active"in g){if(!g.active)return!1}else if("ended"in g&&g.ended)return!1;return!0}this.record=function(){if(D()===!1)throw"Please make sure MediaStream is active.";J(),P=V=!1,I=!0,typeof c.timeSlice<"u"&&he()};function H(ae,Ge){function Xe(Le,Wi){var Lt=Le.numberOfAudioChannels,_t=Le.leftBuffers.slice(0),on=Le.rightBuffers.slice(0),kt=Le.sampleRate,an=Le.internalInterleavedLength,Ft=Le.desiredSampRate;Lt===2&&(_t=Cl(_t,an),on=Cl(on,an),Ft&&(_t=Vi(_t,Ft,kt),on=Vi(on,Ft,kt))),Lt===1&&(_t=Cl(_t,an),Ft&&(_t=Vi(_t,Ft,kt))),Ft&&(kt=Ft);function Vi(Ue,Yt,Tt){var It=Math.round(Ue.length*(Yt/Tt)),it=[],ln=Number((Ue.length-1)/(It-1));it[0]=Ue[0];for(var mr=1;mr<It-1;mr++){var kl=mr*ln,wf=Number(Math.floor(kl)).toFixed(),k_=Number(Math.ceil(kl)).toFixed(),T_=kl-wf;it[mr]=x_(Ue[wf],Ue[k_],T_)}return it[It-1]=Ue[Ue.length-1],it}function x_(Ue,Yt,Tt){return Ue+(Yt-Ue)*Tt}function Cl(Ue,Yt){for(var Tt=new Float64Array(Yt),It=0,it=Ue.length,ln=0;ln<it;ln++){var mr=Ue[ln];Tt.set(mr,It),It+=mr.length}return Tt}function S_(Ue,Yt){for(var Tt=Ue.length+Yt.length,It=new Float64Array(Tt),it=0,ln=0;ln<Tt;)It[ln++]=Ue[it],It[ln++]=Yt[it],it++;return It}function lo(Ue,Yt,Tt){for(var It=Tt.length,it=0;it<It;it++)Ue.setUint8(Yt+it,Tt.charCodeAt(it))}var uo;Lt===2&&(uo=S_(_t,on)),Lt===1&&(uo=_t);var co=uo.length,C_=44+co*2,El=new ArrayBuffer(C_),Je=new DataView(El);lo(Je,0,"RIFF"),Je.setUint32(4,36+co*2,!0),lo(Je,8,"WAVE"),lo(Je,12,"fmt "),Je.setUint32(16,16,!0),Je.setUint16(20,1,!0),Je.setUint16(22,Lt,!0),Je.setUint32(24,kt,!0),Je.setUint32(28,kt*Lt*2,!0),Je.setUint16(32,Lt*2,!0),Je.setUint16(34,16,!0),lo(Je,36,"data"),Je.setUint32(40,co*2,!0);for(var E_=co,_f=44,b_=1,bl=0;bl<E_;bl++)Je.setInt16(_f,uo[bl]*(32767*b_),!0),_f+=2;if(Wi)return Wi({buffer:El,view:Je});postMessage({buffer:El,view:Je})}if(ae.noWorker){Xe(ae,function(Le){Ge(Le.buffer,Le.view)});return}var sn=B(Xe);sn.onmessage=function(Le){Ge(Le.data.buffer,Le.data.view),h.revokeObjectURL(sn.workerURL),sn.terminate()},sn.postMessage(ae)}function B(ae){var Ge=h.createObjectURL(new Blob([ae.toString(),";this.onmessage =  function (eee) {"+ae.name+"(eee.data);}"],{type:"application/javascript"})),Xe=new Worker(Ge);return Xe.workerURL=Ge,Xe}this.stop=function(ae){ae=ae||function(){},I=!1,H({desiredSampRate:G,sampleRate:N,numberOfAudioChannels:j,internalInterleavedLength:R,leftBuffers:k,rightBuffers:j===1?[]:T,noWorker:c.noWorker},function(Ge,Xe){y.blob=new Blob([Xe],{type:"audio/wav"}),y.buffer=new ArrayBuffer(Xe.buffer.byteLength),y.view=Xe,y.sampleRate=G||N,y.bufferSize=ce,y.length=R,P=!1,ae&&ae(y.blob)})},typeof e.Storage>"u"&&(e.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!e.Storage.AudioContextConstructor||e.Storage.AudioContextConstructor.state==="closed")&&(e.Storage.AudioContextConstructor=new e.Storage.AudioContext);var W=e.Storage.AudioContextConstructor,F=W.createMediaStreamSource(g),Z=[0,256,512,1024,2048,4096,8192,16384],ce=typeof c.bufferSize>"u"?4096:c.bufferSize;if(Z.indexOf(ce)===-1&&(c.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(Z,null,"	"))),W.createJavaScriptNode)S=W.createJavaScriptNode(ce,j,j);else if(W.createScriptProcessor)S=W.createScriptProcessor(ce,j,j);else throw"WebAudio API has no support on this browser.";F.connect(S),c.bufferSize||(ce=S.bufferSize);var N=typeof c.sampleRate<"u"?c.sampleRate:W.sampleRate||44100;(N<22050||N>96e3)&&(c.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),c.disableLogs||c.desiredSampRate&&console.log("Desired sample-rate: "+c.desiredSampRate);var V=!1;this.pause=function(){V=!0},this.resume=function(){if(D()===!1)throw"Please make sure MediaStream is active.";if(!I){c.disableLogs||console.log("Seems recording has been restarted."),this.record();return}V=!1},this.clearRecordedData=function(){c.checkForInactiveTracks=!1,I&&this.stop(E),E()};function J(){k=[],T=[],R=0,P=!1,I=!1,V=!1,W=null,y.leftchannel=k,y.rightchannel=T,y.numberOfAudioChannels=j,y.desiredSampRate=G,y.sampleRate=N,y.recordingLength=R,X={left:[],right:[],recordingLength:0}}function E(){S&&(S.onaudioprocess=null,S.disconnect(),S=null),F&&(F.disconnect(),F=null),J()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var P=!1;function Q(ae){if(!V){if(D()===!1&&(c.disableLogs||console.log("MediaStream seems stopped."),S.disconnect(),I=!1),!I){F&&(F.disconnect(),F=null);return}P||(P=!0,c.onAudioProcessStarted&&c.onAudioProcessStarted(),c.initCallback&&c.initCallback());var Ge=ae.inputBuffer.getChannelData(0),Xe=new Float32Array(Ge);if(k.push(Xe),j===2){var sn=ae.inputBuffer.getChannelData(1),Le=new Float32Array(sn);T.push(Le)}R+=ce,y.recordingLength=R,typeof c.timeSlice<"u"&&(X.recordingLength+=ce,X.left.push(Xe),j===2&&X.right.push(Le))}}S.onaudioprocess=Q,W.createMediaStreamDestination?S.connect(W.createMediaStreamDestination()):S.connect(W.destination),this.leftchannel=k,this.rightchannel=T,this.numberOfAudioChannels=j,this.desiredSampRate=G,this.sampleRate=N,y.recordingLength=R;var X={left:[],right:[],recordingLength:0};function he(){!I||typeof c.ondataavailable!="function"||typeof c.timeSlice>"u"||(X.left.length?(H({desiredSampRate:G,sampleRate:N,numberOfAudioChannels:j,internalInterleavedLength:X.recordingLength,leftBuffers:X.left,rightBuffers:j===1?[]:X.right},function(ae,Ge){var Xe=new Blob([Ge],{type:"audio/wav"});c.ondataavailable(Xe),setTimeout(he,c.timeSlice)}),X={left:[],right:[],recordingLength:0}):setTimeout(he,c.timeSlice))}}typeof e<"u"&&(e.StereoAudioRecorder=ne);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function oe(g,c){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";c=c||{},c.frameInterval||(c.frameInterval=10);var y=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(Z){Z in document.createElement("canvas")&&(y=!0)});var k=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,T=50,I=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);k&&I&&I[2]&&(T=parseInt(I[2],10)),k&&T<52&&(y=!1),c.useWhammyRecorder&&(y=!1);var R,S;if(y)if(c.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),g instanceof HTMLCanvasElement)R=g;else if(g instanceof CanvasRenderingContext2D)R=g.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(c.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var j;this.record=function(){if(j=!0,y&&!c.useWhammyRecorder){var Z;"captureStream"in R?Z=R.captureStream(25):"mozCaptureStream"in R?Z=R.mozCaptureStream(25):"webkitCaptureStream"in R&&(Z=R.webkitCaptureStream(25));try{var ce=new A;ce.addTrack(b(Z,"video")[0]),Z=ce}catch{}if(!Z)throw"captureStream API are NOT available.";S=new re(Z,{mimeType:c.mimeType||"video/webm"}),S.record()}else F.frames=[],W=new Date().getTime(),B();c.initCallback&&c.initCallback()},this.getWebPImages=function(Z){if(g.nodeName.toLowerCase()!=="canvas"){Z();return}var ce=F.frames.length;F.frames.forEach(function(N,V){var J=ce-V;c.disableLogs||console.log(J+"/"+ce+" frames remaining"),c.onEncodingCallback&&c.onEncodingCallback(J,ce);var E=N.image.toDataURL("image/webp",1);F.frames[V].image=E}),c.disableLogs||console.log("Generating WebM"),Z()},this.stop=function(Z){j=!1;var ce=this;if(y&&S){S.stop(Z);return}this.getWebPImages(function(){F.compile(function(N){c.disableLogs||console.log("Recording finished!"),ce.blob=N,ce.blob.forEach&&(ce.blob=new Blob([],{type:"video/webm"})),Z&&Z(ce.blob),F.frames=[]})})};var G=!1;this.pause=function(){if(G=!0,S instanceof re){S.pause();return}},this.resume=function(){if(G=!1,S instanceof re){S.resume();return}j||this.record()},this.clearRecordedData=function(){j&&this.stop(D),D()};function D(){F.frames=[],j=!1,G=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function H(){var Z=document.createElement("canvas"),ce=Z.getContext("2d");return Z.width=g.width,Z.height=g.height,ce.drawImage(g,0,0),Z}function B(){if(G)return W=new Date().getTime(),setTimeout(B,500);if(g.nodeName.toLowerCase()==="canvas"){var Z=new Date().getTime()-W;W=new Date().getTime(),F.frames.push({image:H(),duration:Z}),j&&setTimeout(B,c.frameInterval);return}html2canvas(g,{grabMouse:typeof c.showMousePointer>"u"||c.showMousePointer,onrendered:function(ce){var N=new Date().getTime()-W;if(!N)return setTimeout(B,c.frameInterval);W=new Date().getTime(),F.frames.push({image:ce.toDataURL("image/webp",1),duration:N}),j&&setTimeout(B,c.frameInterval)}})}var W=new Date().getTime(),F=new fe.Video(100)}typeof e<"u"&&(e.CanvasRecorder=oe);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function xe(g,c){c=c||{},c.frameInterval||(c.frameInterval=10),c.disableLogs||console.log("Using frames-interval:",c.frameInterval),this.record=function(){c.width||(c.width=320),c.height||(c.height=240),c.video||(c.video={width:c.width,height:c.height}),c.canvas||(c.canvas={width:c.width,height:c.height}),j.width=c.canvas.width||320,j.height=c.canvas.height||240,G=j.getContext("2d"),c.video&&c.video instanceof HTMLVideoElement?(D=c.video.cloneNode(),c.initCallback&&c.initCallback()):(D=document.createElement("video"),L(g,D),D.onloadedmetadata=function(){c.initCallback&&c.initCallback()},D.width=c.video.width,D.height=c.video.height),D.muted=!0,D.play(),H=new Date().getTime(),B=new fe.Video,c.disableLogs||(console.log("canvas resolutions",j.width,"*",j.height),console.log("video width/height",D.width||j.width,"*",D.height||j.height)),y(c.frameInterval)};function y(W){W=typeof W<"u"?W:10;var F=new Date().getTime()-H;if(!F)return setTimeout(y,W,W);if(R)return H=new Date().getTime(),setTimeout(y,100);H=new Date().getTime(),D.paused&&D.play(),G.drawImage(D,0,0,j.width,j.height),B.frames.push({duration:F,image:j.toDataURL("image/webp")}),I||setTimeout(y,W,W)}function k(W){var F=-1,Z=W.length;(function ce(){if(F++,F===Z){W.callback();return}setTimeout(function(){W.functionToLoop(ce,F)},1)})()}function T(W,F,Z,ce,N){var V=document.createElement("canvas");V.width=j.width,V.height=j.height;var J=V.getContext("2d"),E=[],P=W.length,Q={r:0,g:0,b:0},X=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),he=0,ae=0,Ge=!1;k({length:P,functionToLoop:function(Xe,sn){var Le,Wi,Lt,_t=function(){!Ge&&Lt-Le<=Lt*ae||(Ge=!0,E.push(W[sn])),Xe()};if(Ge)_t();else{var on=new Image;on.onload=function(){J.drawImage(on,0,0,j.width,j.height);var kt=J.getImageData(0,0,j.width,j.height);Le=0,Wi=kt.data.length,Lt=kt.data.length/4;for(var an=0;an<Wi;an+=4){var Ft={r:kt.data[an],g:kt.data[an+1],b:kt.data[an+2]},Vi=Math.sqrt(Math.pow(Ft.r-Q.r,2)+Math.pow(Ft.g-Q.g,2)+Math.pow(Ft.b-Q.b,2));Vi<=X*he&&Le++}_t()},on.src=W[sn].image}},callback:function(){E=E.concat(W.slice(P)),E.length<=0&&E.push(W[W.length-1]),N(E)}})}var I=!1;this.stop=function(W){W=W||function(){},I=!0;var F=this;setTimeout(function(){T(B.frames,-1,null,null,function(Z){B.frames=Z,c.advertisement&&c.advertisement.length&&(B.frames=c.advertisement.concat(B.frames)),B.compile(function(ce){F.blob=ce,F.blob.forEach&&(F.blob=new Blob([],{type:"video/webm"})),W&&W(F.blob)})})},10)};var R=!1;this.pause=function(){R=!0},this.resume=function(){R=!1,I&&this.record()},this.clearRecordedData=function(){I||this.stop(S),S()};function S(){B.frames=[],I=!0,R=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var j=document.createElement("canvas"),G=j.getContext("2d"),D,H,B}typeof e<"u"&&(e.WhammyRecorder=xe);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var fe=function(){function g(k){this.frames=[],this.duration=k||1,this.quality=.8}g.prototype.add=function(k,T){if("canvas"in k&&(k=k.canvas),"toDataURL"in k&&(k=k.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(k))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:k,duration:T||this.duration})};function c(k){var T=h.createObjectURL(new Blob([k.toString(),"this.onmessage =  function (eee) {"+k.name+"(eee.data);}"],{type:"application/javascript"})),I=new Worker(T);return h.revokeObjectURL(T),I}function y(k){function T(N){var V=R(N);if(!V)return[];for(var J=3e4,E=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:Z(V.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:V.width,id:176},{data:V.height,id:186}]}]}]}]}],P=0,Q=0;P<N.length;){var X=[],he=0;do X.push(N[P]),he+=N[P].duration,P++;while(P<N.length&&he<J);var ae=0,Ge={id:524531317,data:I(Q,ae,X)};E[1].data.push(Ge),Q+=he}return D(E)}function I(N,V,J){return[{data:N,id:231}].concat(J.map(function(E){var P=H({frame:E.data.slice(4),trackNum:1,timecode:Math.round(V)});return V+=E.duration,{data:P,id:163}}))}function R(N){if(!N[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var V=N[0].width,J=N[0].height,E=N[0].duration,P=1;P<N.length;P++)E+=N[P].duration;return{duration:E,width:V,height:J}}function S(N){for(var V=[];N>0;)V.push(N&255),N=N>>8;return new Uint8Array(V.reverse())}function j(N){return new Uint8Array(N.split("").map(function(V){return V.charCodeAt(0)}))}function G(N){var V=[],J=N.length%8?new Array(9-N.length%8).join("0"):"";N=J+N;for(var E=0;E<N.length;E+=8)V.push(parseInt(N.substr(E,8),2));return new Uint8Array(V)}function D(N){for(var V=[],J=0;J<N.length;J++){var E=N[J].data;typeof E=="object"&&(E=D(E)),typeof E=="number"&&(E=G(E.toString(2))),typeof E=="string"&&(E=j(E));var P=E.size||E.byteLength||E.length,Q=Math.ceil(Math.ceil(Math.log(P)/Math.log(2))/8),X=P.toString(2),he=new Array(Q*7+7+1-X.length).join("0")+X,ae=new Array(Q).join("0")+"1"+he;V.push(S(N[J].id)),V.push(G(ae)),V.push(E)}return new Blob(V,{type:"video/webm"})}function H(N){var V=0;V|=128;var J=[N.trackNum|128,N.timecode>>8,N.timecode&255,V].map(function(E){return String.fromCharCode(E)}).join("")+N.frame;return J}function B(N){for(var V=N.RIFF[0].WEBP[0],J=V.indexOf("*"),E=0,P=[];E<4;E++)P[E]=V.charCodeAt(J+3+E);var Q,X,he;return he=P[1]<<8|P[0],Q=he&16383,he=P[3]<<8|P[2],X=he&16383,{width:Q,height:X,data:V,riff:N}}function W(N,V){return parseInt(N.substr(V+4,4).split("").map(function(J){var E=J.charCodeAt(0).toString(2);return new Array(8-E.length+1).join("0")+E}).join(""),2)}function F(N){for(var V=0,J={};V<N.length;){var E=N.substr(V,4),P=W(N,V),Q=N.substr(V+4+4,P);V+=8+P,J[E]=J[E]||[],E==="RIFF"||E==="LIST"?J[E].push(F(Q)):J[E].push(Q)}return J}function Z(N){return[].slice.call(new Uint8Array(new Float64Array([N]).buffer),0).map(function(V){return String.fromCharCode(V)}).reverse().join("")}var ce=new T(k.map(function(N){var V=B(F(atob(N.image.slice(23))));return V.duration=N.duration,V}));postMessage(ce)}return g.prototype.compile=function(k){var T=c(y);T.onmessage=function(I){if(I.data.error){console.error(I.data.error);return}k(I.data)},T.postMessage(this.frames)},{Video:g}}();typeof e<"u"&&(e.Whammy=fe);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Re={init:function(){var g=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var c=1,y=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),k,T=indexedDB.open(y,c);function I(S){S.createObjectStore(g.dataStoreName)}function R(){var S=k.transaction([g.dataStoreName],"readwrite");g.videoBlob&&S.objectStore(g.dataStoreName).put(g.videoBlob,"videoBlob"),g.gifBlob&&S.objectStore(g.dataStoreName).put(g.gifBlob,"gifBlob"),g.audioBlob&&S.objectStore(g.dataStoreName).put(g.audioBlob,"audioBlob");function j(G){S.objectStore(g.dataStoreName).get(G).onsuccess=function(D){g.callback&&g.callback(D.target.result,G)}}j("audioBlob"),j("videoBlob"),j("gifBlob")}T.onerror=g.onError,T.onsuccess=function(){if(k=T.result,k.onerror=g.onError,k.setVersion)if(k.version!==c){var S=k.setVersion(c);S.onsuccess=function(){I(k),R()}}else R();else R()},T.onupgradeneeded=function(S){I(S.target.result)}},Fetch:function(g){return this.callback=g,this.init(),this},Store:function(g){return this.audioBlob=g.audioBlob,this.videoBlob=g.videoBlob,this.gifBlob=g.gifBlob,this.init(),this},onError:function(g){console.error(JSON.stringify(g,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof e<"u"&&(e.DiskStorage=Re);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function Qt(g,c){if(typeof GIFEncoder>"u"){var y=document.createElement("script");y.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(y)}c=c||{};var k=g instanceof CanvasRenderingContext2D||g instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(W.record,1e3);return}if(!j){setTimeout(W.record,1e3);return}k||(c.width||(c.width=G.offsetWidth||320),c.height||(c.height=G.offsetHeight||240),c.video||(c.video={width:c.width,height:c.height}),c.canvas||(c.canvas={width:c.width,height:c.height}),R.width=c.canvas.width||320,R.height=c.canvas.height||240,G.width=c.video.width||320,G.height=c.video.height||240),B=new GIFEncoder,B.setRepeat(0),B.setDelay(c.frameRate||200),B.setQuality(c.quality||10),B.start(),typeof c.onGifRecordingStarted=="function"&&c.onGifRecordingStarted();function F(Z){if(W.clearedRecordedData!==!0){if(T)return setTimeout(function(){F(Z)},100);D=o(F),typeof H===void 0&&(H=Z),!(Z-H<90)&&(!k&&G.paused&&G.play(),k||S.drawImage(G,0,0,R.width,R.height),c.onGifPreview&&c.onGifPreview(R.toDataURL("image/png")),B.addFrame(S),H=Z)}}D=o(F),c.initCallback&&c.initCallback()},this.stop=function(F){F=F||function(){},D&&l(D),this.blob=new Blob([new Uint8Array(B.stream().bin)],{type:"image/gif"}),F(this.blob),B.stream().bin=[]};var T=!1;this.pause=function(){T=!0},this.resume=function(){T=!1},this.clearRecordedData=function(){W.clearedRecordedData=!0,I()};function I(){B&&(B.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var R=document.createElement("canvas"),S=R.getContext("2d");k&&(g instanceof CanvasRenderingContext2D?(S=g,R=S.canvas):g instanceof HTMLCanvasElement&&(S=g.getContext("2d"),R=g));var j=!0;if(!k){var G=document.createElement("video");G.muted=!0,G.autoplay=!0,G.playsInline=!0,j=!1,G.onloadedmetadata=function(){j=!0},L(g,G),G.play()}var D=null,H,B,W=this}typeof e<"u"&&(e.GifRecorder=Qt);function An(g,c){var y="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(E){typeof e<"u"||E&&(typeof window<"u"||typeof be>"u"||(be.navigator={userAgent:y,getUserMedia:function(){}},be.console||(be.console={}),(typeof be.console.log>"u"||typeof be.console.error>"u")&&(be.console.error=be.console.log=be.console.log||function(){console.log(arguments)}),typeof document>"u"&&(E.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var P={getContext:function(){return P},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return P},E.HTMLVideoElement=function(){}),typeof location>"u"&&(E.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(E.screen={width:0,height:0}),typeof G>"u"&&(E.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),E.window=be))})(typeof be<"u"?be:null),c=c||"multi-streams-mixer";var k=[],T=!1,I=document.createElement("canvas"),R=I.getContext("2d");I.style.opacity=0,I.style.position="absolute",I.style.zIndex=-1,I.style.top="-1000em",I.style.left="-1000em",I.className=c,(document.body||document.documentElement).appendChild(I),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var S=this,j=window.AudioContext;typeof j>"u"&&(typeof webkitAudioContext<"u"&&(j=webkitAudioContext),typeof mozAudioContext<"u"&&(j=mozAudioContext));var G=window.URL;typeof G>"u"&&typeof webkitURL<"u"&&(G=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var D=window.MediaStream;typeof D>"u"&&typeof webkitMediaStream<"u"&&(D=webkitMediaStream),typeof D<"u"&&typeof D.prototype.stop>"u"&&(D.prototype.stop=function(){this.getTracks().forEach(function(E){E.stop()})});var H={};typeof j<"u"?H.AudioContext=j:typeof webkitAudioContext<"u"&&(H.AudioContext=webkitAudioContext);function B(E,P){"srcObject"in P?P.srcObject=E:"mozSrcObject"in P?P.mozSrcObject=E:P.srcObject=E}this.startDrawingFrames=function(){W()};function W(){if(!T){var E=k.length,P=!1,Q=[];if(k.forEach(function(he){he.stream||(he.stream={}),he.stream.fullcanvas?P=he:Q.push(he)}),P)I.width=P.stream.width,I.height=P.stream.height;else if(Q.length){I.width=E>1?Q[0].width*2:Q[0].width;var X=1;(E===3||E===4)&&(X=2),(E===5||E===6)&&(X=3),(E===7||E===8)&&(X=4),(E===9||E===10)&&(X=5),I.height=Q[0].height*X}else I.width=S.width||360,I.height=S.height||240;P&&P instanceof HTMLVideoElement&&F(P),Q.forEach(function(he,ae){F(he,ae)}),setTimeout(W,S.frameInterval)}}function F(E,P){if(!T){var Q=0,X=0,he=E.width,ae=E.height;P===1&&(Q=E.width),P===2&&(X=E.height),P===3&&(Q=E.width,X=E.height),P===4&&(X=E.height*2),P===5&&(Q=E.width,X=E.height*2),P===6&&(X=E.height*3),P===7&&(Q=E.width,X=E.height*3),typeof E.stream.left<"u"&&(Q=E.stream.left),typeof E.stream.top<"u"&&(X=E.stream.top),typeof E.stream.width<"u"&&(he=E.stream.width),typeof E.stream.height<"u"&&(ae=E.stream.height),R.drawImage(E,Q,X,he,ae),typeof E.stream.onRender=="function"&&E.stream.onRender(R,Q,X,he,ae,P)}}function Z(){T=!1;var E=ce(),P=N();return P&&P.getTracks().filter(function(Q){return Q.kind==="audio"}).forEach(function(Q){E.addTrack(Q)}),g.forEach(function(Q){Q.fullcanvas}),E}function ce(){J();var E;"captureStream"in I?E=I.captureStream():"mozCaptureStream"in I?E=I.mozCaptureStream():S.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var P=new D;return E.getTracks().filter(function(Q){return Q.kind==="video"}).forEach(function(Q){P.addTrack(Q)}),I.stream=P,P}function N(){H.AudioContextConstructor||(H.AudioContextConstructor=new H.AudioContext),S.audioContext=H.AudioContextConstructor,S.audioSources=[],S.useGainNode===!0&&(S.gainNode=S.audioContext.createGain(),S.gainNode.connect(S.audioContext.destination),S.gainNode.gain.value=0);var E=0;if(g.forEach(function(P){if(P.getTracks().filter(function(X){return X.kind==="audio"}).length){E++;var Q=S.audioContext.createMediaStreamSource(P);S.useGainNode===!0&&Q.connect(S.gainNode),S.audioSources.push(Q)}}),!!E)return S.audioDestination=S.audioContext.createMediaStreamDestination(),S.audioSources.forEach(function(P){P.connect(S.audioDestination)}),S.audioDestination.stream}function V(E){var P=document.createElement("video");return B(E,P),P.className=c,P.muted=!0,P.volume=0,P.width=E.width||S.width||360,P.height=E.height||S.height||240,P.play(),P}this.appendStreams=function(E){if(!E)throw"First parameter is required.";E instanceof Array||(E=[E]),E.forEach(function(P){var Q=new D;if(P.getTracks().filter(function(ae){return ae.kind==="video"}).length){var X=V(P);X.stream=P,k.push(X),Q.addTrack(P.getTracks().filter(function(ae){return ae.kind==="video"})[0])}if(P.getTracks().filter(function(ae){return ae.kind==="audio"}).length){var he=S.audioContext.createMediaStreamSource(P);S.audioDestination=S.audioContext.createMediaStreamDestination(),he.connect(S.audioDestination),Q.addTrack(S.audioDestination.stream.getTracks().filter(function(ae){return ae.kind==="audio"})[0])}g.push(Q)})},this.releaseStreams=function(){k=[],T=!0,S.gainNode&&(S.gainNode.disconnect(),S.gainNode=null),S.audioSources.length&&(S.audioSources.forEach(function(E){E.disconnect()}),S.audioSources=[]),S.audioDestination&&(S.audioDestination.disconnect(),S.audioDestination=null),S.audioContext&&S.audioContext.close(),S.audioContext=null,R.clearRect(0,0,I.width,I.height),I.stream&&(I.stream.stop(),I.stream=null)},this.resetVideoStreams=function(E){E&&!(E instanceof Array)&&(E=[E]),J(E)};function J(E){k=[],E=E||g,E.forEach(function(P){if(P.getTracks().filter(function(X){return X.kind==="video"}).length){var Q=V(P);Q.stream=P,k.push(Q)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=Z}typeof e>"u"&&(t.exports=An);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function On(g,c){g=g||[];var y=this,k,T;c=c||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},c.frameInterval||(c.frameInterval=10),c.video||(c.video={}),c.video.width||(c.video.width=360),c.video.height||(c.video.height=240),this.record=function(){k=new An(g,c.elementClass||"multi-streams-mixer"),I().length&&(k.frameInterval=c.frameInterval||10,k.width=c.video.width||360,k.height=c.video.height||240,k.startDrawingFrames()),c.previewStream&&typeof c.previewStream=="function"&&c.previewStream(k.getMixedStream()),T=new re(k.getMixedStream(),c),T.record()};function I(){var R=[];return g.forEach(function(S){b(S,"video").forEach(function(j){R.push(j)})}),R}this.stop=function(R){T&&T.stop(function(S){y.blob=S,R(S),y.clearRecordedData()})},this.pause=function(){T&&T.pause()},this.resume=function(){T&&T.resume()},this.clearRecordedData=function(){T&&(T.clearRecordedData(),T=null),k&&(k.releaseStreams(),k=null)},this.addStreams=function(R){if(!R)throw"First parameter is required.";R instanceof Array||(R=[R]),g.concat(R),!(!T||!k)&&(k.appendStreams(R),c.previewStream&&typeof c.previewStream=="function"&&c.previewStream(k.getMixedStream()))},this.resetVideoStreams=function(R){k&&(R&&!(R instanceof Array)&&(R=[R]),k.resetVideoStreams(R))},this.getMixer=function(){return k},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MultiStreamRecorder=On);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function z(g,c){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof g>"u")throw'First argument "MediaStream" is required.';var y=this;y.recordRTC=new e(g,c),this.startRecording=function(){return new Promise(function(k,T){try{y.recordRTC.startRecording(),k()}catch(I){T(I)}})},this.stopRecording=function(){return new Promise(function(k,T){try{y.recordRTC.stopRecording(function(I){if(y.blob=y.recordRTC.getBlob(),!y.blob||!y.blob.size){T("Empty blob.",y.blob);return}k(I)})}catch(I){T(I)}})},this.pauseRecording=function(){return new Promise(function(k,T){try{y.recordRTC.pauseRecording(),k()}catch(I){T(I)}})},this.resumeRecording=function(){return new Promise(function(k,T){try{y.recordRTC.resumeRecording(),k()}catch(I){T(I)}})},this.getDataURL=function(k){return new Promise(function(T,I){try{y.recordRTC.getDataURL(function(R){T(R)})}catch(R){I(R)}})},this.getBlob=function(){return new Promise(function(k,T){try{k(y.recordRTC.getBlob())}catch(I){T(I)}})},this.getInternalRecorder=function(){return new Promise(function(k,T){try{k(y.recordRTC.getInternalRecorder())}catch(I){T(I)}})},this.reset=function(){return new Promise(function(k,T){try{k(y.recordRTC.reset())}catch(I){T(I)}})},this.destroy=function(){return new Promise(function(k,T){try{k(y.recordRTC.destroy())}catch(I){T(I)}})},this.getState=function(){return new Promise(function(k,T){try{k(y.recordRTC.getState())}catch(I){T(I)}})},this.blob=null,this.version="5.6.2"}typeof e<"u"&&(e.RecordRTCPromisesHandler=z);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Y(g,c){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),c=c||{},c.width=c.width||640,c.height=c.height||480,c.frameRate=c.frameRate||30,c.bitrate=c.bitrate||1200,c.realtime=c.realtime||!0;var y;function k(){return new ReadableStream({start:function(G){var D=document.createElement("canvas"),H=document.createElement("video"),B=!0;H.srcObject=g,H.muted=!0,H.height=c.height,H.width=c.width,H.volume=0,H.onplaying=function(){D.width=c.width,D.height=c.height;var W=D.getContext("2d"),F=1e3/c.frameRate,Z=setInterval(function(){if(y&&(clearInterval(Z),G.close()),B&&(B=!1,c.onVideoProcessStarted&&c.onVideoProcessStarted()),W.drawImage(H,0,0),G._controlledReadableStream.state!=="closed")try{G.enqueue(W.getImageData(0,0,c.width,c.height))}catch{}},F)},H.play()}})}var T;function I(G,D){if(!c.workerPath&&!D){y=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(B){B.arrayBuffer().then(function(W){I(G,W)})});return}if(!c.workerPath&&D instanceof ArrayBuffer){var H=new Blob([D],{type:"text/javascript"});c.workerPath=h.createObjectURL(H)}c.workerPath||console.error("workerPath parameter is missing."),T=new Worker(c.workerPath),T.postMessage(c.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),T.addEventListener("message",function(B){B.data==="READY"?(T.postMessage({width:c.width,height:c.height,bitrate:c.bitrate||1200,timebaseDen:c.frameRate||30,realtime:c.realtime}),k().pipeTo(new WritableStream({write:function(W){if(y){console.error("Got image, but recorder is finished!");return}T.postMessage(W.data.buffer,[W.data.buffer])}}))):B.data&&(R||j.push(B.data))})}this.record=function(){j=[],R=!1,this.blob=null,I(g),typeof c.initCallback=="function"&&c.initCallback()};var R;this.pause=function(){R=!0},this.resume=function(){R=!1};function S(G){if(!T){G&&G();return}T.addEventListener("message",function(D){D.data===null&&(T.terminate(),T=null,G&&G())}),T.postMessage(null)}var j=[];this.stop=function(G){y=!0;var D=this;S(function(){D.blob=new Blob(j,{type:"video/webm"}),G(D.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){j=[],R=!1,this.blob=null},this.blob=null}typeof e<"u"&&(e.WebAssemblyRecorder=Y)})(w_);var BT=w_.exports;const UT=$p(BT);function zT({qualifiedPlayers:t,onClose:e,onComplete:n}){const[r,i]=de.useState([...t]),[s,o]=de.useState([]),[a,l]=de.useState({p1:null,p2:null}),[u,h]=de.useState(0),[p,f]=de.useState(!1),[w,x]=de.useState("Ready to draw."),[C,A]=de.useState(null),[v,m]=de.useState(!1),_=de.useRef(null),b=de.useRef(null),L=de.useRef(null),$=async()=>{if(L.current)try{const oe=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},audio:!0,preferCurrentTab:!0});b.current=oe,_.current=new UT(oe,{type:"video",mimeType:"video/webm"}),_.current.startRecording(),m(!0),oe.getVideoTracks()[0].onended=()=>{U()}}catch(oe){console.error("Error sharing screen: ",oe)}},U=()=>{_.current&&_.current.stopRecording(()=>{const oe=_.current.getBlob(),xe=URL.createObjectURL(oe),fe=document.createElement("a");fe.style.display="none",fe.href=xe,fe.download=`Pallet_PesTour_Draw_${new Date().getTime()}.webm`,document.body.appendChild(fe),fe.click(),window.URL.revokeObjectURL(xe),m(!1),b.current&&(b.current.getTracks().forEach(Re=>Re.stop()),b.current=null)})},q=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316"],re=()=>{if(r.length===0)return"conic-gradient(#334155 0deg, #334155 360deg)";const oe=360/r.length;let xe=[];for(let fe=0;fe<r.length;fe++){const Re=fe*oe,Qt=(fe+1)*oe;xe.push(`${q[fe%q.length]} ${Re}deg ${Qt}deg`)}return`conic-gradient(${xe.join(", ")})`},ne=oe=>{if(p||r.length===0)return;f(!0),x(`Spinning for ${oe==="p1"?"Home":"Away"}...`);let xe=Math.floor(Math.random()*r.length),fe=r[xe];if(oe==="p2"&&a.p1){const z=a.p1.seedType&&a.p1.seedType.endsWith("1"),Y=r.filter(y=>{const k=y.seedType&&y.seedType.endsWith("1");return y.group!==a.p1.group&&!(z&&k)}),g=r.filter(y=>y.group!==a.p1.group);let c=r;if(Y.length>0?c=Y:g.length>0?(c=g,x("Forced Top 1 vs Top 1 matchup (no ideal opponents).")):x("No cross-group available  same group match allowed."),c.length<r.length||Y.length>0&&Y.length===r.length){const y=c[Math.floor(Math.random()*c.length)];xe=r.findIndex(k=>k.id===y.id),fe=y}}const Re=360/r.length,Qt=360-(xe*Re+Re/2),An=5*360,On=u+An+(Qt-u%360);h(On),setTimeout(()=>{f(!1),A(fe),setTimeout(()=>{if(A(null),oe==="p1")l({p1:fe,p2:null}),i(r.filter(z=>z.id!==fe.id)),x(`Home team selected: ${fe.name}`);else{const z={id:`QF-${s.length+1}`,p1Id:a.p1.id,p1Name:a.p1.name,p2Id:fe.id,p2Name:fe.name,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}};let Y=r.filter(c=>c.id!==fe.id),g=[...s,z];if(Y.length===2){const c={id:`QF-${g.length+1}`,p1Id:Y[0].id,p1Name:Y[0].name,p2Id:Y[1].id,p2Name:Y[1].name,played:!1,g1:{p1:null,p2:null},g2:{p1:null,p2:null},g3:{p1:null,p2:null}};g.push(c),Y=[],x("Final match auto-generated!")}else x("Match drawn!");o(g),l({p1:null,p2:null}),i(Y)}},3e3)},8500)};return d.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:[C&&d.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md animate-in zoom-in duration-300",children:d.jsxs("div",{className:"flex flex-col items-center justify-center animate-bounce-in",children:[d.jsx("div",{className:"text-xl font-black text-slate-400 tracking-widest uppercase mb-4 animate-pulse",children:"Selected Player"}),d.jsx("div",{className:"text-6xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-br from-emerald-400 to-blue-500 drop-shadow-[0_0_30px_rgba(16,185,129,0.5)] transform hover:scale-110 transition-transform cursor-default",children:C.name})]})}),d.jsxs("div",{ref:L,className:`bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col md:flex-row shadow-2xl transition-opacity duration-300 ${C?"opacity-20 pointer-events-none":"opacity-100"}`,children:[d.jsxs("div",{className:"flex-1 p-8 flex flex-col items-center justify-center border-b md:border-b-0 md:border-r border-slate-800 bg-slate-950/50",children:[d.jsxs("div",{className:"relative w-64 h-64 sm:w-80 sm:h-80 mb-8",children:[d.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 z-20 w-0 h-0 border-l-[15px] border-r-[15px] border-t-[25px] border-l-transparent border-r-transparent border-t-white drop-shadow-md"}),d.jsx("div",{className:"w-full h-full rounded-full border-4 border-slate-800 shadow-[0_0_30px_rgba(0,0,0,0.5)] overflow-hidden relative",style:{background:re(),transform:`rotate(${u}deg)`,transition:"transform 8.5s cubic-bezier(0.2, 0.8, 0.2, 1)"},children:r.map((oe,xe)=>{const fe=360/r.length,Re=xe*fe+fe/2-90;return d.jsx("div",{className:"absolute top-1/2 left-1/2 origin-left font-bold text-white tracking-wider text-sm whitespace-nowrap drop-shadow-md",style:{transform:`translate(0, -50%) rotate(${Re}deg) translateX(40px)`},children:oe.name},oe.id)})}),d.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 bg-slate-800 border-4 border-slate-700 rounded-full z-10 shadow-inner"})]}),d.jsx("div",{className:"text-center h-12",children:d.jsx("p",{className:`font-mono text-sm ${p?"text-amber-400 animate-pulse":"text-slate-400"}`,children:w})}),d.jsxs("div",{className:"flex gap-4 mt-4 w-full justify-center",children:[d.jsx("button",{onClick:()=>ne("p1"),disabled:p||a.p1!==null||r.length===0,className:"flex-1 max-w-[150px] py-3 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-800 disabled:text-slate-500 rounded-xl font-bold transition-colors",children:"Spin for Home"}),d.jsx("button",{onClick:()=>ne("p2"),disabled:p||a.p1===null||r.length===0,className:"flex-1 max-w-[150px] py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-slate-800 disabled:text-slate-500 rounded-xl font-bold transition-colors",children:"Spin for Away"})]})]}),d.jsxs("div",{className:"flex-1 p-6 flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h3",{className:"text-xl font-black",children:"Live Draw Status"}),d.jsx("button",{onClick:v?U:$,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${v?"bg-red-500/20 text-red-400 border border-red-500/50 animate-pulse":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:v?d.jsxs(d.Fragment,{children:[d.jsx(Xk,{className:"w-3.5 h-3.5"})," Stop REC"]}):d.jsxs(d.Fragment,{children:[d.jsx(Jk,{className:"w-3.5 h-3.5"})," Record"]})})]}),d.jsx("button",{onClick:()=>{v&&U(),e()},className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 transition-colors",children:d.jsx(v_,{})})]}),d.jsxs("div",{className:"bg-slate-950 rounded-xl p-4 border border-slate-800 mb-6",children:[d.jsx("h4",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mb-2",children:"Current Matchup"}),d.jsxs("div",{className:"flex items-center justify-between font-bold text-lg",children:[d.jsx("span",{className:a.p1?"text-blue-400":"text-slate-600",children:a.p1?a.p1.name:"???"}),d.jsx("span",{className:"text-slate-700 mx-4",children:"VS"}),d.jsx("span",{className:a.p2?"text-purple-400":"text-slate-600",children:a.p2?a.p2.name:"???"})]})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mb-3",children:"Generated Matches"}),d.jsxs("div",{className:"space-y-2",children:[s.map((oe,xe)=>d.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[d.jsxs("span",{className:"text-slate-400 text-sm font-mono mr-3",children:["M",xe+1]}),d.jsx("span",{className:"flex-1 text-right font-bold text-blue-300",children:oe.p1Name}),d.jsx("span",{className:"mx-3 text-xs text-slate-500",children:"vs"}),d.jsx("span",{className:"flex-1 font-bold text-purple-300",children:oe.p2Name})]},xe)),s.length===0&&d.jsx("div",{className:"text-center py-8 text-slate-600 text-sm italic",children:"No matches drawn yet."})]})]}),d.jsx("button",{onClick:()=>n(s),disabled:s.length<4,className:"mt-6 w-full py-4 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-800 disabled:text-slate-500 rounded-xl font-black tracking-widest uppercase transition-colors",children:s.length<4?`Draw ${4-s.length} More`:" Confirm Draw"})]})]})]})}function WT({data:t,updateData:e,standingsData:n,isAdmin:r}){const[i,s]=de.useState(!1),[o,a]=de.useState(t.bracket||[]);de.useEffect(()=>{t.bracket&&t.bracket.length>0?a(dn(t.bracket)):a([])},[t.bracket]);const l=C=>{const A=dn([...o,...C]);a(A),e({...t,bracket:A}),s(!1)},u=()=>{window.confirm("Are you sure you want to clear the knockout bracket?")&&(a([]),e({...t,bracket:[]}))},h=(C,A,v,m)=>{if(!r)return;const _=m===""?null:parseInt(m,10);let b=o.map(L=>L.id===C?{...L,[A]:{...L[A],[v]:_}}:L);b=dn(b),a(b),e({...t,bracket:b})},p=C=>{if(!r)return;let A=o.map(v=>v.id===C?{...v,played:!v.played}:v);A=dn(A),a(A),e({...t,bracket:A})},f=o.filter(C=>C.id.startsWith("QF")),w=o.filter(C=>C.id.startsWith("SF")),x=o.find(C=>C.id.startsWith("F"));return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-slate-900 p-4 rounded-xl border border-slate-800",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-2xl font-black flex items-center gap-2",children:[d.jsx(ii,{className:"text-yellow-500"})," Knockout Draw (Admin)"]}),d.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Manage and draw the knockout bracket here."})]}),r?d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:u,disabled:o.length===0,className:"px-4 py-2 bg-slate-800 hover:bg-red-900/50 text-red-400 rounded-lg text-sm font-bold border border-slate-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d.jsx(v_,{className:"w-4 h-4"})," Clear"]}),d.jsxs("button",{onClick:()=>s(!0),disabled:n.qualified.length<8||f.length>=4,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-lg text-sm font-bold shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all disabled:opacity-50 flex items-center gap-2",children:[d.jsx(wl,{className:"w-4 h-4"}),"Spin Draw"]})]}):d.jsxs("div",{className:"bg-slate-800/50 px-3 py-1.5 rounded border border-slate-700 text-xs text-slate-400 flex items-center gap-2",children:[d.jsx(m_,{className:"w-3 h-3"})," Admin required for draw"]})]}),n.qualified.length<8&&o.length===0&&d.jsxs("div",{className:"bg-amber-900/20 border border-amber-500/30 text-amber-400 p-6 rounded-xl text-center",children:[d.jsx(p_,{className:"w-8 h-8 mx-auto mb-2 opacity-80"}),d.jsx("p",{className:"font-bold",children:"Group Stage Incomplete"}),d.jsx("p",{className:"text-sm mt-1 opacity-80",children:"Finish the group stage matches to generate the top 8 qualified players."})]}),o.length>0?d.jsxs("div",{className:"space-y-12",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-bold mb-4 text-purple-400 border-b border-purple-900/50 pb-2 flex items-center gap-2",children:[d.jsx(ii,{className:"w-5 h-5"})," Quarterfinals"]}),d.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((C,A)=>d.jsx(yi,{match:C,title:`Quarterfinal ${A+1}`,isAdmin:r,togglePlayed:p,handleScoreChange:h},C.id))})]}),w.length>0&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-bold mb-4 text-amber-400 border-b border-amber-900/50 pb-2 flex items-center gap-2",children:[d.jsx(h_,{className:"w-5 h-5"})," Semifinals"]}),d.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:w.map((C,A)=>d.jsx(yi,{match:C,title:`Semifinal ${A+1}`,isAdmin:r,togglePlayed:p,handleScoreChange:h},C.id))})]}),x&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-bold mb-4 text-yellow-400 border-b border-yellow-900/50 pb-2 flex items-center gap-2",children:[d.jsx(ii,{className:"w-5 h-5"})," Grand Final"]}),d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"w-full max-w-lg",children:d.jsx(yi,{match:x,title:"Grand Final",isAdmin:r,togglePlayed:p,handleScoreChange:h})})})]})]}):n.qualified.length>=8&&d.jsxs("div",{className:"h-64 flex flex-col items-center justify-center border-2 border-dashed border-slate-800 rounded-2xl text-slate-500",children:[d.jsx(ii,{className:"w-12 h-12 mb-3 opacity-20"}),d.jsx("p",{className:"font-bold",children:"No draw generated yet."}),r&&d.jsx("p",{className:"text-sm mt-1",children:'Click "Spin Draw" to generate matchups.'})]}),i&&d.jsx(zT,{qualifiedPlayers:n.qualified,onClose:()=>s(!1),onComplete:l})]})}function VT({data:t,updateData:e,isAdmin:n,setIsAdmin:r}){const[i,s]=de.useState(""),[o,a]=de.useState(!1),[l,u]=de.useState(t.settings),[h,p]=de.useState(t.players);de.useEffect(()=>{u(t.settings),p(t.players)},[t]);const f=v=>{v.preventDefault(),i==="admin"?(r(!0),a(!1),s("")):a(!0)},w=()=>{e({...t,settings:l})},x=(v,m)=>{p(h.map(_=>_.id===v?{..._,name:m}:_))},C=()=>{e({...t,players:h})},A=()=>{window.prompt("DANGER! This will delete all scores and reset to template. Type 'RESET' to confirm.")==="RESET"&&e(Qo)};return n?d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-[#C084FC]/10 p-6 rounded-2xl border border-[#C084FC]/30 shadow-[0_0_30px_rgba(192,132,252,0.1)] relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-[#C084FC] opacity-[0.05] rounded-full blur-[60px] pointer-events-none"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("h2",{className:"text-3xl font-black flex items-center gap-3 text-[#E2E8F0] tracking-tight",children:[d.jsx(xl,{className:"text-[#C084FC] w-8 h-8"})," Control Panel"]}),d.jsx("p",{className:"text-sm text-[#C084FC]/70 mt-1 font-bold tracking-wide",children:"Live synchronization is ACTIVE."})]}),d.jsx("div",{className:"relative z-10",children:d.jsxs("button",{onClick:()=>r(!1),className:"flex items-center gap-2 px-5 py-2.5 bg-[#0a0b10]/50 hover:bg-[#1E2738] border border-[#C084FC]/20 hover:border-[#C084FC]/50 text-[#C084FC] rounded-xl text-sm font-black tracking-widest uppercase transition-all shadow-md",children:[d.jsx(qk,{className:"w-4 h-4"})," Lock"]})})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-[#131722] border border-[#222B3D] rounded-2xl p-8 shadow-xl",children:[d.jsxs("h3",{className:"text-xl font-black mb-6 flex items-center gap-3 text-[#E2E8F0] uppercase tracking-wider",children:[d.jsx("div",{className:"p-2 rounded-xl bg-[#3B82F6]/10 text-[#60A5FA] border border-[#3B82F6]/20",children:d.jsx(g_,{className:"w-5 h-5"})}),"Tournament Info"]}),d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-[#64748B] font-black mb-2 uppercase tracking-widest",children:"Tournament Name"}),d.jsx("input",{value:l.name,onChange:v=>u({...l,name:v.target.value}),className:"w-full bg-[#0a0b10] border border-[#1E2738] text-[#E2E8F0] rounded-xl px-4 py-3 focus:border-[#3B82F6] focus:ring-1 focus:ring-[#3B82F6] outline-none shadow-inner transition-all font-medium"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-[#64748B] font-black mb-2 uppercase tracking-widest",children:"Season"}),d.jsx("input",{value:l.season,onChange:v=>u({...l,season:v.target.value}),className:"w-full bg-[#0a0b10] border border-[#1E2738] text-[#E2E8F0] rounded-xl px-4 py-3 focus:border-[#3B82F6] focus:ring-1 focus:ring-[#3B82F6] outline-none shadow-inner transition-all font-medium"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-[#64748B] font-black mb-2 uppercase tracking-widest",children:"Tagline"}),d.jsx("input",{value:l.tagline,onChange:v=>u({...l,tagline:v.target.value}),className:"w-full bg-[#0a0b10] border border-[#1E2738] text-[#E2E8F0] rounded-xl px-4 py-3 focus:border-[#3B82F6] focus:ring-1 focus:ring-[#3B82F6] outline-none shadow-inner transition-all font-medium"})]}),d.jsx("button",{onClick:w,className:"w-full mt-4 py-3.5 bg-[#3B82F6]/10 hover:bg-[#3B82F6]/20 text-[#60A5FA] rounded-xl font-black tracking-widest uppercase border border-[#3B82F6]/30 transition-colors",children:"Save Info Updates"})]})]}),d.jsxs("div",{className:"bg-[#131722] border border-[#EF4444]/20 rounded-2xl p-8 shadow-[0_0_30px_rgba(239,68,68,0.05)] relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[#EF4444] opacity-[0.03] rounded-full blur-[50px] pointer-events-none"}),d.jsxs("h3",{className:"text-xl font-black mb-6 flex items-center gap-3 text-[#EF4444] uppercase tracking-wider relative z-10",children:[d.jsx("div",{className:"p-2 rounded-xl bg-[#EF4444]/10 border border-[#EF4444]/20",children:d.jsx(h_,{className:"w-5 h-5"})}),"Danger Zone"]}),d.jsxs("p",{className:"text-[#94A3B8] font-medium leading-relaxed mb-8 relative z-10",children:["Resetting the tournament will permanently delete all scores, match histories, and knockout bracket data across all clients. ",d.jsx("strong",{className:"text-white",children:"This cannot be undone."})]}),d.jsxs("button",{onClick:A,className:"w-full py-4 bg-[#EF4444]/10 hover:bg-[#EF4444] text-[#EF4444] hover:text-white rounded-xl font-black uppercase tracking-widest border border-[#EF4444]/30 transition-all flex items-center justify-center gap-3 shadow-[0_0_20px_rgba(239,68,68,0.1)] hover:shadow-[0_0_30px_rgba(239,68,68,0.4)] relative z-10",children:[d.jsx(Kk,{className:"w-5 h-5"})," Factory Reset"]})]})]}),d.jsxs("div",{className:"bg-[#131722] border border-[#222B3D] rounded-2xl p-8 shadow-xl",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[d.jsxs("h3",{className:"text-xl font-black flex items-center gap-3 text-[#E2E8F0] uppercase tracking-wider",children:[d.jsx("div",{className:"p-2 rounded-xl bg-[#10B981]/10 text-[#10B981] border border-[#10B981]/20",children:d.jsx(Yk,{className:"w-5 h-5"})}),"Player Roster"]}),d.jsxs("button",{onClick:C,className:"px-6 py-3 bg-[#10B981] hover:bg-[#059669] text-white rounded-xl text-sm font-black tracking-widest uppercase shadow-[0_0_20px_rgba(16,185,129,0.3)] transition-all flex items-center gap-2",children:[d.jsx(qs,{className:"w-4 h-4"})," Save Roster Updates"]})]}),d.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:["A","B","C"].map(v=>d.jsxs("div",{className:"bg-[#0a0b10] p-5 rounded-2xl border border-[#1E2738] shadow-inner",children:[d.jsxs("h4",{className:"font-black text-center text-[#64748B] mb-5 uppercase tracking-[0.2em]",children:["Group ",v]}),d.jsx("div",{className:"space-y-3",children:h.filter(m=>m.group===v).map(m=>d.jsxs("div",{className:"flex items-center gap-3 bg-[#131722] p-2 rounded-lg border border-[#222B3D]",children:[d.jsx("span",{className:"text-[10px] font-black tracking-wider text-[#64748B] bg-[#1E2738] px-2 py-1 rounded w-8 text-center",children:m.id}),d.jsx("input",{value:m.name,onChange:_=>x(m.id,_.target.value),className:"flex-1 bg-transparent border-none text-[#E2E8F0] px-2 py-1 text-sm focus:outline-none font-bold placeholder-[#475569]",placeholder:`Player ${m.id}`})]},m.id))})]},v))})]})]}):d.jsxs("div",{className:"max-w-md mx-auto mt-20 p-8 bg-[#131722] border border-[#222B3D] rounded-2xl shadow-[0_0_50px_rgba(20,30,50,0.5)] animate-in zoom-in-95 duration-500",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("div",{className:"w-20 h-20 bg-[#C084FC]/10 rounded-full flex items-center justify-center border border-[#C084FC]/20 shadow-[0_0_30px_rgba(192,132,252,0.15)]",children:d.jsx(m_,{className:"w-10 h-10 text-[#C084FC]"})})}),d.jsx("h2",{className:"text-3xl font-black text-center mb-2 text-[#E2E8F0] tracking-tight",children:"Admin Portal"}),d.jsx("p",{className:"text-[#8B9BB4] text-center text-sm mb-8 font-medium",children:"Authentication required to manage tournament."}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("input",{type:"password",placeholder:"Enter password",value:i,onChange:v=>s(v.target.value),className:"w-full bg-[#0a0b10] border border-[#1E2738] rounded-xl px-5 py-4 focus:outline-none focus:border-[#C084FC] focus:ring-1 focus:ring-[#C084FC] text-center text-lg text-white placeholder-[#475569] shadow-inner transition-colors font-mono"}),o&&d.jsx("p",{className:"text-[#EF4444] text-xs mt-3 text-center font-bold tracking-widest uppercase animate-pulse",children:"Incorrect password"})]}),d.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-[#C084FC] to-[#9333EA] hover:from-[#A855F7] hover:to-[#7E22CE] text-white font-black tracking-widest uppercase py-4 rounded-xl shadow-[0_0_20px_rgba(192,132,252,0.3)] transition-all",children:"Unlock Dashboard"})]})]})}function HT(){const[t,e]=de.useState(null),[n,r]=de.useState("default-pes-app"),[i,s]=de.useState(Qo),[o,a]=de.useState(!0),[l,u]=de.useState("home"),[h,p]=de.useState(!1);de.useEffect(()=>{try{{nT().then(C=>{C||(console.warn("Auth failed, running in local fallback mode."),a(!1))});const x=wS(__,C=>{C&&e(C)});return()=>x()}}catch(x){console.error("Firebase setup error",x),a(!1)}},[]),de.useEffect(()=>{if(!t)return;const x=Bp(zp,"tournament"),C=Ak(x,A=>{A.exists()?s(A.val()):(Up(x,Qo),s(Qo)),a(!1)},A=>{console.error("Firebase RTDB sync error:",A),a(!1)});return()=>C()},[t,n]);const f=async x=>{if(s(x),t)try{const C=Bp(zp,"tournament");await Up(C,x)}catch(C){console.error("Error saving data:",C)}},w=de.useMemo(()=>oT(i.players,i.matches),[i.players,i.matches]);return o?d.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center text-emerald-400 flex-col gap-4",children:[d.jsx(wl,{className:"w-12 h-12 animate-spin"}),d.jsx("p",{className:"font-mono uppercase tracking-widest text-sm",children:"Loading Tournament Data..."})]}):d.jsxs("div",{className:"min-h-screen font-sans selection:bg-blue-500/30",children:[d.jsx(lT,{currentPage:l,setCurrentPage:u,isAdmin:h}),d.jsxs("main",{className:"max-w-6xl mx-auto p-4 md:p-6 pb-24",children:[l==="home"&&d.jsx(uT,{data:i,setCurrentPage:u}),l==="standings"&&d.jsx(LT,{standingsData:w,bracketData:i.bracket}),l==="matches"&&d.jsx(FT,{data:i,updateData:f,isAdmin:h}),l==="rules"&&d.jsx(jT,{}),l==="knockout"&&h&&d.jsx(WT,{data:i,updateData:f,standingsData:w,isAdmin:h}),l==="admin"&&d.jsx(VT,{data:i,updateData:f,isAdmin:h,setIsAdmin:p})]})]})}pu.createRoot(document.getElementById("root")).render(d.jsx(V_.StrictMode,{children:d.jsx(HT,{})}));
